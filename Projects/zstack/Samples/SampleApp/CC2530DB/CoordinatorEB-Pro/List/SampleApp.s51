///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.20.2.41139 for 8051            11/Jan/2016  16:35:11 /
// Copyright 2004-2013 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//                                                                            /
//    Source file        =  C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\Source\SampleApp.c /
//    Command line       =  -f C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\ /
//                          Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ /
//                          ..\Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ        /
//                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TR /
//                          UE -DZDO_COORDINATOR -DRTR_NWK -DBLINK_LEDS) -f   /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          Tools\CC2530DB\f8wConfig.cfg (-DSECURE=0          /
//                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                 /
//                          -DDEFAULT_CHANLIST=0x00000800                     /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40          /
//                          -DNWK_MAX_BINDING_ENTRIES=4                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DMAC_MAX_FRAME_SIZE=116       /
//                          "-DCONST=const __code" -DGENERIC=__generic        /
//                          -DRFD_RCVC_ALWAYS_ON=TRUE -DPOLL_RATE=1000        /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)  /
//                          -DREJOIN_POLL_RATE=440 C:\Users\ArnoldWorkStation /
//                          \Desktop\ZigbeeTest\Projects\zstack\Samples\Sampl /
//                          eApp\Source\SampleApp.c -D ZIGBEEPRO -D ZTOOL_P1  /
//                          -D xMT_TASK -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D    /
//                          LCD_SUPPORTED=DEBUG -lC                           /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\Coordinat /
//                          orEB-Pro\List\ -lA C:\Users\ArnoldWorkStation\Des /
//                          ktop\ZigbeeTest\Projects\zstack\Samples\SampleApp /
//                          \CC2530DB\CoordinatorEB-Pro\List\                 /
//                          --diag_suppress Pe001,Pa010 -o                    /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\Coordinat /
//                          orEB-Pro\Obj\ -e --no_cse --no_unroll             /
//                          --no_inline --no_code_motion --no_tbaa --debug    /
//                          --core=plain --dptr=16,1 --data_model=large       /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\ -I       /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\SOURCE /
//                          \ -I C:\Users\ArnoldWorkStation\Desktop\ZigbeeTes /
//                          t\Projects\zstack\Samples\SampleApp\CC2530DB\..\. /
//                          .\..\ZMAIN\TI2530DB\ -I                           /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\MT\ -I                           /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\HAL\INCLUDE\ -I                  /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\HAL\TARGET\CC2530EB\ -I          /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\OSAL\MCU\CCSOC\ -I               /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\OSAL\INCLUDE\ -I                 /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\STACK\AF\ -I                     /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\STACK\NWK\ -I                    /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\STACK\SEC\ -I                    /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\STACK\SAPI\ -I                   /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\STACK\SYS\ -I                    /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\STACK\ZDO\ -I                    /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\ZMAC\F8W\ -I                     /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\ZMAC\ -I                         /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\SERVICES\SADDR\ -I               /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\SERVICES\SDATA\ -I               /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\MAC\INCLUDE\ -I                  /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\MAC\HIGH_LEVEL\ -I               /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\MAC\LOW_LEVEL\srf04\ -I          /
//                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\COMPONENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\ /
//                           -On --require_prototypes                         /
//    List file          =  C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\Coordinat /
//                          orEB-Pro\List\SampleApp.s51                       /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME SampleApp

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?FLT_ADD
        EXTERN ?FLT_DIV
        EXTERN ?FLT_GE
        EXTERN ?FLT_LT
        EXTERN ?FLT_MUL
        EXTERN ?FLT_SUB
        EXTERN ?FLT_TO_L
        EXTERN ?L_MOV_TO_X
        EXTERN ?L_MOV_X
        EXTERN ?L_TO_FLT
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_FOUR
        EXTERN ?PUSH_XSTACK_I_FOUR
        EXTERN ?PUSH_XSTACK_I_ONE
        EXTERN ?PUSH_XSTACK_I_THREE
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?S_DIV_MOD
        EXTERN ?UC_SWITCH_SPARSE
        EXTERN ?UL_TO_FLT
        EXTERN ?US_SWITCH_SPARSE
        EXTERN ?V0
        EXTERN ?XLOAD_R2345
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN ?XSTORE_R2345
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC ??SampleApp_AnchorMSGCB?relay
        FUNCTION ??SampleApp_AnchorMSGCB?relay,0203H
        PUBLIC ??SampleApp_HandleKeys?relay
        FUNCTION ??SampleApp_HandleKeys?relay,0203H
        PUBLIC ??SampleApp_Init?relay
        FUNCTION ??SampleApp_Init?relay,0203H
        PUBLIC ??SampleApp_MessageMSGCB?relay
        FUNCTION ??SampleApp_MessageMSGCB?relay,0203H
        PUBLIC ??SampleApp_ProcessEvent?relay
        FUNCTION ??SampleApp_ProcessEvent?relay,0203H
        PUBLIC ??SampleApp_QuadrotorMSGCB?relay
        FUNCTION ??SampleApp_QuadrotorMSGCB?relay,0203H
        PUBLIC ??SampleApp_Quadrotor_SendLocation?relay
        FUNCTION ??SampleApp_Quadrotor_SendLocation?relay,0203H
        PUBLIC ??SampleApp_Router_SendPeriodicMessage?relay
        FUNCTION ??SampleApp_Router_SendPeriodicMessage?relay,0203H
        PUBLIC ??SampleApp_Router_calibrationNMessage?relay
        FUNCTION ??SampleApp_Router_calibrationNMessage?relay,0203H
        PUBLIC ??SampleApp_Tester_calibrationAMessage?relay
        FUNCTION ??SampleApp_Tester_calibrationAMessage?relay,0203H
        PUBLIC ??SampleApp_Tester_calibrationMSGCB?relay
        FUNCTION ??SampleApp_Tester_calibrationMSGCB?relay,0203H
        PUBLIC AValue
        PUBLIC AnchorX
        PUBLIC AnchorY
        PUBLIC AnchorZ
        PUBLIC DeviceID
        PUBLIC RssiValue
        PUBLIC SampleAppFlashCounter
        PUBLIC SampleAppPeriodicCounter
        PUBLIC SampleApp_AnchorMSGCB
        FUNCTION SampleApp_AnchorMSGCB,0a1203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 4, STACK
        LOCFRAME XSTACK, 40, STACK
        PUBLIC SampleApp_ClusterList
        PUBLIC SampleApp_Group_1
        PUBLIC SampleApp_Group_2
        PUBLIC SampleApp_HandleKeys
        FUNCTION SampleApp_HandleKeys,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 13, STACK
        PUBLIC SampleApp_Init
        FUNCTION SampleApp_Init,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC SampleApp_MessageMSGCB
        FUNCTION SampleApp_MessageMSGCB,0a1203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 24, STACK
        PUBLIC SampleApp_NwkState
        PUBLIC SampleApp_ProcessEvent
        FUNCTION SampleApp_ProcessEvent,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC SampleApp_QuadrotorMSGCB
        FUNCTION SampleApp_QuadrotorMSGCB,0a1203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 4, STACK
        LOCFRAME XSTACK, 34, STACK
        PUBLIC SampleApp_Quadrotor_Location_DstAddr
        PUBLIC SampleApp_Quadrotor_SendLocation
        FUNCTION SampleApp_Quadrotor_SendLocation,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 62, STACK
        PUBLIC SampleApp_Router_Periodic_DstAddr
        PUBLIC SampleApp_Router_SendPeriodicMessage
        FUNCTION SampleApp_Router_SendPeriodicMessage,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 21, STACK
        PUBLIC SampleApp_Router_calibrationNMessage
        FUNCTION SampleApp_Router_calibrationNMessage,021203H
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 38, STACK
        PUBLIC SampleApp_SimpleDesc
        PUBLIC SampleApp_TaskID
        PUBLIC SampleApp_Tester_DstAddr
        PUBLIC SampleApp_Tester_calibrationAMessage
        FUNCTION SampleApp_Tester_calibrationAMessage,021203H
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 42, STACK
        PUBLIC SampleApp_Tester_calibrationMSGCB
        FUNCTION SampleApp_Tester_calibrationMSGCB,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 16, STACK
        PUBLIC SampleApp_TransID
        PUBLIC SampleApp_epDesc
        PUBWEAK __Constant_0
        PUBWEAK __Constant_1
        PUBWEAK __Constant_3c23d70a
        PUBWEAK __Constant_3dcccccd
        PUBWEAK __Constant_41200000
        PUBLIC i1
        PUBLIC i2
        PUBLIC i3
        PUBLIC i4
        PUBLIC imof1
        PUBLIC imof2
        PUBLIC imof3
        PUBLIC imof4
        PUBLIC locationX
        PUBLIC locationY
        PUBLIC locationZ
        PUBLIC nValue
        PUBLIC nindex1
        PUBLIC nindex2
        PUBLIC nindex3
        PUBLIC nindex4
        PUBLIC perRssiBuf1
        PUBLIC perRssiBuf2
        PUBLIC perRssiBuf3
        PUBLIC perRssiBuf4
        PUBLIC pernBuf1
        PUBLIC pernBuf2
        PUBLIC pernBuf3
        PUBLIC pernBuf4
        PUBLIC rssivalue
        PUBLIC sumRssi1
        PUBLIC sumRssi2
        PUBLIC sumRssi3
        PUBLIC sumRssi4
        PUBLIC tempParameter
        
          CFI Names cfiNames0
          CFI StackFrame CFA_SP SP IDATA
          CFI StackFrame CFA_PSP16 PSP16 XDATA
          CFI StackFrame CFA_XSP16 XSP16 XDATA
          CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
          CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
          CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
          CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
          CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
          CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
          CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
          CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
          CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
          CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
          CFI VirtualResource ?RET:24
          CFI Resource ?BRET_EXT:8
          CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
          CFI ResourceParts PSP16 PSPH, PSPL
          CFI ResourceParts XSP16 XSPH, XSPL
          CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
          CFI EndNames cfiNames0
        
          CFI Common cfiCommon0 Using cfiNames0
          CFI CodeAlign 1
          CFI DataAlign -1
          CFI ReturnAddress ?RET CODE
          CFI CFA_DOVERLAY Used
          CFI CFA_IOVERLAY Used
          CFI CFA_SP SP+-3
          CFI CFA_PSP16 PSP16+0
          CFI CFA_XSP16 XSP16+0
          CFI `PSW.CY` SameValue
          CFI `B.BR0` SameValue
          CFI `B.BR1` SameValue
          CFI `B.BR2` SameValue
          CFI `B.BR3` SameValue
          CFI `B.BR4` SameValue
          CFI `B.BR5` SameValue
          CFI `B.BR6` SameValue
          CFI `B.BR7` SameValue
          CFI `VB.BR8` SameValue
          CFI `VB.BR9` SameValue
          CFI `VB.BR10` SameValue
          CFI `VB.BR11` SameValue
          CFI `VB.BR12` SameValue
          CFI `VB.BR13` SameValue
          CFI `VB.BR14` SameValue
          CFI `VB.BR15` SameValue
          CFI VB SameValue
          CFI B Undefined
          CFI A Undefined
          CFI PSW SameValue
          CFI DPL0 SameValue
          CFI DPH0 SameValue
          CFI R0 Undefined
          CFI R1 Undefined
          CFI R2 Undefined
          CFI R3 Undefined
          CFI R4 Undefined
          CFI R5 Undefined
          CFI R6 SameValue
          CFI R7 SameValue
          CFI V0 SameValue
          CFI V1 SameValue
          CFI V2 SameValue
          CFI V3 SameValue
          CFI V4 SameValue
          CFI V5 SameValue
          CFI V6 SameValue
          CFI V7 SameValue
          CFI V8 SameValue
          CFI V9 SameValue
          CFI V10 SameValue
          CFI V11 SameValue
          CFI V12 SameValue
          CFI V13 SameValue
          CFI V14 SameValue
          CFI V15 SameValue
          CFI PSPH Undefined
          CFI PSPL Undefined
          CFI XSPH Undefined
          CFI XSPL Undefined
          CFI ?RET Concat
          CFI ?BRET_EXT Frame(CFA_SP, 3)
          CFI ?RET_HIGH Frame(CFA_SP, 2)
          CFI ?RET_LOW Frame(CFA_SP, 1)
          CFI EndCommon cfiCommon0
        
AF_DataRequest      SYMBOL "AF_DataRequest"
??AF_DataRequest?relay SYMBOL "?relay", AF_DataRequest
HalLcdWriteString   SYMBOL "HalLcdWriteString"
??HalLcdWriteString?relay SYMBOL "?relay", HalLcdWriteString
HalUARTWrite        SYMBOL "HalUARTWrite"
??HalUARTWrite?relay SYMBOL "?relay", HalUARTWrite
MT_UartInit         SYMBOL "MT_UartInit"
??MT_UartInit?relay SYMBOL "?relay", MT_UartInit
MT_UartRegisterTaskID SYMBOL "MT_UartRegisterTaskID"
??MT_UartRegisterTaskID?relay SYMBOL "?relay", MT_UartRegisterTaskID
RegisterForKeys     SYMBOL "RegisterForKeys"
??RegisterForKeys?relay SYMBOL "?relay", RegisterForKeys
SampleApp_MinMax_localization SYMBOL "SampleApp_MinMax_localization"
??SampleApp_MinMax_localization?relay SYMBOL "?relay", SampleApp_MinMax_localization
afRegister          SYMBOL "afRegister"
??afRegister?relay  SYMBOL "?relay", afRegister
aps_AddGroup        SYMBOL "aps_AddGroup"
??aps_AddGroup?relay SYMBOL "?relay", aps_AddGroup
calibrationN        SYMBOL "calibrationN"
??calibrationN?relay SYMBOL "?relay", calibrationN
moving_average      SYMBOL "moving_average"
??moving_average?relay SYMBOL "?relay", moving_average
moving_average_f    SYMBOL "moving_average_f"
??moving_average_f?relay SYMBOL "?relay", moving_average_f
osal_memcpy         SYMBOL "osal_memcpy"
??osal_memcpy?relay SYMBOL "?relay", osal_memcpy
osal_msg_deallocate SYMBOL "osal_msg_deallocate"
??osal_msg_deallocate?relay SYMBOL "?relay", osal_msg_deallocate
osal_msg_receive    SYMBOL "osal_msg_receive"
??osal_msg_receive?relay SYMBOL "?relay", osal_msg_receive
osal_rand           SYMBOL "osal_rand"
??osal_rand?relay   SYMBOL "?relay", osal_rand
osal_start_timerEx  SYMBOL "osal_start_timerEx"
??osal_start_timerEx?relay SYMBOL "?relay", osal_start_timerEx
osal_strlen         SYMBOL "osal_strlen"
??osal_strlen?relay SYMBOL "?relay", osal_strlen
SampleApp_AnchorMSGCB SYMBOL "SampleApp_AnchorMSGCB"
??SampleApp_AnchorMSGCB?relay SYMBOL "?relay", SampleApp_AnchorMSGCB
SampleApp_HandleKeys SYMBOL "SampleApp_HandleKeys"
??SampleApp_HandleKeys?relay SYMBOL "?relay", SampleApp_HandleKeys
SampleApp_Init      SYMBOL "SampleApp_Init"
??SampleApp_Init?relay SYMBOL "?relay", SampleApp_Init
SampleApp_MessageMSGCB SYMBOL "SampleApp_MessageMSGCB"
??SampleApp_MessageMSGCB?relay SYMBOL "?relay", SampleApp_MessageMSGCB
SampleApp_ProcessEvent SYMBOL "SampleApp_ProcessEvent"
??SampleApp_ProcessEvent?relay SYMBOL "?relay", SampleApp_ProcessEvent
SampleApp_QuadrotorMSGCB SYMBOL "SampleApp_QuadrotorMSGCB"
??SampleApp_QuadrotorMSGCB?relay SYMBOL "?relay", SampleApp_QuadrotorMSGCB
SampleApp_Quadrotor_SendLocation SYMBOL "SampleApp_Quadrotor_SendLocation"
??SampleApp_Quadrotor_SendLocation?relay SYMBOL "?relay", SampleApp_Quadrotor_SendLocation
SampleApp_Router_SendPeriodicMessage SYMBOL "SampleApp_Router_SendPeriodicMessage"
??SampleApp_Router_SendPeriodicMessage?relay SYMBOL "?relay", SampleApp_Router_SendPeriodicMessage
SampleApp_Router_calibrationNMessage SYMBOL "SampleApp_Router_calibrationNMessage"
??SampleApp_Router_calibrationNMessage?relay SYMBOL "?relay", SampleApp_Router_calibrationNMessage
SampleApp_Tester_calibrationAMessage SYMBOL "SampleApp_Tester_calibrationAMessage"
??SampleApp_Tester_calibrationAMessage?relay SYMBOL "?relay", SampleApp_Tester_calibrationAMessage
SampleApp_Tester_calibrationMSGCB SYMBOL "SampleApp_Tester_calibrationMSGCB"
??SampleApp_Tester_calibrationMSGCB?relay SYMBOL "?relay", SampleApp_Tester_calibrationMSGCB

        EXTERN ??AF_DataRequest?relay
        FUNCTION ??AF_DataRequest?relay,00H
        EXTERN ??HalLcdWriteString?relay
        FUNCTION ??HalLcdWriteString?relay,00H
        EXTERN ??HalUARTWrite?relay
        FUNCTION ??HalUARTWrite?relay,00H
        EXTERN ??MT_UartInit?relay
        FUNCTION ??MT_UartInit?relay,00H
        EXTERN ??MT_UartRegisterTaskID?relay
        FUNCTION ??MT_UartRegisterTaskID?relay,00H
        EXTERN ??RegisterForKeys?relay
        FUNCTION ??RegisterForKeys?relay,00H
        EXTERN ??SampleApp_MinMax_localization?relay
        FUNCTION ??SampleApp_MinMax_localization?relay,00H
        EXTERN ??afRegister?relay
        FUNCTION ??afRegister?relay,00H
        EXTERN ??aps_AddGroup?relay
        FUNCTION ??aps_AddGroup?relay,00H
        EXTERN ??calibrationN?relay
        FUNCTION ??calibrationN?relay,00H
        EXTERN ??moving_average?relay
        FUNCTION ??moving_average?relay,00H
        EXTERN ??moving_average_f?relay
        FUNCTION ??moving_average_f?relay,00H
        EXTERN ??osal_memcpy?relay
        FUNCTION ??osal_memcpy?relay,00H
        EXTERN ??osal_msg_deallocate?relay
        FUNCTION ??osal_msg_deallocate?relay,00H
        EXTERN ??osal_msg_receive?relay
        FUNCTION ??osal_msg_receive?relay,00H
        EXTERN ??osal_rand?relay
        FUNCTION ??osal_rand?relay,00H
        EXTERN ??osal_start_timerEx?relay
        FUNCTION ??osal_start_timerEx?relay,00H
        EXTERN ??osal_strlen?relay
        FUNCTION ??osal_strlen?relay,00H
        EXTERN AF_DataRequest
        FUNCTION AF_DataRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 57, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLcdWriteString
        FUNCTION HalLcdWriteString,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalUARTWrite
        FUNCTION HalUARTWrite,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN MT_UartInit
        FUNCTION MT_UartInit,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN MT_UartRegisterTaskID
        FUNCTION MT_UartRegisterTaskID,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN RegisterForKeys
        FUNCTION RegisterForKeys,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN SampleApp_MinMax_localization
        FUNCTION SampleApp_MinMax_localization,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 62, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN afRegister
        FUNCTION afRegister,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN aps_AddGroup
        FUNCTION aps_AddGroup,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN calibrationN
        FUNCTION calibrationN,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 40, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN moving_average
        FUNCTION moving_average,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN moving_average_f
        FUNCTION moving_average_f,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memcpy
        FUNCTION osal_memcpy,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_deallocate
        FUNCTION osal_msg_deallocate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_receive
        FUNCTION osal_msg_receive,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_rand
        FUNCTION osal_rand,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_strlen
        FUNCTION osal_strlen,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC

// C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Projects\zstack\Samples\SampleApp\Source\SampleApp.c
//    1 /**************************************************************************************************
//    2   Filename:       SampleApp.c
//    3   Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
//    4   Revision:       $Revision: 19453 $
//    5 
//    6   Description:    Sample Application (no Profile).
//    7 
//    8 
//    9   Copyright 2007 Texas Instruments Incorporated. All rights reserved.
//   10 
//   11   IMPORTANT: Your use of this Software is limited to those specific rights
//   12   granted under the terms of a software license agreement between the user
//   13   who downloaded the software, his/her employer (which must be your employer)
//   14   and Texas Instruments Incorporated (the "License").  You may not use this
//   15   Software unless you agree to abide by the terms of the License. The License
//   16   limits your use, and you acknowledge, that the Software may not be modified,
//   17   copied or distributed unless embedded on a Texas Instruments microcontroller
//   18   or used solely and exclusively in conjunction with a Texas Instruments radio
//   19   frequency transceiver, which is integrated into your product.  Other than for
//   20   the foregoing purpose, you may not use, reproduce, copy, prepare derivative
//   21   works of, modify, distribute, perform, display or sell this Software and/or
//   22   its documentation for any purpose.
//   23 
//   24   YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
//   25   PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
//   26   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
//   27   NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
//   28   TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
//   29   NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
//   30   LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
//   31   INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
//   32   OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
//   33   OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
//   34   (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
//   35 
//   36   Should you have any questions regarding your right to use this Software,
//   37   contact Texas Instruments Incorporated at www.TI.com.
//   38 **************************************************************************************************/
//   39 
//   40 /*********************************************************************
//   41   This application isn't intended to do anything useful, it is
//   42   intended to be a simple example of an application's structure.
//   43 
//   44   This application sends it's messages either as broadcast or
//   45   broadcast filtered group messages.  The other (more normal)
//   46   message addressing is unicast.  Most of the other sample
//   47   applications are written to support the unicast message model.
//   48 
//   49   Key control:
//   50     SW1:  Sends a flash command to all devices in Group 1.
//   51     SW2:  Adds/Removes (toggles) this device in and out
//   52           of Group 1.  This will enable and disable the
//   53           reception of the flash command.
//   54 *********************************************************************/
//   55 
//   56 /*********************************************************************
//   57  * INCLUDES
//   58  */
//   59 #include "OSAL.h"
//   60 #include "ZGlobals.h"
//   61 #include "AF.h"
//   62 #include "aps_groups.h"
//   63 #include "ZDApp.h"
//   64 
//   65 #include "SampleApp.h"
//   66 #include "SampleAppHw.h"
//   67 
//   68 #include "OnBoard.h"
//   69 
//   70 /* HAL */
//   71 #include "hal_lcd.h"
//   72 #include "hal_led.h"
//   73 #include "hal_key.h"
//   74 #include "MT_UART.h"
//   75 #include "MT_APP.h"
//   76 #include "MT.h"
//   77 
//   78 /*********************************************************************
//   79  * MACROS
//   80  */
//   81 
//   82 /*********************************************************************
//   83  * CONSTANTS
//   84  */
//   85 
//   86 /*********************************************************************
//   87  * TYPEDEFS
//   88  */
//   89 
//   90 /*********************************************************************
//   91  * GLOBAL VARIABLES
//   92  */
//   93 
//   94 // This list should be filled with Application specific Cluster IDs.

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
//   95 const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
SampleApp_ClusterList:
        DATA16
        DW 1
        DW 2
        DW 3
//   96 {
//   97   SAMPLEAPP_PERIODIC_CLUSTERID,
//   98   CALBRATION_N_CLUSTERID,
//   99   LZQR_GROUP_CLUSTERID   //id for localization of quadrotor group 
//  100 };
//  101 

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
//  102 const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
SampleApp_SimpleDesc:
        DB 20
        DATA16
        DW 3848
        DW 1
        DATA8
        DB 0
        DB 3
        DATA16
        DW SampleApp_ClusterList
        DATA8
        DB 3
        DATA16
        DW SampleApp_ClusterList
//  103 {
//  104   SAMPLEAPP_ENDPOINT,              //  int Endpoint;
//  105   SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
//  106   SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
//  107   SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
//  108   SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
//  109   SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
//  110   (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
//  111   SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
//  112   (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
//  113 };
//  114 
//  115 // This is the Endpoint/Interface description.  It is defined here, but
//  116 // filled-in in SampleApp_Init().  Another way to go would be to fill
//  117 // in the structure here and make it a "const" (in code space).  The
//  118 // way it's defined in this sample app it is define in RAM.

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  119 endPointDesc_t SampleApp_epDesc;
SampleApp_epDesc:
        DS 6
        REQUIRE __INIT_XDATA_Z
//  120 
//  121 /*********************************************************************
//  122  * EXTERNAL VARIABLES
//  123  */
//  124 
//  125 /*********************************************************************
//  126  * EXTERNAL FUNCTIONS
//  127  */
//  128 
//  129 
//  130 /*********************************************************************
//  131  * LOCAL VARIABLES
//  132  */

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  133 uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
SampleApp_TaskID:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  134                           // This variable will be received when
//  135                           // SampleApp_Init() is called.

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  136 devStates_t SampleApp_NwkState;
SampleApp_NwkState:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  137 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  138 uint8 SampleApp_TransID;  // This is the unique message ID (counter)
SampleApp_TransID:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  139 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  140 afAddrType_t SampleApp_Router_Periodic_DstAddr;
SampleApp_Router_Periodic_DstAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  141 afAddrType_t SampleApp_Tester_DstAddr;
SampleApp_Tester_DstAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  142 afAddrType_t SampleApp_Quadrotor_Location_DstAddr;
SampleApp_Quadrotor_Location_DstAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z
//  143 
//  144 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  145 aps_Group_t SampleApp_Group_1;
SampleApp_Group_1:
        DS 18
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  146 aps_Group_t SampleApp_Group_2;
SampleApp_Group_2:
        DS 18
        REQUIRE __INIT_XDATA_Z
//  147 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  148 uint8 SampleAppPeriodicCounter = 0;
SampleAppPeriodicCounter:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  149 uint8 SampleAppFlashCounter = 0;
SampleAppFlashCounter:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  150 
//  151 //user setting for quadrotor
//  152 
//  153 //buf for storing rssi values from 4 anchors

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  154 int8 perRssiBuf1[RSSI_AVG_WINDOW_SIZE]={0};
perRssiBuf1:
        DS 32
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  155 int8 perRssiBuf2[RSSI_AVG_WINDOW_SIZE]={0};
perRssiBuf2:
        DS 32
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  156 int8 perRssiBuf3[RSSI_AVG_WINDOW_SIZE]={0};
perRssiBuf3:
        DS 32
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  157 int8 perRssiBuf4[RSSI_AVG_WINDOW_SIZE]={0};
perRssiBuf4:
        DS 32
        REQUIRE __INIT_XDATA_Z
//  158 //buf for nvalue

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  159 float pernBuf1[8]={0};
pernBuf1:
        DS 32
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  160 float pernBuf2[8]={0};
pernBuf2:
        DS 32
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  161 float pernBuf3[8]={0};
pernBuf3:
        DS 32
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  162 float pernBuf4[8]={0};
pernBuf4:
        DS 32
        REQUIRE __INIT_XDATA_Z
//  163 //temp rssivalue

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  164 int8 rssivalue;
rssivalue:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  165 // index for loop innenhalb the window

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  166 int8 i1=0;
i1:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  167 int8 i2=0;
i2:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  168 int8 i3=0;
i3:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  169 int8 i4=0;
i4:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  170 // index for moving filter

        RSEG XDATA_I:XDATA:NOROOT(0)
//  171 int imof1[2]={0,1};
imof1:
        DATA32
        DS 4
        REQUIRE `?<Initializer for imof1>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  172 int imof2[2]={0,1};
imof2:
        DATA32
        DS 4
        REQUIRE `?<Initializer for imof2>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  173 int imof3[2]={0,1};
imof3:
        DATA32
        DS 4
        REQUIRE `?<Initializer for imof3>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  174 int imof4[2]={0,1};
imof4:
        DATA32
        DS 4
        REQUIRE `?<Initializer for imof4>`
        REQUIRE __INIT_XDATA_I
//  175 // index for moving filter of n value

        RSEG XDATA_I:XDATA:NOROOT(0)
//  176 int nindex1[2]={0,1};
nindex1:
        DATA32
        DS 4
        REQUIRE `?<Initializer for nindex1>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  177 int nindex2[2]={0,1};
nindex2:
        DATA32
        DS 4
        REQUIRE `?<Initializer for nindex2>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  178 int nindex3[2]={0,1};
nindex3:
        DATA32
        DS 4
        REQUIRE `?<Initializer for nindex3>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  179 int nindex4[2]={0,1};
nindex4:
        DATA32
        DS 4
        REQUIRE `?<Initializer for nindex4>`
        REQUIRE __INIT_XDATA_I
//  180 // sum/average Rssi value

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//  181 float sumRssi1=0;
sumRssi1:
        DS 4
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//  182 float sumRssi2=0;
sumRssi2:
        DS 4
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//  183 float sumRssi3=0;
sumRssi3:
        DS 4
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
//  184 float sumRssi4=0;
sumRssi4:
        DS 4
        REQUIRE __INIT_XDATA_Z
//  185 //localization parameter
//  186 //float distance[4]={0,0,0,0};

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  187 float RssiValue[4]={0,0,0,0};
RssiValue:
        DS 16
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_I:XDATA:NOROOT(0)
//  188 float nValue[4]={3.0f,3.0f,3.0f,3.0f};
nValue:
        DATA8
        DS 16
        REQUIRE `?<Initializer for nValue>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  189 float AValue[4]={44,44,44,44};
AValue:
        DATA8
        DS 16
        REQUIRE `?<Initializer for AValue>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  190 float AnchorX[4]={2.4f, 0.0f, 0.0f, 2.4f};
AnchorX:
        DATA8
        DS 16
        REQUIRE `?<Initializer for AnchorX>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//  191 float AnchorY[4]={4.2f, 4.2f, 0.0f, 0.0f};
AnchorY:
        DATA8
        DS 16
        REQUIRE `?<Initializer for AnchorY>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  192 float AnchorZ[4]={0.0f, 0.0f, 0.0f, 0.0f};
AnchorZ:
        DS 16
        REQUIRE __INIT_XDATA_Z
//  193 
//  194 //altitude information

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  195 float locationX[4]={0.0f, 0.0f, 0.0f, 0.0f};
locationX:
        DS 16
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  196 float locationY[4]={0.0f, 0.0f, 0.0f, 0.0f};
locationY:
        DS 16
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  197 float locationZ[4]={0.0f, 0.0f, 0.0f, 0.0f};
locationZ:
        DS 16
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  198 LParameter tempParameter;
tempParameter:
        DS 36
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_I:XDATA:NOROOT(0)
//  199 int DeviceID=1;
DeviceID:
        DATA16
        DS 2
        REQUIRE `?<Initializer for DeviceID>`
        REQUIRE __INIT_XDATA_I
//  200 /*********************************************************************
//  201  * LOCAL FUNCTIONS
//  202  */
//  203 void SampleApp_HandleKeys( uint8 shift, uint8 keys );
//  204 //deal with message(Co)
//  205 void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
//  206 //deal with message(Ed)
//  207 void SampleApp_QuadrotorMSGCB( afIncomingMSGPacket_t *pckt );
//  208 //deal with message(Ro)
//  209 void SampleApp_AnchorMSGCB( afIncomingMSGPacket_t *pckt );
//  210 //tester calibration a(Ed)
//  211 void SampleApp_Tester_calibrationMSGCB(afIncomingMSGPacket_t *pckt );
//  212 //router send period message
//  213 void SampleApp_Router_SendPeriodicMessage( int index );
//  214 //quadrotor send their location in the group
//  215 void SampleApp_Quadrotor_SendLocation( int index );
//  216 //router calibration n
//  217 void SampleApp_Router_calibrationNMessage(int index, float nvalue);
//  218 //tester calibration A
//  219 void SampleApp_Tester_calibrationAMessage( int index , float A );
//  220 
//  221 //void SampleApp_SendFlashMessage( uint16 flashTime );
//  222 //void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg);
//  223 
//  224 //float gaussianfilter(int8* rssi, int length);
//  225 //float averagefilter(int8* rssi, int length);
//  226 //float calibrationN(int localID, int index, float rssivalue_f, float AnchorX[4], float AnchorY[4], float AnchorZ[4], float A[4]);
//  227 /*********************************************************************
//  228  * NETWORK LAYER CALLBACKS
//  229  */
//  230 
//  231 /*********************************************************************
//  232  * PUBLIC FUNCTIONS
//  233  */
//  234 
//  235 /*********************************************************************
//  236  * @fn      SampleApp_Init
//  237  *
//  238  * @brief   Initialization function for the Generic App Task.
//  239  *          This is called during initialization and should contain
//  240  *          any application specific initialization (ie. hardware
//  241  *          initialization/setup, table initialization, power up
//  242  *          notificaiton ... ).
//  243  *
//  244  * @param   task_id - the ID assigned by OSAL.  This ID should be
//  245  *                    used to send messages and set timers.
//  246  *
//  247  * @return  none
//  248  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  249 void SampleApp_Init( uint8 task_id )
SampleApp_Init:
          CFI Block cfiBlock0 Using cfiCommon0
          CFI Function SampleApp_Init
        CODE
//  250 { 
        FUNCALL SampleApp_Init, MT_UartInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, MT_UartRegisterTaskID
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, afRegister
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, RegisterForKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, aps_AddGroup
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, aps_AddGroup
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Init, HalLcdWriteString
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xb
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 11)
        ; Saved register size: 11
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
//  251   SampleApp_TaskID = task_id;
        MOV     A,R6
        MOV     DPTR,#SampleApp_TaskID
        MOVX    @DPTR,A
//  252   SampleApp_NwkState = DEV_INIT;
        MOV     DPTR,#SampleApp_NwkState
        MOV     A,#0x1
        MOVX    @DPTR,A
//  253   SampleApp_TransID = 0;
        MOV     DPTR,#SampleApp_TransID
        MOV     A,#0x0
        MOVX    @DPTR,A
//  254   
//  255   MT_UartInit();                  //´®¿Ú³õÊ¼»¯
        ; Setup parameters for call to function MT_UartInit
        LCALL   ??MT_UartInit?relay
//  256   MT_UartRegisterTaskID(task_id); //×¢²á´®¿ÚÈÎÎñ
        ; Setup parameters for call to function MT_UartRegisterTaskID
        MOV     A,R6
        MOV     R1,A
        LCALL   ??MT_UartRegisterTaskID?relay
//  257   HalUARTWrite(0,"UartInit OK\n", sizeof("UartInit OK\n"));//ÌáÊ¾ÐÅÏ¢
        ; Setup parameters for call to function HalUARTWrite
        MOV     R4,#0xd
        MOV     R5,#0x0
        MOV     R2,#`?<Constant "UartInit OK\\n">` & 0xff
        MOV     R3,#(`?<Constant "UartInit OK\\n">` >> 8) & 0xff
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  258   
//  259   // Device hardware initialization can be added here or in main() (Zmain.c).
//  260   // If the hardware is application specific - add it here.
//  261   // If the hardware is other parts of the device add it in main().
//  262 
//  263  #if defined ( BUILD_ALL_DEVICES )
//  264   // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
//  265   // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
//  266   // together - if they are - we will start up a coordinator. Otherwise,
//  267   // the device will start as a router.
//  268   if ( readCoordinatorJumper() )
//  269     zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
//  270   else
//  271     zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
//  272 #endif // BUILD_ALL_DEVICES
//  273 
//  274 #if defined ( HOLD_AUTO_START )
//  275   // HOLD_AUTO_START is a compile option that will surpress ZDApp
//  276   //  from starting the device and wait for the application to
//  277   //  start the device.
//  278   ZDOInitDevice(0);
//  279 #endif
//  280 
//  281   // Setup for the periodic message's destination address
//  282   // Router broadcast to everyone
//  283 
//  284 
//  285   // Setup for the flash command's destination address - Group 1
//  286 //  SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
//  287 //  SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
//  288 //  SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;
//  289 
//  290   // Fill out the endpoint description.
//  291   SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_epDesc
        MOV     A,#0x14
        MOVX    @DPTR,A
//  292   SampleApp_epDesc.task_id = &SampleApp_TaskID;
        MOV     DPTR,#SampleApp_epDesc + 1
        MOV     A,#SampleApp_TaskID & 0xff
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#(SampleApp_TaskID >> 8) & 0xff
        MOVX    @DPTR,A
//  293   SampleApp_epDesc.simpleDesc
//  294             = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
        MOV     DPTR,#SampleApp_epDesc + 3
        MOV     A,#SampleApp_SimpleDesc & 0xff
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
        MOVX    @DPTR,A
//  295   SampleApp_epDesc.latencyReq = noLatencyReqs;
        MOV     DPTR,#SampleApp_epDesc + 5
        MOV     A,#0x0
        MOVX    @DPTR,A
//  296 
//  297   // Register the endpoint description with the AF
//  298   afRegister( &SampleApp_epDesc );
        ; Setup parameters for call to function afRegister
        MOV     R2,#SampleApp_epDesc & 0xff
        MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
        LCALL   ??afRegister?relay
        MOV     A,R1
//  299 
//  300   // Register for all key events - This app will handle all key events
//  301   RegisterForKeys( SampleApp_TaskID );
        ; Setup parameters for call to function RegisterForKeys
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??RegisterForKeys?relay
        MOV     A,R1
//  302 
//  303   // By default, only end devices and coordinator start out in Group 1
//  304   SampleApp_Group_1.ID = SAMPLEAPP_CalN_GROUP; //0x0001
        MOV     DPTR,#SampleApp_Group_1
        MOV     A,#0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  305   //SampleApp_Group.name[0]=0; or just as bellow
//  306   osal_memcpy( SampleApp_Group_1.name, "Group 1", 7 );
        ; Setup parameters for call to function osal_memcpy
        MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
        MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
        MOV     ?V0 + 2,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     R4,#0x7
        MOV     R5,#0x0
        MOV     R2,#(SampleApp_Group_1 + 2) & 0xff
        MOV     R3,#((SampleApp_Group_1 + 2) >> 8) & 0xff
        LCALL   ??osal_memcpy?relay
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 11)
//  307   aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group_1 );
        ; Setup parameters for call to function aps_AddGroup
        MOV     R2,#SampleApp_Group_1 & 0xff
        MOV     R3,#(SampleApp_Group_1 >> 8) & 0xff
        MOV     R1,#0x14
        LCALL   ??aps_AddGroup?relay
        MOV     A,R1
//  308   
//  309    // Only end devices and coordinator can joint this Group 2
//  310   SampleApp_Group_2.ID = SAMPLEAPP_QUADROTOR_GROUP; //0x0002
        MOV     DPTR,#SampleApp_Group_2
        MOV     A,#0x2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  311   //SampleApp_Group.name[0]=0; or just as bellow
//  312   osal_memcpy( SampleApp_Group_2.name, "Group 2", 7 );
        ; Setup parameters for call to function osal_memcpy
        MOV     ?V0 + 0,#`?<Constant "Group 2">` & 0xff
        MOV     ?V0 + 1,#(`?<Constant "Group 2">` >> 8) & 0xff
        MOV     ?V0 + 2,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     R4,#0x7
        MOV     R5,#0x0
        MOV     R2,#(SampleApp_Group_2 + 2) & 0xff
        MOV     R3,#((SampleApp_Group_2 + 2) >> 8) & 0xff
        LCALL   ??osal_memcpy?relay
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 11)
//  313   aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group_2 );
        ; Setup parameters for call to function aps_AddGroup
        MOV     R2,#SampleApp_Group_2 & 0xff
        MOV     R3,#(SampleApp_Group_2 >> 8) & 0xff
        MOV     R1,#0x14
        LCALL   ??aps_AddGroup?relay
        MOV     A,R1
//  314 
//  315 
//  316  
//  317 
//  318 #if defined ( LCD_SUPPORTED )
//  319   HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
        ; Setup parameters for call to function HalLcdWriteString
        MOV     R1,#0x1
        MOV     R2,#`?<Constant "SampleApp">` & 0xff
        MOV     R3,#(`?<Constant "SampleApp">` >> 8) & 0xff
        LCALL   ??HalLcdWriteString?relay
//  320 #endif
//  321   
//  322   
//  323 }
        MOV     R7,#0x3
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock0
//  324 
//  325 /*********************************************************************
//  326  * @fn      SampleApp_ProcessEvent
//  327  *
//  328  * @brief   Generic Application Task event processor.  This function
//  329  *          is called to process all events for the task.  Events
//  330  *          include timers, messages and any other user defined events.
//  331  *
//  332  * @param   task_id  - The OSAL assigned task ID.
//  333  * @param   events - events to process.  This is a bit map and can
//  334  *                   contain more than one event.
//  335  *
//  336  * @return  none
//  337  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  338 uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
SampleApp_ProcessEvent:
          CFI Block cfiBlock1 Using cfiCommon0
          CFI Function SampleApp_ProcessEvent
        CODE
//  339 {
        FUNCALL SampleApp_ProcessEvent, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_MessageMSGCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_QuadrotorMSGCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_AnchorMSGCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_Tester_calibrationMSGCB
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_msg_deallocate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_Router_SendPeriodicMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, SampleApp_Quadrotor_SendLocation
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessEvent, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     ?V0 + 2,R1
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  340   afIncomingMSGPacket_t *MSGpkt;
//  341   (void)task_id;  // Intentionally unreferenced parameter
//  342 
//  343   if ( events & SYS_EVENT_MSG )
        MOV     A,R6
        ANL     A,#0x0
        MOV     R0,A
        MOV     A,R7
        ANL     A,#0x80
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     $+5
        LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
//  344   {
//  345     MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
        ; Setup parameters for call to function osal_msg_receive
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_msg_receive?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
//  346   //HalUARTWrite(0, MSGpkt->cmd.Data, MSGpkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
//  347     while ( MSGpkt )
??SampleApp_ProcessEvent_1:
        MOV     A,?V0 + 0
        ORL     A,?V0 + 1
        JNZ     $+5
        LJMP    ??SampleApp_ProcessEvent_2 & 0xFFFF
//  348     {
//  349       switch ( MSGpkt->hdr.event )
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        ADD     A,#-0x1a
        JZ      ??SampleApp_ProcessEvent_3
        ADD     A,#0x5a
        JZ      ??SampleApp_ProcessEvent_4
        ADD     A,#-0x11
        JZ      ??SampleApp_ProcessEvent_5
        LJMP    ??SampleApp_ProcessEvent_6 & 0xFFFF
//  350       {        
//  351         // Received when a key is pressed
//  352         case KEY_CHANGE:
//  353           SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
??SampleApp_ProcessEvent_4:
        ; Setup parameters for call to function SampleApp_HandleKeys
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??SampleApp_HandleKeys?relay
//  354           break;
        LJMP    ??SampleApp_ProcessEvent_6 & 0xFFFF
//  355 
//  356         // Received when a messages is received (OTA) for this endpoint
//  357         case AF_INCOMING_MSG_CMD:
//  358                   if ( (SampleApp_NwkState == DEV_ZB_COORD) 
//  359                         //|| (SampleApp_NwkState == DEV_ROUTER)
//  360                      //|| (SampleApp_NwkState == DEV_END_DEVICE)
//  361                           
//  362                       )
??SampleApp_ProcessEvent_3:
        MOV     DPTR,#SampleApp_NwkState
        MOVX    A,@DPTR
        XRL     A,#0x9
        JNZ     ??SampleApp_ProcessEvent_7
//  363                   {
//  364                    SampleApp_MessageMSGCB( MSGpkt );
        ; Setup parameters for call to function SampleApp_MessageMSGCB
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??SampleApp_MessageMSGCB?relay
        SJMP    ??SampleApp_ProcessEvent_8
//  365                   }
//  366                   else if((SampleApp_NwkState == DEV_END_DEVICE))
??SampleApp_ProcessEvent_7:
        MOV     DPTR,#SampleApp_NwkState
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_9
//  367                   {
//  368                    
//  369                     SampleApp_QuadrotorMSGCB(MSGpkt);
        ; Setup parameters for call to function SampleApp_QuadrotorMSGCB
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??SampleApp_QuadrotorMSGCB?relay
        SJMP    ??SampleApp_ProcessEvent_8
//  370                    
//  371                     
//  372                   }
//  373                    else if(SampleApp_NwkState == DEV_ROUTER)
??SampleApp_ProcessEvent_9:
        MOV     DPTR,#SampleApp_NwkState
        MOVX    A,@DPTR
        XRL     A,#0x7
        JNZ     ??SampleApp_ProcessEvent_6
//  374                   {
//  375                      if(DeviceID!=6)
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_10
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_ProcessEvent_10:
        JZ      ??SampleApp_ProcessEvent_11
//  376                     SampleApp_AnchorMSGCB(MSGpkt);
        ; Setup parameters for call to function SampleApp_AnchorMSGCB
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??SampleApp_AnchorMSGCB?relay
        SJMP    ??SampleApp_ProcessEvent_6
//  377                      else
//  378                      SampleApp_Tester_calibrationMSGCB(MSGpkt);
??SampleApp_ProcessEvent_11:
        ; Setup parameters for call to function SampleApp_Tester_calibrationMSGCB
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??SampleApp_Tester_calibrationMSGCB?relay
//  379                   }
//  380 //                  else if((SampleApp_NwkState == DEV_END_DEVICE)&&(DeviceID==6))
//  381 //                  {
//  382 //                    SampleApp_Tester_calibrationMSGCB(MSGpkt);
//  383 //                  }
//  384                     
//  385           break;
??SampleApp_ProcessEvent_8:
        SJMP    ??SampleApp_ProcessEvent_6
//  386 
//  387         case ZDO_STATE_CHANGE:
//  388           SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
??SampleApp_ProcessEvent_5:
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPTR,#SampleApp_NwkState
        MOVX    @DPTR,A
//  389           if ( //(SampleApp_NwkState == DEV_ZB_COORD) ||
//  390                  (SampleApp_NwkState == DEV_ROUTER)&&(DeviceID!=6)
//  391              //|| (SampleApp_NwkState == DEV_END_DEVICE)
//  392                   
//  393               )
        MOV     DPTR,#SampleApp_NwkState
        MOVX    A,@DPTR
        XRL     A,#0x7
        JNZ     ??SampleApp_ProcessEvent_12
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_13
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_ProcessEvent_13:
        JZ      ??SampleApp_ProcessEvent_12
//  394           {
//  395             // Start sending the periodic message in a regular interval.
//  396             osal_start_timerEx( SampleApp_TaskID,
//  397                               SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
//  398                               SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x32
        MOV     R5,#0x0
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        SJMP    ??SampleApp_ProcessEvent_6
//  399                
//  400           }
//  401           else if((SampleApp_NwkState == DEV_END_DEVICE)&&(DeviceID!=6))
??SampleApp_ProcessEvent_12:
        MOV     DPTR,#SampleApp_NwkState
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_6
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_14
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_ProcessEvent_14:
        JZ      ??SampleApp_ProcessEvent_6
//  402           {
//  403               //Start sending quadrotor location after calculation
//  404                osal_start_timerEx( SampleApp_TaskID,
//  405                               SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT,
//  406                               SAMPLEAPP_SEND_PERIODIC_LOCATION_TIMEOUT );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x2
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  407                   
//  408           }
//  409           else
//  410           {
//  411             // Device is no longer in the network
//  412           }
//  413           break;
//  414 
//  415         default:
//  416           break;
//  417       }
//  418 
//  419       // Release the memory
//  420       osal_msg_deallocate( (uint8 *)MSGpkt );
??SampleApp_ProcessEvent_6:
        ; Setup parameters for call to function osal_msg_deallocate
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??osal_msg_deallocate?relay
        MOV     A,R1
//  421 
//  422       // Next - if one is available
//  423       MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
        ; Setup parameters for call to function osal_msg_receive
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_msg_receive?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        LJMP    ??SampleApp_ProcessEvent_1 & 0xFFFF
//  424     }
//  425 
//  426     // return unprocessed events
//  427     return (events ^ SYS_EVENT_MSG);
??SampleApp_ProcessEvent_2:
        MOV     A,R6
        XRL     A,#0x0
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x80
        MOV     R3,A
        LJMP    ??SampleApp_ProcessEvent_15 & 0xFFFF
//  428   }
//  429 
//  430   // Send a message out - This event is generated by a timer
//  431   //  (setup in SampleApp_Init()).
//  432   // anchor sends period message to help ed to localise itself 
//  433   if ( (events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT)&&(DeviceID!=6) )
??SampleApp_ProcessEvent_0:
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        JNC     ??SampleApp_ProcessEvent_16
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_17
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_ProcessEvent_17:
        JZ      ??SampleApp_ProcessEvent_16
//  434   {
//  435     // Send the periodic message
//  436     SampleApp_Router_SendPeriodicMessage(DeviceID);
        ; Setup parameters for call to function SampleApp_Router_SendPeriodicMessage
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??SampleApp_Router_SendPeriodicMessage?relay
//  437 
//  438     // Setup to send message again in normal period (+ a little jitter)
//  439     osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
//  440         (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x0003)) );
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,?V0 + 4
        ANL     A,#0x3
        MOV     R0,A
        MOV     A,?V0 + 5
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x32
        MOV     R4,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R5,A
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  441 
//  442     // return unprocessed events
//  443     return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
        MOV     A,R6
        XRL     A,#0x1
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x0
        MOV     R3,A
        SJMP    ??SampleApp_ProcessEvent_15
//  444   }
//  445 
//  446   
//  447    // Send a location message out (ED)
//  448     if ( (events & SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT)&&(DeviceID!=6) )
??SampleApp_ProcessEvent_16:
        MOV     A,R6
        ANL     A,#0x2
        JZ      ??SampleApp_ProcessEvent_18
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_ProcessEvent_19
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_ProcessEvent_19:
        JZ      ??SampleApp_ProcessEvent_18
//  449   {
//  450     // Send the periodic message
//  451     SampleApp_Quadrotor_SendLocation(DeviceID);
        ; Setup parameters for call to function SampleApp_Quadrotor_SendLocation
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??SampleApp_Quadrotor_SendLocation?relay
//  452 
//  453     // Setup to send message again in normal period (+ a little jitter)
//  454     osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT,
//  455         (SAMPLEAPP_SEND_PERIODIC_LOCATION_TIMEOUT + (osal_rand() & 0x000E)) );
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,?V0 + 4
        ANL     A,#0xe
        MOV     R0,A
        MOV     A,?V0 + 5
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0x18
        MOV     R4,A
        MOV     A,R1
        ADDC    A,#0x3
        MOV     R5,A
        MOV     R2,#0x2
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  456 
//  457     // return unprocessed events
//  458     return (events ^ SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT);
        MOV     A,R6
        XRL     A,#0x2
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x0
        MOV     R3,A
        SJMP    ??SampleApp_ProcessEvent_15
//  459   }
//  460   
//  461   
//  462   
//  463   // Discard unknown events
//  464   return 0;
??SampleApp_ProcessEvent_18:
        MOV     R2,#0x0
        MOV     R3,#0x0
??SampleApp_ProcessEvent_15:
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock1
//  465 }
//  466 
//  467 /*********************************************************************
//  468  * Event Generation Functions
//  469  */
//  470 /*********************************************************************
//  471  * @fn      SampleApp_HandleKeys
//  472  *
//  473  * @brief   Handles all key events for this device.
//  474  *
//  475  * @param   shift - true if in shift/alt.
//  476  * @param   keys - bit field for key events. Valid entries:
//  477  *                 HAL_KEY_SW_2
//  478  *                 HAL_KEY_SW_1
//  479  *
//  480  * @return  none
//  481  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  482 void SampleApp_HandleKeys( uint8 shift, uint8 keys )
SampleApp_HandleKeys:
          CFI Block cfiBlock2 Using cfiCommon0
          CFI Function SampleApp_HandleKeys
        CODE
//  483 {
        FUNCALL SampleApp_HandleKeys, SampleApp_Tester_calibrationAMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     A,R2
        MOV     R7,A
//  484   (void)shift;  // Intentionally unreferenced parameter
//  485   
//  486   if ( keys & HAL_KEY_SW_1 && (DeviceID==6))
        MOV     C,0xE0 /* A   */.0
        JNC     ??SampleApp_HandleKeys_0
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??SampleApp_HandleKeys_1
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_HandleKeys_1:
        JNZ     ??SampleApp_HandleKeys_0
//  487   {
//  488     /* This key sends the Flash Command is sent to Group 1.
//  489      * This device will not receive the Flash Command from this
//  490      * device (even if it belongs to group 1).
//  491      */
//  492     //SampleApp_SendFlashMessage( SAMPLEAPP_FLASH_DURATION );
//  493      
//  494      static int aindex;
//  495      if(aindex!=4)
        MOV     DPTR,#??aindex
        MOVX    A,@DPTR
        XRL     A,#0x4
        JNZ     ??SampleApp_HandleKeys_2
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_HandleKeys_2:
        JZ      ??SampleApp_HandleKeys_3
//  496      {
//  497         SampleApp_Tester_calibrationAMessage( aindex+1 , RssiValue[aindex] );
        ; Setup parameters for call to function SampleApp_Tester_calibrationAMessage
        MOV     DPTR,#??aindex
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#RssiValue & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#(RssiValue >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 13)
        MOV     DPTR,#??aindex
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??SampleApp_Tester_calibrationAMessage?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 9)
//  498         aindex++;
        MOV     DPTR,#??aindex
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOVX    @DPTR,A
        SJMP    ??SampleApp_HandleKeys_0
//  499      }
//  500      else
//  501      {
//  502        aindex=0;
??SampleApp_HandleKeys_3:
        MOV     DPTR,#??aindex
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  503      }
//  504   }
//  505 
//  506   if ( keys & HAL_KEY_SW_2 )
//  507   {
//  508     /* The Flashr Command is sent to Group 1.
//  509      * This key toggles this device in and out of group 1.
//  510      * If this device doesn't belong to group 1, this application
//  511      * will not receive the Flash command sent to group 1.
//  512      */
//  513     
//  514 //    aps_Group_t *grp;
//  515 //    grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
//  516 //    if ( grp )
//  517 //    {
//  518 //      // Remove from the group
//  519 //      aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
//  520 //    }
//  521 //    else
//  522 //    {
//  523 //      // Add to the flash group
//  524 //      aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
//  525 //    }
//  526   }
//  527 }
??SampleApp_HandleKeys_0:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock2

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
??aindex:
        DS 2
        REQUIRE __INIT_XDATA_Z
//  528 
//  529 /*********************************************************************
//  530  * LOCAL FUNCTIONS
//  531  */
//  532 
//  533 /*********************************************************************
//  534  * @fn      SampleApp_MessageMSGCB
//  535  *
//  536  * @brief   Data message processor callback.  This function processes
//  537  *          any incoming data - probably from other devices.  So, based
//  538  *          on cluster ID, perform the intended action.
//  539  *
//  540  * @param   none
//  541  *
//  542  * @return  none
//  543  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  544 void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt ) //½ÓÊÕÊý¾Ý
SampleApp_MessageMSGCB:
          CFI Block cfiBlock3 Using cfiCommon0
          CFI Function SampleApp_MessageMSGCB
        CODE
//  545 {
        FUNCALL SampleApp_MessageMSGCB, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_MessageMSGCB, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_MessageMSGCB, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  546   //uint16 flashTime;
//  547     float avalue=0.0f;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
        MOV     ?V0 + 2,#0x0
        MOV     ?V0 + 3,#0x0
//  548   switch ( pkt->clusterId )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 5,A
        MOV     A,?V0 + 5
        JZ      $+5
        LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
        MOV     A,?V0 + 4
        LCALL   ?UC_SWITCH_SPARSE
`?<Jumptable for SampleApp_MessageMSGCB>_0`:
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        0
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        6
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        1
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_1
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        2
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_2
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        3
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_3
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        50
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_4
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        51
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_5
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        52
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_6
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_MessageMSGCB_0
        CODE
//  549   {
//  550     case SAMPLEAPP_PERIODIC_CLUSTERID:
//  551       HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
??SampleApp_MessageMSGCB_1:
        ; Setup parameters for call to function HalUARTWrite
        MOV     A,R6
        ADD     A,#0x1f
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  552       break;
        LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
//  553 //    case SAMPLEAPP_PERIODIC_CLUSTERID:
//  554 //      { // unsigned char* rssivalue;
//  555 //        //  uint8 rssiE=25;
//  556 //         // int abc=3;
//  557 //         // rssivalue=&rssiE;
//  558 //       // int8 rssivalue;
//  559 //        rssivalue=0xff-pkt->rssi;
//  560 //        unsigned char rssi_buf[3];
//  561 //        rssi_buf[0]='-';
//  562 //        rssi_buf[1]=rssivalue/10+0x30;
//  563 //        rssi_buf[2]=rssivalue%10+0x30;
//  564 //     // HalUARTWrite(0, "Rx:", 3);        //ÌáÊ¾ÐÅÏ¢
//  565 //      HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
//  566 //  
//  567 //                
//  568 //    //  HalUARTWrite(0, "\n", 1); 
//  569 //      HalUARTWrite(0, "RSSI:", 5);  
//  570 //      HalUARTWrite(0,rssi_buf,3);
//  571 ////     HalUARTWrite(0, "\r\n", 2); 
//  572 //////     
//  573 ////     uint8 lqivalue;
//  574 ////     lqivalue=pkt->LinkQuality;
//  575 ////     unsigned char lqi_buf[3];
//  576 ////      lqi_buf[0]=lqivalue/100+0x30;
//  577 ////        lqi_buf[1]=(lqivalue%100)/10+0x30;
//  578 ////        lqi_buf[2]=lqivalue%10+0x30;
//  579 ////      HalUARTWrite(0, "LQI:", 4);  
//  580 ////      HalUARTWrite(0,lqi_buf,3);
//  581 ////     HalUARTWrite(0, "\n", 1);         //»Ø³µ»»ÐÐ
//  582 //      break;
//  583 //      }
//  584     
//  585     
//  586 
//  587     case LZQR_GROUP_CLUSTERID: 
//  588       {
//  589         HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
??SampleApp_MessageMSGCB_3:
        ; Setup parameters for call to function HalUARTWrite
        MOV     A,R6
        ADD     A,#0x1f
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  590         
//  591         
//  592    
//  593         
//  594         
//  595         break;
        LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
//  596       }
//  597     case CALBRATION_N_CLUSTERID:
//  598       {
//  599        HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
??SampleApp_MessageMSGCB_2:
        ; Setup parameters for call to function HalUARTWrite
        MOV     A,R6
        ADD     A,#0x1f
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  600         byte alphaindex;
//  601         alphaindex=*(pkt->cmd.Data);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        MOV     R5,A
//  602         if(alphaindex=='A')
        MOV     A,#0x41
        XRL     A,R5
        JZ      $+5
        LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
//  603          {  
//  604               byte index;
//  605               index=*(pkt->cmd.Data+1);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
//  606               avalue=10.0f*(float)((int)(*(pkt->cmd.Data+3))-48)+(float)((int)(*(pkt->cmd.Data+4))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+6))-48);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 4,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 5,A
        MOV     A,?V0 + 5
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     R0,#?V0 + 4
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_ADD
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x6
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 12,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 13,A
        MOV     A,?V0 + 13
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 14,A
        MOV     ?V0 + 15,A
        MOV     R0,#?V0 + 12
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3dcccccd
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_ADD
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
//  607               if(avalue>0)   
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_GE
        JNC     ??SampleApp_MessageMSGCB_0
//  608               {
//  609                   switch (index)
        MOV     A,#0x31
        XRL     A,R4
        JNZ     ??SampleApp_MessageMSGCB_4
//  610                        case '1':
//  611                           {
//  612                                   AValue[0]=avalue;
        MOV     DPTR,#AValue
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  613                                   break;
//  614                            }
//  615                        case '2':
//  616                           {
//  617                                   AValue[1]=avalue;
??SampleApp_MessageMSGCB_4:
        MOV     DPTR,#AValue + 4
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  618                                   break;
        SJMP    ??SampleApp_MessageMSGCB_0
//  619                            }
//  620                        case '3':
//  621                           {
//  622                                   AValue[2]=avalue;
??SampleApp_MessageMSGCB_5:
        MOV     DPTR,#AValue + 8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  623                                   break;
        SJMP    ??SampleApp_MessageMSGCB_0
//  624                            }
//  625                        case '4':
//  626                           {
//  627                                   AValue[3]=avalue;
??SampleApp_MessageMSGCB_6:
        MOV     DPTR,#AValue + 12
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  628                                   break;
//  629                            }
//  630             
//  631                   break;
//  632               }
//  633            }
//  634       }
//  635 
//  636   }
//  637 }
??SampleApp_MessageMSGCB_0:
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock3
//  638 
//  639 /*********************************************************************
//  640  * @fn      SampleApp_QuadrotorMSGCB
//  641  *
//  642  * @brief   Data message processor callback.  This function processes
//  643  *          any incoming data - probably from other devices.  So, based
//  644  *          on cluster ID, perform the intended action.
//  645  *
//  646  * @param   none
//  647  *
//  648  * @return  none
//  649  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  650 void SampleApp_QuadrotorMSGCB( afIncomingMSGPacket_t *pkt ) //receive data for ed
SampleApp_QuadrotorMSGCB:
          CFI Block cfiBlock4 Using cfiCommon0
          CFI Function SampleApp_QuadrotorMSGCB
        CODE
//  651 {
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_QuadrotorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 2
        MOV     A,#-0x2
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  652   float avalue=0.0f;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
        MOV     ?V0 + 2,#0x0
        MOV     ?V0 + 3,#0x0
//  653   switch ( pkt->clusterId )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 5,A
        MOV     A,?V0 + 5
        JZ      $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
        MOV     A,?V0 + 4
        LCALL   ?UC_SWITCH_SPARSE
`?<Jumptable for SampleApp_QuadrotorMSGCB>_0`:
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        1
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        2
        DATA
        DATA8
        DATA
        DATA8
        DB        3
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_QuadrotorMSGCB_1
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        4
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        1
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_QuadrotorMSGCB_2
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        50
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_QuadrotorMSGCB_3
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        51
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_QuadrotorMSGCB_4
        DATA
        DATA8
        DATA
        DATA8
        DATA
        DATA8
        DB        52
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_QuadrotorMSGCB_5
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_QuadrotorMSGCB_0
        CODE
//  654   {
//  655      
//  656     case SAMPLEAPP_PERIODIC_CLUSTERID:
//  657       { 
//  658         
//  659         byte index;
//  660         index=*(pkt->cmd.Data+1);
??SampleApp_QuadrotorMSGCB_2:
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 4,A
//  661         rssivalue=(0xff-pkt->rssi);
        MOV     A,R6
        ADD     A,#0x18
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#-0x1
        CLR     C
        SUBB    A,R0
        MOV     DPTR,#rssivalue
        MOVX    @DPTR,A
//  662         
//  663         switch (index)
        MOV     A,?V0 + 4
        ADD     A,#-0x31
        JZ      ??SampleApp_QuadrotorMSGCB_6
        DEC     A
        JZ      ??SampleApp_QuadrotorMSGCB_7
        DEC     A
        JZ      ??SampleApp_QuadrotorMSGCB_8
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_9 & 0xFFFF
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  664         {
//  665             case '1':
//  666               {
//  667 //                //average filter
//  668 //                perRssiBuf1[i1]=rssivalue;
//  669 //                
//  670 //                if(i1==31)
//  671 //                {
//  672 //                  i1=0;
//  673 //                  /*average filter*/
//  674 ////                  RssiValue[0]=averagefilter(perRssiBuf1,RSSI_AVG_WINDOW_SIZE);
//  675 //                  /*gausian filter*/
//  676 //                  RssiValue[0]=gaussianfilter(perRssiBuf1,RSSI_AVG_WINDOW_SIZE);
//  677 //
//  678 //                }
//  679 //                i1++;
//  680 //                
//  681                 //moving average filter
//  682                 moving_average(rssivalue, perRssiBuf1, RSSI_AVG_WINDOW_SIZE-1, imof1, &RssiValue[0]);
??SampleApp_QuadrotorMSGCB_6:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 6,#RssiValue & 0xff
        MOV     ?V0 + 7,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 6,#imof1 & 0xff
        MOV     ?V0 + 7,#(imof1 >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf1 & 0xff
        MOV     R3,#(perRssiBuf1 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  683               }
//  684             
//  685                   break;
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  686             case '2':
//  687               {
//  688 //                perRssiBuf2[i2]=rssivalue;
//  689 //                
//  690 //                if(i2==31)
//  691 //                {
//  692 //                  i2=0;
//  693 //                  /*average filter*/
//  694 ////                  RssiValue[1]=averagefilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
//  695 //                  /*gausian filter*/
//  696 //                  RssiValue[1]=gaussianfilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
//  697 //                }
//  698 //                i2++;
//  699                 //moving average filter
//  700                 moving_average(rssivalue, perRssiBuf2, RSSI_AVG_WINDOW_SIZE-1, imof2, &RssiValue[1]);
??SampleApp_QuadrotorMSGCB_7:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 6,#(RssiValue + 4) & 0xff
        MOV     ?V0 + 7,#((RssiValue + 4) >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 6,#imof2 & 0xff
        MOV     ?V0 + 7,#(imof2 >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf2 & 0xff
        MOV     R3,#(perRssiBuf2 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  701               }
//  702                   break;
        SJMP    ??SampleApp_QuadrotorMSGCB_10
//  703             case '3':
//  704               {
//  705 //                perRssiBuf3[i3]=rssivalue;
//  706 //                
//  707 //                if(i3==31)
//  708 //                {
//  709 //                  i3=0;
//  710 //                   /*average filter*/
//  711 ////                  RssiValue[2]=averagefilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
//  712 //                  /*gausian filter*/
//  713 //                  RssiValue[2]=gaussianfilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
//  714 //                }
//  715 //                i3++;
//  716                 //moving average filter
//  717                 moving_average(rssivalue, perRssiBuf3, RSSI_AVG_WINDOW_SIZE-1, imof3, &RssiValue[2]);
??SampleApp_QuadrotorMSGCB_8:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 6,#(RssiValue + 8) & 0xff
        MOV     ?V0 + 7,#((RssiValue + 8) >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 6,#imof3 & 0xff
        MOV     ?V0 + 7,#(imof3 >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf3 & 0xff
        MOV     R3,#(perRssiBuf3 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  718               }
//  719                   break;
        SJMP    ??SampleApp_QuadrotorMSGCB_10
//  720             case '4':
//  721               {
//  722 //                perRssiBuf4[i4]=rssivalue;
//  723 //                
//  724 //                if(i4==31)
//  725 //                {
//  726 //                  i4=0;
//  727 //                   /*average filter*/
//  728 ////                  RssiValue[3]=averagefilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
//  729 //                  /*gausian filter*/
//  730 //                  RssiValue[3]=gaussianfilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
//  731 //                }
//  732 //                i4++;
//  733                 //moving average filter
//  734                  moving_average(rssivalue, perRssiBuf4, RSSI_AVG_WINDOW_SIZE-1, imof4, &RssiValue[3]);
??SampleApp_QuadrotorMSGCB_9:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 6,#(RssiValue + 12) & 0xff
        MOV     ?V0 + 7,#((RssiValue + 12) >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 6,#imof4 & 0xff
        MOV     ?V0 + 7,#(imof4 >> 8) & 0xff
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf4 & 0xff
        MOV     R3,#(perRssiBuf4 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  735               }
//  736                   break;    
//  737             default:
//  738             
//  739                    break;
//  740          }
//  741         break;
??SampleApp_QuadrotorMSGCB_10:
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  742       }
//  743 
//  744     case LZQR_GROUP_CLUSTERID: // position of other quadrotors
//  745           {
//  746             //HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
//  747             
//  748        
//  749             
//  750             
//  751            // break;
//  752           }
//  753     
//  754 
//  755      case CALBRATION_N_CLUSTERID:
//  756       {
//  757         HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
??SampleApp_QuadrotorMSGCB_1:
        ; Setup parameters for call to function HalUARTWrite
        MOV     A,R6
        ADD     A,#0x1f
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  758         byte alphaindex;
//  759         alphaindex=*(pkt->cmd.Data);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
//  760         if(alphaindex=='A')
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        XRL     A,#0x41
        JZ      $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_11 & 0xFFFF
//  761          {  
//  762               byte index;
//  763               index=*(pkt->cmd.Data+1);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
//  764               avalue=10.0f*(float)((int)(*(pkt->cmd.Data+3))-48)+(float)((int)(*(pkt->cmd.Data+4))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+6))-48);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 4,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 5,A
        MOV     A,?V0 + 5
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     R0,#?V0 + 4
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_ADD
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x6
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 12,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 13,A
        MOV     A,?V0 + 13
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 14,A
        MOV     ?V0 + 15,A
        MOV     R0,#?V0 + 12
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3dcccccd
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_ADD
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
//  765               if(avalue>0)   
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_GE
        JC      $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  766               {
//  767                   switch (index)
        MOV     A,#0x31
        XRL     A,R4
        JNZ     ??SampleApp_QuadrotorMSGCB_3
//  768                        case '1':
//  769                           {
//  770                                   AValue[0]=avalue;
        MOV     DPTR,#AValue
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  771                                   break;
//  772                            }
//  773                        case '2':
//  774                           {
//  775                                   AValue[1]=avalue;
??SampleApp_QuadrotorMSGCB_3:
        MOV     DPTR,#AValue + 4
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  776                                   break;
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  777                            }
//  778                        case '3':
//  779                           {
//  780                                   AValue[2]=avalue;
??SampleApp_QuadrotorMSGCB_4:
        MOV     DPTR,#AValue + 8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  781                                   break;
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  782                            }
//  783                        case '4':
//  784                           {
//  785                                   AValue[3]=avalue;
??SampleApp_QuadrotorMSGCB_5:
        MOV     DPTR,#AValue + 12
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  786                                   break;
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  787                            }
//  788             
//  789                   break;
//  790               }
//  791          } 
//  792                else if(alphaindex=='N')
??SampleApp_QuadrotorMSGCB_11:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        XRL     A,#0x4e
        JZ      $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  793              {
//  794                       byte index;
//  795                       index=*(pkt->cmd.Data+1);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  796 
//  797                       float nvalue;
//  798               //        float tempn=0.0f;
//  799                       
//  800                       if(((int)(*(pkt->cmd.Data+3))-48)>=0&&((int)(*(pkt->cmd.Data+3))-48)<=9)
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     R1,A
        CLR     C
        MOV     A,R0
        SUBB    A,#0x0
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     R1,A
        CLR     C
        MOV     A,R0
        SUBB    A,#0xa
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JC      $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  801                       {  nvalue=(float)((int)(*(pkt->cmd.Data+3))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+5))-48)+0.01f*(float)((int)(*(pkt->cmd.Data+6))-48);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        PUSH    ?V0 + 8
          CFI CFA_SP SP+-1
        PUSH    ?V0 + 9
          CFI CFA_SP SP+-2
        PUSH    ?V0 + 10
          CFI CFA_SP SP+-3
        PUSH    ?V0 + 11
          CFI CFA_SP SP+-4
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 12,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 13,A
        MOV     A,?V0 + 13
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 14,A
        MOV     ?V0 + 15,A
        MOV     R0,#?V0 + 12
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3dcccccd
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        POP     ?V0 + 11
          CFI CFA_SP SP+-3
        POP     ?V0 + 10
          CFI CFA_SP SP+-2
        POP     ?V0 + 9
          CFI CFA_SP SP+-1
        POP     ?V0 + 8
          CFI CFA_SP SP+0
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_ADD
        PUSH    ?V0 + 8
          CFI CFA_SP SP+-1
        PUSH    ?V0 + 9
          CFI CFA_SP SP+-2
        PUSH    ?V0 + 10
          CFI CFA_SP SP+-3
        PUSH    ?V0 + 11
          CFI CFA_SP SP+-4
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x6
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 12,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 13,A
        MOV     A,?V0 + 13
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 14,A
        MOV     ?V0 + 15,A
        MOV     R0,#?V0 + 12
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3c23d70a
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        POP     ?V0 + 11
          CFI CFA_SP SP+-3
        POP     ?V0 + 10
          CFI CFA_SP SP+-2
        POP     ?V0 + 9
          CFI CFA_SP SP+-1
        POP     ?V0 + 8
          CFI CFA_SP SP+0
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_ADD
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
        MOV     ?V0 + 6,?V0 + 10
        MOV     ?V0 + 7,?V0 + 11
//  802                           
//  803                            switch (index)
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,#-0x31
        JZ      ??SampleApp_QuadrotorMSGCB_12
        DEC     A
        JZ      ??SampleApp_QuadrotorMSGCB_13
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_14 & 0xFFFF
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_QuadrotorMSGCB_15 & 0xFFFF
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  804                            {  
//  805                                 case '1':
//  806                                  {
//  807 //                                   pernBuf1[nindex1]=nvalue;
//  808 //                                   nindex1++;
//  809 //                                   if(nindex1==7)
//  810 //                                   {
//  811 //                                     nindex1=0;
//  812 //                                     for (int i=0; i<8; i++)
//  813 //                                     {
//  814 //                                        tempn+=pernBuf1[i];
//  815 //                                     }
//  816 //                                      nValue[0]=tempn;
//  817 //                                   }
//  818                                    
//  819                                      moving_average_f(nvalue, pernBuf1, 7, nindex1, &nValue[0]);
??SampleApp_QuadrotorMSGCB_12:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#nValue & 0xff
        MOV     ?V0 + 9,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,#nindex1 & 0xff
        MOV     ?V0 + 9,#(nindex1 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#pernBuf1 & 0xff
        MOV     ?V0 + 9,#(pernBuf1 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  820                                    
//  821                                   
//  822                                    break;
        LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
//  823                                  }
//  824                                 case '2':
//  825                                  {
//  826 //                                   pernBuf2[nindex2]=nvalue;
//  827 //                                   nindex2++;
//  828 //                                   if(nindex2==7)
//  829 //                                   {
//  830 //                                     nindex2=0;
//  831 //                                     for (int i=0; i<8; i++)
//  832 //                                     {
//  833 //                                        tempn+=pernBuf2[i];
//  834 //                                     }
//  835 //                                      nValue[1]=tempn;
//  836 //                                   }
//  837                                       moving_average_f(nvalue, pernBuf2, 7, nindex2, &nValue[1]);
??SampleApp_QuadrotorMSGCB_13:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#(nValue + 4) & 0xff
        MOV     ?V0 + 9,#((nValue + 4) >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,#nindex2 & 0xff
        MOV     ?V0 + 9,#(nindex2 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#pernBuf2 & 0xff
        MOV     ?V0 + 9,#(pernBuf2 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  838                                    break;
        SJMP    ??SampleApp_QuadrotorMSGCB_0
//  839                                  }
//  840                                  case '3':
//  841                                  {
//  842 //                                   pernBuf3[nindex3]=nvalue;
//  843 //                                   nindex3++;
//  844 //                                   if(nindex3==7)
//  845 //                                   {
//  846 //                                     nindex3=0;
//  847 //                                     for (int i=0; i<8; i++)
//  848 //                                     {
//  849 //                                        tempn+=pernBuf3[i];
//  850 //                                     }
//  851 //                                      nValue[2]=tempn;
//  852 //                                   }
//  853                                    moving_average_f(nvalue, pernBuf3, 7, nindex3, &nValue[2]);
??SampleApp_QuadrotorMSGCB_14:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#(nValue + 8) & 0xff
        MOV     ?V0 + 9,#((nValue + 8) >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,#nindex3 & 0xff
        MOV     ?V0 + 9,#(nindex3 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#pernBuf3 & 0xff
        MOV     ?V0 + 9,#(pernBuf3 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  854                                    break;
        SJMP    ??SampleApp_QuadrotorMSGCB_0
//  855                                  }
//  856                                  case '4':
//  857                                  {
//  858 //                                   pernBuf4[nindex4]=nvalue;
//  859 //                                   nindex4++;
//  860 //                                   if(nindex4==7)
//  861 //                                   {
//  862 //                                     nindex4=0;
//  863 //                                     for (int i=0; i<8; i++)
//  864 //                                     {
//  865 //                                        tempn+=pernBuf4[i];
//  866 //                                     }
//  867 //                                      nValue[3]=tempn;
//  868 //                                   }
//  869                                     moving_average_f(nvalue, pernBuf4, 7, nindex4, &nValue[3]);
??SampleApp_QuadrotorMSGCB_15:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#(nValue + 12) & 0xff
        MOV     ?V0 + 9,#((nValue + 12) >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,#nindex4 & 0xff
        MOV     ?V0 + 9,#(nindex4 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#pernBuf4 & 0xff
        MOV     ?V0 + 9,#(pernBuf4 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 26)
//  870                                    break;
//  871                                          }
//  872                                 break;
//  873                             }
//  874                           }
//  875                      }
//  876          }
//  877       
//  878  
//  879  
//  880   }
//  881 
//  882 }
??SampleApp_QuadrotorMSGCB_0:
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock4
//  883 
//  884 /*********************************************************************
//  885  * @fn      SampleApp_Tester_calibrationMSGCB
//  886  *
//  887  * @brief   Data message processor callback.  This function processes
//  888  *          any incoming data - probably from other devices.  So, based
//  889  *          on cluster ID, perform the intended action.
//  890  *
//  891  * @param   none
//  892  *
//  893  * @return  none
//  894  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  895 void SampleApp_Tester_calibrationMSGCB( afIncomingMSGPacket_t *pkt ) //receive data for ed
SampleApp_Tester_calibrationMSGCB:
          CFI Block cfiBlock5 Using cfiCommon0
          CFI Function SampleApp_Tester_calibrationMSGCB
        CODE
//  896 {
        FUNCALL SampleApp_Tester_calibrationMSGCB, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Tester_calibrationMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Tester_calibrationMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Tester_calibrationMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Tester_calibrationMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  897 
//  898   switch ( pkt->clusterId )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??SampleApp_Tester_calibrationMSGCB_0
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??SampleApp_Tester_calibrationMSGCB_0:
        JZ      $+5
        LJMP    ??SampleApp_Tester_calibrationMSGCB_1 & 0xFFFF
//  899   {
//  900     case SAMPLEAPP_PERIODIC_CLUSTERID:
//  901       { 
//  902         
//  903        //  int8 rssivalue;
//  904         HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
        ; Setup parameters for call to function HalUARTWrite
        MOV     A,R6
        ADD     A,#0x1f
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
//  905         byte index;
//  906         index=*(pkt->cmd.Data+1);
        MOV     A,R6
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 0,A
//  907         rssivalue=(0xff-pkt->rssi);
        MOV     A,R6
        ADD     A,#0x18
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#-0x1
        CLR     C
        SUBB    A,R0
        MOV     DPTR,#rssivalue
        MOVX    @DPTR,A
//  908         
//  909         switch (index)
        MOV     A,?V0 + 0
        ADD     A,#-0x31
        JZ      ??SampleApp_Tester_calibrationMSGCB_2
        DEC     A
        JZ      ??SampleApp_Tester_calibrationMSGCB_3
        DEC     A
        JZ      ??SampleApp_Tester_calibrationMSGCB_4
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_Tester_calibrationMSGCB_5 & 0xFFFF
        LJMP    ??SampleApp_Tester_calibrationMSGCB_1 & 0xFFFF
//  910         {
//  911             case '1':
//  912               {
//  913 //                perRssiBuf1[i1]=rssivalue;
//  914 //                
//  915 //                if(i1==9)
//  916 //                {
//  917 //                  i1=0;
//  918 //                  /*average filter*/
//  919 ////                  RssiValue[0]=averagefilter(perRssiBuf1,10);
//  920 //                  /*gausian filter*/
//  921 //                    RssiValue[0]=gaussianfilter(perRssiBuf1,10);
//  922 //                }
//  923 //                i1++;
//  924                 moving_average(rssivalue, perRssiBuf1, 11, imof1, &RssiValue[0]);
??SampleApp_Tester_calibrationMSGCB_2:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 2,#RssiValue & 0xff
        MOV     ?V0 + 3,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     ?V0 + 2,#imof1 & 0xff
        MOV     ?V0 + 3,#(imof1 >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 16)
        MOV     R4,#0xb
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf1 & 0xff
        MOV     R3,#(perRssiBuf1 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
//  925               }
//  926             
//  927                   break;
        LJMP    ??SampleApp_Tester_calibrationMSGCB_1 & 0xFFFF
//  928             case '2':
//  929               {
//  930 //                perRssiBuf2[i2]=rssivalue;
//  931 //                
//  932 //                if(i2==9)
//  933 //                {
//  934 //                  i2=0;
//  935 //                  /*average filter*/
//  936 ////                  RssiValue[1]=averagefilter(perRssiBuf2,10);
//  937 //                  /*gausian filter*/
//  938 //                  RssiValue[1]=gaussianfilter(perRssiBuf2,10);
//  939 //                }
//  940 //                i2++;
//  941                  moving_average(rssivalue, perRssiBuf2, 11, imof2, &RssiValue[1]);
??SampleApp_Tester_calibrationMSGCB_3:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 2,#(RssiValue + 4) & 0xff
        MOV     ?V0 + 3,#((RssiValue + 4) >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     ?V0 + 2,#imof2 & 0xff
        MOV     ?V0 + 3,#(imof2 >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 16)
        MOV     R4,#0xb
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf2 & 0xff
        MOV     R3,#(perRssiBuf2 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
//  942               }
//  943                   break;
        SJMP    ??SampleApp_Tester_calibrationMSGCB_1
//  944             case '3':
//  945               {
//  946 //                perRssiBuf3[i3]=rssivalue;
//  947 //                
//  948 //                if(i3==9)
//  949 //                {
//  950 //                  i3=0;
//  951 //                   /*average filter*/
//  952 ////                  RssiValue[2]=averagefilter(perRssiBuf3,10);
//  953 //                  /*gausian filter*/
//  954 //                  RssiValue[2]=gaussianfilter(perRssiBuf3,10);
//  955 //                }
//  956 //                i3++;
//  957                  moving_average(rssivalue, perRssiBuf3, 11, imof3, &RssiValue[2]);
??SampleApp_Tester_calibrationMSGCB_4:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 2,#(RssiValue + 8) & 0xff
        MOV     ?V0 + 3,#((RssiValue + 8) >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     ?V0 + 2,#imof3 & 0xff
        MOV     ?V0 + 3,#(imof3 >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 16)
        MOV     R4,#0xb
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf3 & 0xff
        MOV     R3,#(perRssiBuf3 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
//  958               }
//  959                   break;
        SJMP    ??SampleApp_Tester_calibrationMSGCB_1
//  960             case '4':
//  961               {
//  962 //                perRssiBuf4[i4]=rssivalue;
//  963 //                
//  964 //                if(i4==9)
//  965 //                {
//  966 //                  i4=0;
//  967 //                   /*average filter*/
//  968 ////                  RssiValue[3]=averagefilter(perRssiBuf4,10);
//  969 //                  /*gausian filter*/
//  970 //                    RssiValue[3]=gaussianfilter(perRssiBuf4,10);
//  971 //                }
//  972 //                i4++;
//  973                  moving_average(rssivalue, perRssiBuf4, 11, imof4, &RssiValue[3]);
??SampleApp_Tester_calibrationMSGCB_5:
        ; Setup parameters for call to function moving_average
        MOV     ?V0 + 2,#(RssiValue + 12) & 0xff
        MOV     ?V0 + 3,#((RssiValue + 12) >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     ?V0 + 2,#imof4 & 0xff
        MOV     ?V0 + 3,#(imof4 >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 16)
        MOV     R4,#0xb
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf4 & 0xff
        MOV     R3,#(perRssiBuf4 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
//  974               }
//  975                   break;    
//  976             default:
//  977             
//  978                    break;
//  979          }
//  980         break;
//  981       }
//  982 
//  983      
//  984    
//  985   }
//  986 
//  987 }
??SampleApp_Tester_calibrationMSGCB_1:
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock5
//  988 
//  989 
//  990 /*********************************************************************
//  991  * @fn      SampleApp_AnchorMSGCB
//  992  *
//  993  * @brief   Data message processor callback.  This function processes
//  994  *          any incoming data - probably from other devices.  So, based
//  995  *          on cluster ID, perform the intended action.
//  996  *
//  997  * @param   none
//  998  *
//  999  * @return  none
// 1000  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1001 void SampleApp_AnchorMSGCB( afIncomingMSGPacket_t *pkt ) //receive data for ed
SampleApp_AnchorMSGCB:
          CFI Block cfiBlock6 Using cfiCommon0
          CFI Function SampleApp_AnchorMSGCB
        CODE
// 1002 {
        FUNCALL SampleApp_AnchorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, calibrationN
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 40, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 40, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, SampleApp_Router_calibrationNMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, calibrationN
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 40, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 40, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, SampleApp_Router_calibrationNMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, calibrationN
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 40, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 40, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, SampleApp_Router_calibrationNMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, calibrationN
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 40, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 40, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, SampleApp_Router_calibrationNMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, HalUARTWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_AnchorMSGCB, moving_average_f
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
// 1003   float avalue=0.0f;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
        MOV     ?V0 + 2,#0x0
        MOV     ?V0 + 3,#0x0
// 1004   int switchindex;
// 1005   switch ( pkt->clusterId )
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?US_SWITCH_SPARSE
`?<Jumptable for SampleApp_AnchorMSGCB>_0`:
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        5
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        1
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_AnchorMSGCB_0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        2
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_AnchorMSGCB_1
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        50
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_AnchorMSGCB_2
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        51
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_AnchorMSGCB_3
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        52
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_AnchorMSGCB_4
        DATA
        DATA16
        DATA
        DATA16
        DW        ??SampleApp_AnchorMSGCB_5
        CODE
// 1006   {
// 1007     case SAMPLEAPP_PERIODIC_CLUSTERID:
// 1008       { 
// 1009         
// 1010         
// 1011         //tempParameter.A[0]=AValue[0];
// 1012         
// 1013         byte index;
// 1014         index=*(pkt->cmd.Data+1);
??SampleApp_AnchorMSGCB_0:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 12,A
// 1015         rssivalue=(0xff-pkt->rssi);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x18
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#-0x1
        CLR     C
        SUBB    A,R0
        MOV     DPTR,#rssivalue
        MOVX    @DPTR,A
// 1016         
// 1017         switch (index)
        MOV     A,?V0 + 12
        ADD     A,#-0x31
        JZ      ??SampleApp_AnchorMSGCB_6
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_AnchorMSGCB_7 & 0xFFFF
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_AnchorMSGCB_8 & 0xFFFF
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_AnchorMSGCB_9 & 0xFFFF
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1018         {
// 1019             case '1':
// 1020               {
// 1021 //                switchindex=1;
// 1022 //                perRssiBuf1[i1]=rssivalue;
// 1023 //                
// 1024 //                if(i1==(RSSI_AVG_WINDOW_SIZE-1))
// 1025 //                {
// 1026 //                  i1=0;
// 1027 //   
// 1028 //                  /*average filter*/
// 1029 ////                  RssiValue[1]=averagefilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
// 1030 //                  /*gausian filter*/
// 1031 //                  RssiValue[switchindex-1]=gaussianfilter(perRssiBuf1,RSSI_AVG_WINDOW_SIZE);
// 1032 //                 if( (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,
// 1033 //                                                         AnchorX,AnchorY,AnchorZ,AValue))<10)
// 1034 //                 {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
// 1035 //                  
// 1036 //                }
// 1037 //                i1++;
// 1038                 
// 1039                 //moving average filter
// 1040                 switchindex=1;
??SampleApp_AnchorMSGCB_6:
        MOV     R6,#0x1
        MOV     R7,#0x0
// 1041                 moving_average(rssivalue, perRssiBuf1, RSSI_AVG_WINDOW_SIZE-1, imof1, &RssiValue[switchindex-1]);
        ; Setup parameters for call to function moving_average
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(RssiValue + 252) & 0xff
        ADD     A,R0
        MOV     ?V0 + 4,A
        MOV     A,#((RssiValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#imof1 & 0xff
        MOV     ?V0 + 5,#(imof1 >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf1 & 0xff
        MOV     R3,#(perRssiBuf1 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1042                 if( (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,
// 1043                                                     AnchorX,AnchorY,AnchorZ,AValue))<10)
        ; Setup parameters for call to function calibrationN
        MOV     ?V0 + 4,#AValue & 0xff
        MOV     ?V0 + 5,#(AValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#AnchorZ & 0xff
        MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 4,#AnchorY & 0xff
        MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 4,#AnchorX & 0xff
        MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     ?V0 + 4,#nValue & 0xff
        MOV     ?V0 + 5,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     ?V0 + 4,#RssiValue & 0xff
        MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 40)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??calibrationN?relay
        MOV     A,#0xc
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_TO_X
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_LT
        JNC     ??SampleApp_AnchorMSGCB_10
// 1044                    {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
        ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??SampleApp_Router_calibrationNMessage?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1045               }
// 1046             
// 1047                   break;
??SampleApp_AnchorMSGCB_10:
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1048             case '2':
// 1049               {
// 1050 //                switchindex=2;
// 1051 //                perRssiBuf2[i2]=rssivalue;
// 1052 //                
// 1053 //                if(i2==31)
// 1054 //                {
// 1055 //                  i2=0;
// 1056 //
// 1057 //                  /*average filter*/
// 1058 //  //                RssiValue[1]=averagefilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
// 1059 //                  /*gaussian filter*/
// 1060 //                   RssiValue[switchindex-1]=gaussianfilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
// 1061 //                   
// 1062 //                  if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
// 1063 //                  { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
// 1064 //                }
// 1065 //                i2++;
// 1066                 //moving average filter
// 1067                 switchindex=2;
??SampleApp_AnchorMSGCB_7:
        MOV     R6,#0x2
        MOV     R7,#0x0
// 1068                 moving_average(rssivalue, perRssiBuf2, RSSI_AVG_WINDOW_SIZE-1, imof2, &RssiValue[switchindex-1]);
        ; Setup parameters for call to function moving_average
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(RssiValue + 252) & 0xff
        ADD     A,R0
        MOV     ?V0 + 4,A
        MOV     A,#((RssiValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#imof2 & 0xff
        MOV     ?V0 + 5,#(imof2 >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf2 & 0xff
        MOV     R3,#(perRssiBuf2 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1069                 if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,
// 1070                                                          nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
        ; Setup parameters for call to function calibrationN
        MOV     ?V0 + 4,#AValue & 0xff
        MOV     ?V0 + 5,#(AValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#AnchorZ & 0xff
        MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 4,#AnchorY & 0xff
        MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 4,#AnchorX & 0xff
        MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     ?V0 + 4,#nValue & 0xff
        MOV     ?V0 + 5,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     ?V0 + 4,#RssiValue & 0xff
        MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 40)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??calibrationN?relay
        MOV     A,#0xc
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_TO_X
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_LT
        JNC     ??SampleApp_AnchorMSGCB_11
// 1071                { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
        ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??SampleApp_Router_calibrationNMessage?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1072               }
// 1073                   break;
??SampleApp_AnchorMSGCB_11:
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1074             case '3':
// 1075               {
// 1076 //                switchindex=3;
// 1077 //                perRssiBuf3[i3]=rssivalue;
// 1078 //                
// 1079 //                if(i3==31)
// 1080 //                {
// 1081 //                  i3=0;              
// 1082 //                  /*average filter*/
// 1083 ////                  RssiValue[2]=averagefilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
// 1084 //                  /*gaussian filter*/
// 1085 //                   RssiValue[switchindex-1]=gaussianfilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
// 1086 //                   if((nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
// 1087 //                   {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
// 1088 //                }
// 1089 //                i3++;
// 1090                  //moving average filter
// 1091                 switchindex=3;
??SampleApp_AnchorMSGCB_8:
        MOV     R6,#0x3
        MOV     R7,#0x0
// 1092                 moving_average(rssivalue, perRssiBuf3, RSSI_AVG_WINDOW_SIZE-1, imof3, &RssiValue[switchindex-1]);
        ; Setup parameters for call to function moving_average
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(RssiValue + 252) & 0xff
        ADD     A,R0
        MOV     ?V0 + 4,A
        MOV     A,#((RssiValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#imof3 & 0xff
        MOV     ?V0 + 5,#(imof3 >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf3 & 0xff
        MOV     R3,#(perRssiBuf3 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1093                 if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,
// 1094                                                          nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
        ; Setup parameters for call to function calibrationN
        MOV     ?V0 + 4,#AValue & 0xff
        MOV     ?V0 + 5,#(AValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#AnchorZ & 0xff
        MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 4,#AnchorY & 0xff
        MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 4,#AnchorX & 0xff
        MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     ?V0 + 4,#nValue & 0xff
        MOV     ?V0 + 5,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     ?V0 + 4,#RssiValue & 0xff
        MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 40)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??calibrationN?relay
        MOV     A,#0xc
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_TO_X
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_LT
        JNC     ??SampleApp_AnchorMSGCB_12
// 1095                { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
        ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??SampleApp_Router_calibrationNMessage?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1096               }
// 1097                   break;
??SampleApp_AnchorMSGCB_12:
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1098             case '4':
// 1099               {
// 1100 //                switchindex=4;
// 1101 //                perRssiBuf4[i4]=rssivalue;
// 1102 //                
// 1103 //                if(i4==31)
// 1104 //                {
// 1105 //                  i4=0;
// 1106 //
// 1107 //                     /*average filter*/
// 1108 ////                  RssiValue[3]=averagefilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
// 1109 //                  /*gaussian filter*/
// 1110 //                   RssiValue[switchindex-1]=gaussianfilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
// 1111 //                   
// 1112 //                    if((nValue[switchindex-1]=calibrationN(DeviceID,4,RssiValue,nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
// 1113 //                    {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
// 1114 //                }
// 1115 //                i4++;
// 1116                  //moving average filter
// 1117                 switchindex=4;
??SampleApp_AnchorMSGCB_9:
        MOV     R6,#0x4
        MOV     R7,#0x0
// 1118                 moving_average(rssivalue, perRssiBuf4, RSSI_AVG_WINDOW_SIZE-1, imof4, &RssiValue[switchindex-1]);
        ; Setup parameters for call to function moving_average
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(RssiValue + 252) & 0xff
        ADD     A,R0
        MOV     ?V0 + 4,A
        MOV     A,#((RssiValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#imof4 & 0xff
        MOV     ?V0 + 5,#(imof4 >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     R4,#0x1f
        MOV     R5,#0x0
        MOV     R2,#perRssiBuf4 & 0xff
        MOV     R3,#(perRssiBuf4 >> 8) & 0xff
        MOV     DPTR,#rssivalue
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??moving_average?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1119                 if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,
// 1120                                                          nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
        ; Setup parameters for call to function calibrationN
        MOV     ?V0 + 4,#AValue & 0xff
        MOV     ?V0 + 5,#(AValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,#AnchorZ & 0xff
        MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 4,#AnchorY & 0xff
        MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 4,#AnchorX & 0xff
        MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     ?V0 + 4,#nValue & 0xff
        MOV     ?V0 + 5,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     ?V0 + 4,#RssiValue & 0xff
        MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 40)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     DPTR,#DeviceID
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??calibrationN?relay
        MOV     A,#0xc
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_TO_X
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_LT
        JNC     ??SampleApp_AnchorMSGCB_13
// 1121                { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
        ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(nValue + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((nValue - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??SampleApp_Router_calibrationNMessage?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1122               }
// 1123                   break;    
// 1124             default:
// 1125             
// 1126                    break;
// 1127          }
// 1128         break;
??SampleApp_AnchorMSGCB_13:
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1129       }
// 1130 
// 1131            case CALBRATION_N_CLUSTERID:
// 1132       {
// 1133         HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //Êä³ö½ÓÊÕµ½µÄÊý¾Ý
??SampleApp_AnchorMSGCB_1:
        ; Setup parameters for call to function HalUARTWrite
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x1f
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x0
        LCALL   ??HalUARTWrite?relay
// 1134         byte alphaindex;
// 1135         alphaindex=*(pkt->cmd.Data);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1136         if(alphaindex=='A')
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        XRL     A,#0x41
        JZ      $+5
        LJMP    ??SampleApp_AnchorMSGCB_14 & 0xFFFF
// 1137          {  
// 1138               byte index;
// 1139               index=*(pkt->cmd.Data+1);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
// 1140               
// 1141               avalue=10.0f*(float)((int)(*(pkt->cmd.Data+3))-48)+(float)((int)(*(pkt->cmd.Data+4))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+6))-48);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 4,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 5,A
        MOV     A,?V0 + 5
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     R0,#?V0 + 4
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_ADD
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x6
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 12,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 13,A
        MOV     A,?V0 + 13
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 14,A
        MOV     ?V0 + 15,A
        MOV     R0,#?V0 + 12
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3dcccccd
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_ADD
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
// 1142               if(avalue>0)   
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?FLT_GE
        JC      $+5
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1143               {
// 1144                   switch (index)
        MOV     A,#0x31
        XRL     A,R4
        JNZ     ??SampleApp_AnchorMSGCB_2
// 1145                        case '1':
// 1146                           {
// 1147                                   AValue[0]=avalue;
        MOV     DPTR,#AValue
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1148                                   break;
// 1149                            }
// 1150                        case '2':
// 1151                           {
// 1152                                   AValue[1]=avalue;
??SampleApp_AnchorMSGCB_2:
        MOV     DPTR,#AValue + 4
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1153                                   break;
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1154                            }
// 1155                        case '3':
// 1156                           {
// 1157                                   AValue[2]=avalue;
??SampleApp_AnchorMSGCB_3:
        MOV     DPTR,#AValue + 8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1158                                   break;
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1159                            }
// 1160                        case '4':
// 1161                           {
// 1162                                   AValue[3]=avalue;
??SampleApp_AnchorMSGCB_4:
        MOV     DPTR,#AValue + 12
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1163                                   break;
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1164                            }
// 1165             
// 1166                   break;
// 1167               }
// 1168          } 
// 1169                else if(alphaindex=='N')
??SampleApp_AnchorMSGCB_14:
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        XRL     A,#0x4e
        JZ      $+5
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1170              {
// 1171                       byte index;
// 1172                       index=*(pkt->cmd.Data+1);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1173                       float nvalue;
// 1174 //                      float tempn=0.0f;
// 1175                       
// 1176                       if(((int)(*(pkt->cmd.Data+3))-48)>=0&&((int)(*(pkt->cmd.Data+3))-48)<=9)
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     R1,A
        CLR     C
        MOV     A,R0
        SUBB    A,#0x0
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     $+5
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     R1,A
        CLR     C
        MOV     A,R0
        SUBB    A,#0xa
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JC      $+5
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1177                       {  
// 1178                         
// 1179                         nvalue=(float)((int)(*(pkt->cmd.Data+3))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+5))-48)+0.01f*(float)((int)(*(pkt->cmd.Data+6))-48);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        PUSH    ?V0 + 8
          CFI CFA_SP SP+-1
        PUSH    ?V0 + 9
          CFI CFA_SP SP+-2
        PUSH    ?V0 + 10
          CFI CFA_SP SP+-3
        PUSH    ?V0 + 11
          CFI CFA_SP SP+-4
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3dcccccd
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_MUL
        POP     ?V0 + 15
          CFI CFA_SP SP+-3
        POP     ?V0 + 14
          CFI CFA_SP SP+-2
        POP     ?V0 + 13
          CFI CFA_SP SP+-1
        POP     ?V0 + 12
          CFI CFA_SP SP+0
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_ADD
        PUSH    ?V0 + 12
          CFI CFA_SP SP+-1
        PUSH    ?V0 + 13
          CFI CFA_SP SP+-2
        PUSH    ?V0 + 14
          CFI CFA_SP SP+-3
        PUSH    ?V0 + 15
          CFI CFA_SP SP+-4
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x21
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0x6
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ADD     A,#-0x30
        MOV     ?V0 + 8,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     ?V0 + 9,A
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        MOV     DPTR,#__Constant_3c23d70a
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_MUL
        POP     ?V0 + 15
          CFI CFA_SP SP+-3
        POP     ?V0 + 14
          CFI CFA_SP SP+-2
        POP     ?V0 + 13
          CFI CFA_SP SP+-1
        POP     ?V0 + 12
          CFI CFA_SP SP+0
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_ADD
        MOV     ?V0 + 4,?V0 + 12
        MOV     ?V0 + 5,?V0 + 13
        MOV     ?V0 + 6,?V0 + 14
        MOV     ?V0 + 7,?V0 + 15
// 1180                           
// 1181                            switch (index)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,#-0x31
        JZ      ??SampleApp_AnchorMSGCB_15
        DEC     A
        JZ      ??SampleApp_AnchorMSGCB_16
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_AnchorMSGCB_17 & 0xFFFF
        DEC     A
        JNZ     $+5
        LJMP    ??SampleApp_AnchorMSGCB_18 & 0xFFFF
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1182                            {  
// 1183                                 case '1':
// 1184                                  {
// 1185 //                                   pernBuf1[nindex1]=nvalue;
// 1186 //                                   nindex1++;
// 1187 //                                   if(nindex1==7)
// 1188 //                                   {
// 1189 //                                     nindex1=0;
// 1190 //                                     for (int i=0; i<8; i++)
// 1191 //                                     {
// 1192 //                                        tempn+=pernBuf1[i];
// 1193 //                                     }
// 1194 //                                      nValue[0]=tempn;
// 1195 //                                   }
// 1196                                      moving_average_f(nvalue, pernBuf1, 7, nindex1, &nValue[0]);
??SampleApp_AnchorMSGCB_15:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#nValue & 0xff
        MOV     ?V0 + 9,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#nindex1 & 0xff
        MOV     ?V0 + 9,#(nindex1 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 8,#pernBuf1 & 0xff
        MOV     ?V0 + 9,#(pernBuf1 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1197                                    
// 1198                                   
// 1199                                    break;
        LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
// 1200                                  }
// 1201                                 case '2':
// 1202                                  {
// 1203 //                                   pernBuf2[nindex2]=nvalue;
// 1204 //                                   nindex2++;
// 1205 //                                   if(nindex2==7)
// 1206 //                                   {
// 1207 //                                     nindex1=0;
// 1208 //                                     for (int i=0; i<8; i++)
// 1209 //                                     {
// 1210 //                                        tempn+=pernBuf2[i];
// 1211 //                                     }
// 1212 //                                      nValue[1]=tempn;
// 1213 //                                   }
// 1214                                       moving_average_f(nvalue, pernBuf2, 7, nindex2, &nValue[1]);
??SampleApp_AnchorMSGCB_16:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#(nValue + 4) & 0xff
        MOV     ?V0 + 9,#((nValue + 4) >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#nindex2 & 0xff
        MOV     ?V0 + 9,#(nindex2 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 8,#pernBuf2 & 0xff
        MOV     ?V0 + 9,#(pernBuf2 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1215                                    break;
        SJMP    ??SampleApp_AnchorMSGCB_5
// 1216                                  }
// 1217                                  case '3':
// 1218                                  {
// 1219 //                                   pernBuf3[nindex3]=nvalue;
// 1220 //                                   nindex3++;
// 1221 //                                   if(nindex3==7)
// 1222 //                                   {
// 1223 //                                     nindex3=0;
// 1224 //                                     for (int i=0; i<8; i++)
// 1225 //                                     {
// 1226 //                                        tempn+=pernBuf3[i];
// 1227 //                                     }
// 1228 //                                      nValue[2]=tempn;
// 1229 //                                   }
// 1230                                       moving_average_f(nvalue, pernBuf3, 7, nindex3, &nValue[2]);
??SampleApp_AnchorMSGCB_17:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#(nValue + 8) & 0xff
        MOV     ?V0 + 9,#((nValue + 8) >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#nindex3 & 0xff
        MOV     ?V0 + 9,#(nindex3 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 8,#pernBuf3 & 0xff
        MOV     ?V0 + 9,#(pernBuf3 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1231                                    break;
        SJMP    ??SampleApp_AnchorMSGCB_5
// 1232                                  }
// 1233                                  case '4':
// 1234                                  {
// 1235 //                                   pernBuf4[nindex4]=nvalue;
// 1236 //                                   nindex4++;
// 1237 //                                   if(nindex4==7)
// 1238 //                                   {
// 1239 //                                     nindex4=0;
// 1240 //                                     for (int i=0; i<8; i++)
// 1241 //                                     {
// 1242 //                                        tempn+=pernBuf4[i];
// 1243 //                                     }
// 1244 //                                      nValue[3]=tempn;
// 1245 //                                   }
// 1246                                       moving_average_f(nvalue, pernBuf4, 7, nindex4, &nValue[3]);
??SampleApp_AnchorMSGCB_18:
        ; Setup parameters for call to function moving_average_f
        MOV     ?V0 + 8,#(nValue + 12) & 0xff
        MOV     ?V0 + 9,#((nValue + 12) >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#nindex4 & 0xff
        MOV     ?V0 + 9,#(nindex4 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 8,#pernBuf4 & 0xff
        MOV     ?V0 + 9,#(pernBuf4 >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        LCALL   ??moving_average_f?relay
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
// 1247                                    break;
// 1248                                          }
// 1249                                 break;
// 1250                             }
// 1251                           }
// 1252                }
// 1253         break;
// 1254          }
// 1255   }
// 1256 
// 1257 }
??SampleApp_AnchorMSGCB_5:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock6
// 1258 /*********************************************************************
// 1259  * @fn      SampleApp_SendPeriodicMessage
// 1260  *
// 1261  * @brief   Send the periodic message.
// 1262  *
// 1263  * @param   none
// 1264  *
// 1265  * @return  none
// 1266  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1267 void SampleApp_Router_SendPeriodicMessage( int index )
SampleApp_Router_SendPeriodicMessage:
          CFI Block cfiBlock7 Using cfiCommon0
          CFI Function SampleApp_Router_SendPeriodicMessage
        CODE
// 1268 {
        FUNCALL SampleApp_Router_SendPeriodicMessage, osal_strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Router_SendPeriodicMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 21, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 21, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 2
        MOV     A,#-0x2
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 1269     
// 1270   // Router broadcast to everyone
// 1271   SampleApp_Router_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
        MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 8
        MOV     A,#0xf
        MOVX    @DPTR,A
// 1272   SampleApp_Router_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1273   SampleApp_Router_Periodic_DstAddr.addr.shortAddr = 0xFFFF;
        MOV     DPTR,#SampleApp_Router_Periodic_DstAddr
        MOV     A,#-0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1274   
// 1275   uint8 data[2]="A";
        MOV     DPTR,#`?<Constant "A">`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0x2
        LCALL   ?MOVE_LONG8_XDATA_XDATA
// 1276   data[1]=0x30+index;
        MOV     A,R6
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1277   if ( AF_DataRequest( &SampleApp_Router_Periodic_DstAddr, &SampleApp_epDesc,
// 1278                        SAMPLEAPP_PERIODIC_CLUSTERID,
// 1279                        osal_strlen("A1"),
// 1280                        data,
// 1281                        &SampleApp_TransID,
// 1282                        AF_SKIP_ROUTING,//AF_DISCV_ROUTE,  
// 1283                        1//AF_DEFAULT_RADIUS 
// 1284                         ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0x1
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 13)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 15)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 17)
        ; Setup parameters for call to function osal_strlen
        MOV     R2,#`?<Constant "A1">` & 0xff
        MOV     R3,#(`?<Constant "A1">` >> 8) & 0xff
        LCALL   ??osal_strlen?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 19)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 21)
        MOV     R1,#-0x80
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Router_Periodic_DstAddr & 0xff
        MOV     R3,#(SampleApp_Router_Periodic_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV     A,R1
// 1285   {
// 1286   }
// 1287   else
// 1288   {
// 1289     // Error occurred in request to send.
// 1290   }
// 1291 }
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock7
// 1292 
// 1293 /*********************************************************************
// 1294  * @fn      SampleApp_Router_calibrationNMessage
// 1295  *
// 1296  * @brief   Send the periodic message.
// 1297  *
// 1298  * @param   none
// 1299  *
// 1300  * @return  none
// 1301  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1302 void SampleApp_Router_calibrationNMessage( int index , float nvalue )
SampleApp_Router_calibrationNMessage:
          CFI Block cfiBlock8 Using cfiCommon0
          CFI Function SampleApp_Router_calibrationNMessage
        CODE
// 1303 {
        FUNCALL SampleApp_Router_calibrationNMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 38, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 38, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x16
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 22)
        ; Saved register size: 22
        ; Auto size: 7
        MOV     A,#-0x7
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 29)
        MOV     ?V0 + 12,R2
        MOV     ?V0 + 13,R3
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
// 1304     
// 1305   // Router broadcast to everyone
// 1306 //  SampleApp_Router_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
// 1307 //  SampleApp_Router_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
// 1308 //  SampleApp_Router_Periodic_DstAddr.addr.shortAddr = 0xFFFF;
// 1309   SampleApp_Router_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrGroup;  //AddrGroup
        MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1310   SampleApp_Router_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1311   SampleApp_Router_Periodic_DstAddr.addr.shortAddr =  SAMPLEAPP_CalN_GROUP;    //SAMPLEAPP_QUADROTOR_GROUP
        MOV     DPTR,#SampleApp_Router_Periodic_DstAddr
        MOV     A,#0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1312  
// 1313 
// 1314  
// 1315   float tempn=nvalue;  
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
// 1316   if(nvalue>0)
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_GE
        JC      $+5
        LJMP    ??SampleApp_Router_calibrationNMessage_0 & 0xFFFF
// 1317   {
// 1318           uint8 data[7]="N";
        MOV     DPTR,#`?<Constant "N">`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0x7
        LCALL   ?MOVE_LONG8_XDATA_XDATA
// 1319           data[1]=0x30+index;
        MOV     A,?V0 + 12
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1320 
// 1321           data[2]=':';
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x3a
        MOVX    @DPTR,A
// 1322           
// 1323           uint8 number8;
// 1324           number8=(uint8)tempn;
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 8
        MOV     R6,?V0 + 8
// 1325           data[3]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1326           data[4]='.';
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2e
        MOVX    @DPTR,A
// 1327           tempn=10*(tempn-(float)number8);
        MOV     ?V0 + 8,R6
        CLR     A
        MOV     ?V0 + 9,A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
// 1328           number8=(uint8)tempn;
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 8
        MOV     R6,?V0 + 8
// 1329           data[5]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1330           tempn=10*(tempn-(float)number8);
        MOV     ?V0 + 8,R6
        CLR     A
        MOV     ?V0 + 9,A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
// 1331           number8=(uint8)tempn;
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 8
        MOV     R6,?V0 + 8
// 1332           data[6]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1333                       
// 1334           
// 1335           if ( AF_DataRequest( &SampleApp_Router_Periodic_DstAddr, &SampleApp_epDesc,
// 1336                                CALBRATION_N_CLUSTERID,
// 1337                                7,//osal_strlen("A1")+1,
// 1338                                data,
// 1339                                &SampleApp_TransID,
// 1340                                AF_DISCV_ROUTE,//AF_DISCV_ROUTE,  
// 1341                                1//AF_DEFAULT_RADIUS 
// 1342                                 ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 8,#0x1
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 8,#SampleApp_TransID & 0xff
        MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     ?V0 + 8,#0x2
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Router_Periodic_DstAddr & 0xff
        MOV     R3,#(SampleApp_Router_Periodic_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 29)
        MOV     A,R1
// 1343           {
// 1344           }
// 1345           else
// 1346           {
// 1347             // Error occurred in request to send.
// 1348           }
// 1349   }
// 1350 }
??SampleApp_Router_calibrationNMessage_0:
        MOV     A,#0x7
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 22)
        MOV     R7,#0xe
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock8
// 1351 
// 1352 /*********************************************************************
// 1353  * @fn      SampleApp_Tester_calibrationAMessage
// 1354  *
// 1355  * @brief   Send the periodic message.
// 1356  *
// 1357  * @param   none
// 1358  *
// 1359  * @return  none
// 1360  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1361 void SampleApp_Tester_calibrationAMessage( int index , float A )
SampleApp_Tester_calibrationAMessage:
          CFI Block cfiBlock9 Using cfiCommon0
          CFI Function SampleApp_Tester_calibrationAMessage
        CODE
// 1362 {
        FUNCALL SampleApp_Tester_calibrationAMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 42, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 42, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 9
        MOV     A,#-0x9
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 33)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     A,#0x21
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
// 1363 //    SampleApp_Tester_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
// 1364 //  SampleApp_Tester_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
// 1365 //  SampleApp_Tester_DstAddr.addr.shortAddr = 0xFFFF;
// 1366     
// 1367   SampleApp_Tester_DstAddr.addrMode = (afAddrMode_t)AddrGroup;  //AddrGroup
        MOV     DPTR,#SampleApp_Tester_DstAddr + 8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1368   SampleApp_Tester_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Tester_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1369   SampleApp_Tester_DstAddr.addr.shortAddr =  SAMPLEAPP_CalN_GROUP;    //SAMPLEAPP_QUADROTOR_GROUP
        MOV     DPTR,#SampleApp_Tester_DstAddr
        MOV     A,#0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1370  
// 1371 
// 1372 
// 1373   float tempn=A;  
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,?V0 + 2
        MOV     ?V0 + 7,?V0 + 3
// 1374   if(A>=0)
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_GE
        JC      $+5
        LJMP    ??SampleApp_Tester_calibrationAMessage_0 & 0xFFFF
// 1375   {
// 1376           uint8 data[7]="A";
        MOV     DPTR,#`?<Constant "A">_1`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0x7
        LCALL   ?MOVE_LONG8_XDATA_XDATA
// 1377           data[1]=0x30+index;
        MOV     A,R6
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1378 
// 1379           data[2]=':';
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x3a
        MOVX    @DPTR,A
// 1380           
// 1381           uint8 number8;
// 1382           number8=(uint8)(tempn/10);
        MOV     ?V0 + 12,?V0 + 4
        MOV     ?V0 + 13,?V0 + 5
        MOV     ?V0 + 14,?V0 + 6
        MOV     ?V0 + 15,?V0 + 7
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 12
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 12
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,?V0 + 12
        MOVX    @DPTR,A
// 1383           data[3]=number8+'0';
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1384           number8=(uint8)(((int)tempn)%10);
        MOV     ?V0 + 8,?V0 + 4
        MOV     ?V0 + 9,?V0 + 5
        MOV     ?V0 + 10,?V0 + 6
        MOV     ?V0 + 11,?V0 + 7
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_L
        MOV     R0,?V0 + 8
        MOV     R1,?V0 + 9
        MOV     R2,#0xa
        MOV     R3,#0x0
        LCALL   ?S_DIV_MOD
        MOV     A,R2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
// 1385           data[4]=number8+'0';
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1386           data[5]='.';
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2e
        MOVX    @DPTR,A
// 1387           tempn=10*(tempn-(int)tempn);
        MOV     ?V0 + 8,?V0 + 4
        MOV     ?V0 + 9,?V0 + 5
        MOV     ?V0 + 10,?V0 + 6
        MOV     ?V0 + 11,?V0 + 7
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 9
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?L_TO_FLT
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
// 1388           number8=(uint8)tempn;
        MOV     ?V0 + 8,?V0 + 4
        MOV     ?V0 + 9,?V0 + 5
        MOV     ?V0 + 10,?V0 + 6
        MOV     ?V0 + 11,?V0 + 7
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 8
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,?V0 + 8
        MOVX    @DPTR,A
// 1389           data[6]=number8+'0';
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x7
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1390                
// 1391           
// 1392           if ( AF_DataRequest( &SampleApp_Tester_DstAddr, &SampleApp_epDesc,
// 1393                                CALBRATION_N_CLUSTERID,
// 1394                                7,//osal_strlen("A1")+1,
// 1395                                data,
// 1396                                &SampleApp_TransID,
// 1397                                AF_DISCV_ROUTE,//AF_DISCV_ROUTE,  
// 1398                                1//AF_DEFAULT_RADIUS 
// 1399                                 ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 8,#0x1
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 8,#SampleApp_TransID & 0xff
        MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 40)
        MOV     ?V0 + 8,#0x2
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 42)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Tester_DstAddr & 0xff
        MOV     R3,#(SampleApp_Tester_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 33)
        MOV     A,R1
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1400           {
// 1401           }
// 1402           else
// 1403           {
// 1404             // Error occurred in request to send.
// 1405           }
// 1406   }
// 1407 }
??SampleApp_Tester_calibrationAMessage_0:
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock9
// 1408 
// 1409 
// 1410 /*********************************************************************
// 1411  * @fn      SampleApp_Quadrotor_SendLocation
// 1412  *
// 1413  * @brief   Send the flash message to group 1.
// 1414  *
// 1415  * @param   flashTime - in milliseconds
// 1416  *
// 1417  * @return  none
// 1418  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1419 void SampleApp_Quadrotor_SendLocation( int index )
SampleApp_Quadrotor_SendLocation:
          CFI Block cfiBlock10 Using cfiCommon0
          CFI Function SampleApp_Quadrotor_SendLocation
        CODE
// 1420 {
        FUNCALL SampleApp_Quadrotor_SendLocation, SampleApp_MinMax_localization
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 62, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 62, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_Quadrotor_SendLocation, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 57, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 57, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x16
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 22)
        ; Saved register size: 22
        ; Auto size: 26
        MOV     A,#-0x1a
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 48)
        MOV     ?V0 + 12,R2
        MOV     ?V0 + 13,R3
// 1421   
// 1422   SampleApp_Quadrotor_Location_DstAddr.addrMode = (afAddrMode_t)AddrGroup;  //AddrGroup
        MOV     DPTR,#SampleApp_Quadrotor_Location_DstAddr + 8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1423   SampleApp_Quadrotor_Location_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Quadrotor_Location_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1424   SampleApp_Quadrotor_Location_DstAddr.addr.shortAddr = SAMPLEAPP_QUADROTOR_GROUP;    //SAMPLEAPP_QUADROTOR_GROUP
        MOV     DPTR,#SampleApp_Quadrotor_Location_DstAddr
        MOV     A,#0x2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1425   
// 1426   float xposition;
// 1427   float yposition;
// 1428   float zposition;
// 1429   
// 1430   zposition=locationZ[index-1];
        MOV     R0,?V0 + 12
        MOV     R1,?V0 + 13
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,?V0 + 13
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(locationZ + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((locationZ - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,?V0 + 2
        MOV     ?V0 + 7,?V0 + 3
// 1431   // using min-max algorithm
// 1432   SampleApp_MinMax_localization(&xposition, &yposition, zposition, nValue,
// 1433                                 RssiValue, AValue, AnchorX, AnchorY);
        ; Setup parameters for call to function SampleApp_MinMax_localization
        MOV     ?V0 + 0,#AnchorY & 0xff
        MOV     ?V0 + 1,#(AnchorY >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 50)
        MOV     ?V0 + 0,#AnchorX & 0xff
        MOV     ?V0 + 1,#(AnchorX >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 52)
        MOV     ?V0 + 0,#AValue & 0xff
        MOV     ?V0 + 1,#(AValue >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 54)
        MOV     ?V0 + 0,#RssiValue & 0xff
        MOV     ?V0 + 1,#(RssiValue >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 56)
        MOV     ?V0 + 0,#nValue & 0xff
        MOV     ?V0 + 1,#(nValue >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 58)
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 62)
        MOV     A,#0xe
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     A,#0x12
        LCALL   ?XSTACK_DISP0_8
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??SampleApp_MinMax_localization?relay
        MOV     A,#0xe
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 48)
// 1434   
// 1435   // using weighted centroid localization algorithm
// 1436   //SampleApp_WCL_localization(&xposition, &yposition, nValue,RssiValue,AValue,AnchorX,AnchorY);
// 1437   locationX[index-1]=xposition;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        LCALL   ?XLOAD_R2345
        MOV     R0,?V0 + 12
        MOV     R1,?V0 + 13
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R6,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R6
        MOV     R6,A
        MOV     B,#0x4
        MOV     A,?V0 + 13
        MUL     AB
        ADD     A,R6
        MOV     R1,A
        MOV     A,#(locationX + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((locationX - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?XSTORE_R2345
// 1438   locationY[index-1]=yposition;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XLOAD_R2345
        MOV     R0,?V0 + 12
        MOV     R1,?V0 + 13
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R6,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R6
        MOV     R6,A
        MOV     B,#0x4
        MOV     A,?V0 + 13
        MUL     AB
        ADD     A,R6
        MOV     R1,A
        MOV     A,#(locationY + 252) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((locationY - 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        LCALL   ?XSTORE_R2345
// 1439   
// 1440   
// 1441 
// 1442   uint8 data[18]="Q";
        MOV     DPTR,#`?<Constant "Q">`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0x12
        LCALL   ?MOVE_LONG8_XDATA_XDATA
// 1443   data[1]=0x30+index;
        MOV     A,?V0 + 12
        ADD     A,#0x30
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x9
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1444   data[2]='[';
        MOV     A,#0xa
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x5b
        MOVX    @DPTR,A
// 1445   data[17]=']';
        MOV     A,#0x19
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x5d
        MOVX    @DPTR,A
// 1446   uint8 number8;
// 1447   number8=(uint8)xposition;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        MOV     R6,?V0 + 0
// 1448   data[3]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0xb
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1449   data[4]='.';
        MOV     A,#0xc
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2e
        MOVX    @DPTR,A
// 1450   xposition=10*(xposition-(float)number8);
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,R6
        CLR     A
        MOV     ?V0 + 9,A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1451   number8=(uint8)xposition;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        MOV     R6,?V0 + 0
// 1452   data[5]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0xd
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1453   xposition=10*(xposition-(float)number8);
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,R6
        CLR     A
        MOV     ?V0 + 9,A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1454   number8=(uint8)xposition+'0';
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        ADD     A,#0x30
        MOV     R6,A
// 1455   data[6]=number8;
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0xe
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1456   data[7]=',';
        MOV     A,#0xf
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2c
        MOVX    @DPTR,A
// 1457   number8=(uint8)yposition;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        MOV     R6,?V0 + 0
// 1458   data[8]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1459   data[9]='.';
        MOV     A,#0x11
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2e
        MOVX    @DPTR,A
// 1460   yposition=10*(yposition-(float)number8);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,R6
        CLR     A
        MOV     ?V0 + 9,A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1461   number8=(uint8)yposition;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        MOV     R6,?V0 + 0
// 1462   data[10]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x12
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1463   yposition=10*(yposition-(float)number8);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,R6
        CLR     A
        MOV     ?V0 + 9,A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1464   number8=(uint8)yposition+'0';
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        ADD     A,#0x30
        MOV     R6,A
// 1465   data[11]=number8;
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x13
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1466   data[12]=',';
        MOV     A,#0x14
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2c
        MOVX    @DPTR,A
// 1467   number8=(uint8)zposition;
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        MOV     R6,?V0 + 0
// 1468   data[13]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x15
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1469   data[14]='.';
        MOV     A,#0x16
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2e
        MOVX    @DPTR,A
// 1470   zposition=10*(zposition-(float)number8);
        MOV     ?V0 + 0,R6
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
// 1471   number8=(uint8)zposition;
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        MOV     R6,?V0 + 0
// 1472   data[15]=number8+'0';
        MOV     A,#0x30
        ADD     A,R6
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x17
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1473   zposition=10*(zposition-(float)number8);
        MOV     ?V0 + 0,R6
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
        MOV     DPTR,#__Constant_41200000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
// 1474   number8=(uint8)zposition+'0';
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_L
        MOV     A,?V0 + 0
        ADD     A,#0x30
        MOV     R6,A
// 1475   data[16]=number8;
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x18
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1476  
// 1477   if ( AF_DataRequest( &SampleApp_Quadrotor_Location_DstAddr, &SampleApp_epDesc,
// 1478                          LZQR_GROUP_CLUSTERID,
// 1479                          18,//osal_strlen("Q1")+1,
// 1480                          data,
// 1481                          &SampleApp_TransID,
// 1482                          AF_DISCV_ROUTE,//AF_SKIP_ROUTING,  
// 1483                          AF_DEFAULT_RADIUS// 1
// 1484                            ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0x1e
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 49)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 51)
        MOV     A,#0xb
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 53)
        MOV     ?V0 + 0,#0x12
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 55)
        MOV     ?V0 + 0,#0x3
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 57)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Quadrotor_Location_DstAddr & 0xff
        MOV     R3,#(SampleApp_Quadrotor_Location_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 48)
        MOV     A,R1
// 1485     {
// 1486     }
// 1487     else
// 1488     {
// 1489       // Error occurred in request to send.
// 1490     }
// 1491 
// 1492 
// 1493 }
        MOV     A,#0x1a
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 22)
        MOV     R7,#0xe
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock10

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for imof1>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for imof2>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for imof3>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for imof4>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for nindex1>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for nindex2>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for nindex3>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for nindex4>`:
        DATA16
        DW 0
        DW 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for nValue>`:
        DATA32
        DD 40400000H
        DD 40400000H
        DD 40400000H
        DD 40400000H

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for AValue>`:
        DATA32
        DD 42300000H
        DD 42300000H
        DD 42300000H
        DD 42300000H

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for AnchorX>`:
        DATA32
        DD 4019999AH
        DD 0H
        DD 0H
        DD 4019999AH

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for AnchorY>`:
        DATA32
        DD 40866666H
        DD 40866666H
        DD 0H
        DD 0H

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for DeviceID>`:
        DATA16
        DW 1

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_Init?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_ProcessEvent?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_ProcessEvent

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_HandleKeys?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_HandleKeys

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_MessageMSGCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_MessageMSGCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_QuadrotorMSGCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_QuadrotorMSGCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_Tester_calibrationMSGCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_Tester_calibrationMSGCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_AnchorMSGCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_AnchorMSGCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_Router_SendPeriodicMessage?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_Router_SendPeriodicMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_Router_calibrationNMessage?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_Router_calibrationNMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_Tester_calibrationAMessage?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_Tester_calibrationAMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_Quadrotor_SendLocation?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    SampleApp_Quadrotor_SendLocation

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UartInit OK\\n">`:
        DB "UartInit OK\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Group 1">`:
        DB "Group 1"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Group 2">`:
        DB "Group 2"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "SampleApp">`:
        DB "SampleApp"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA16
`?<Constant "A">`:
        DB "A"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "A1">`:
        DB "A1"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA16
`?<Constant "N">`:
        DB "N"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA16
`?<Constant "A">_1`:
        DB "A"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA16
`?<Constant "Q">`:
        DB "Q"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_41200000:
        DD 41200000H

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_3dcccccd:
        DD 3DCCCCCDH

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_1:
        DD 1H

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_3c23d70a:
        DD 3C23D70AH

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_0:
        DD 0H

        END
// 1494 
// 1495 
// 1496 ///*********************************************************************
// 1497 // * @fn      SampleApp_MinMax_localization
// 1498 // *
// 1499 // * @brief   calculate the position of a quadrotor
// 1500 // *
// 1501 // * @param   rssi_i readings from different anchors, the result will be stored in xposition and yposition
// 1502 // *
// 1503 // * @return  none
// 1504 // */
// 1505 //void SampleApp_MinMax_localization(float* xposition, float* yposition, float zposition)
// 1506 //{
// 1507 //    //initial the parameter 
// 1508 //    float x_left=-10;
// 1509 //    float x_right=10;
// 1510 //    float y_bottom=-10;
// 1511 //    float y_top=10;
// 1512 //    float gainconst=1.16f;
// 1513 //    float naverage=0.0f;
// 1514 //    for(int i=0;i<4;i++)
// 1515 //    {
// 1516 //      naverage+=nValue[i];
// 1517 //    }
// 1518 //    //calculate the distances based on the calibrated parameter n and A
// 1519 //    for (int i=0; i<4; i++)
// 1520 //    {
// 1521 //      distance[i]=pow(10,((RssiValue[i]/gainconst-AValue[i])/(10*naverage)));
// 1522 //      distance[i]=pow((distance[i]*distance[i]-zposition*zposition),0.5);
// 1523 //    }
// 1524 //    
// 1525 //    
// 1526 //    for(int i=0; i<4; i++)
// 1527 //    {
// 1528 //        //max of  
// 1529 //       if((AnchorX[i]-distance[i])>x_left)
// 1530 //       {x_left=(AnchorX[i]+distance[i]);}
// 1531 //       
// 1532 //       if((AnchorX[i]+distance[i])<x_right)
// 1533 //       {x_right=(AnchorX[i]+distance[i]);}
// 1534 //       
// 1535 //       if((AnchorY[i]-distance[i])>y_bottom)
// 1536 //       {y_bottom=(AnchorY[i]+distance[i]);}
// 1537 //       
// 1538 //       if((AnchorY[i]+distance[i])<y_top)
// 1539 //       {y_top=(AnchorY[i]+distance[i]);}
// 1540 //    }
// 1541 //    *xposition=(x_left+x_right)/2;
// 1542 //    *yposition=(y_bottom+y_top)/2;
// 1543 //    
// 1544 //}
// 1545 //
// 1546 //
// 1547 ///*********************************************************************
// 1548 // * @fn      SampleApp_WCL_localization
// 1549 // *
// 1550 // * @brief   calculate the position of a quadrotor
// 1551 // *
// 1552 // * @param   rssi_i readings from different anchors, the result will be stored in xposition and yposition
// 1553 // *
// 1554 // * @return  none
// 1555 // */
// 1556 //void SampleApp_WCL_localization(float* xposition, float* yposition)
// 1557 //{
// 1558 //    //initial the parameter 
// 1559 //    int g=4;   // const. parameter for WCL
// 1560 //    float w[4]; //weight
// 1561 //    double sumw=0.0; // sum of weights
// 1562 //    float naverage=0.0f;
// 1563 //    for(int i=0;i<4;i++)
// 1564 //    {
// 1565 //      naverage+=nValue[i];
// 1566 //    }
// 1567 //    
// 1568 //    //calculate the distances based on the calibrated parameter n and A
// 1569 //    for (int i=0; i<4; i++)
// 1570 //    {
// 1571 //      distance[i]=pow(10,((RssiValue[i]/1.16f-AValue[i])/(10*naverage)));
// 1572 //      w[i]=pow(distance[i],g);
// 1573 //      sumw+=w[i];
// 1574 //    }
// 1575 //
// 1576 //    
// 1577 //     
// 1578 //    *xposition=AnchorX[0]*w[0]/sumw+AnchorX[1]*w[1]/sumw+AnchorX[2]*w[2]/sumw+AnchorX[3]*w[3]/sumw;
// 1579 //    *yposition=AnchorY[0]*w[0]/sumw+AnchorY[1]*w[1]/sumw+AnchorY[2]*w[2]/sumw+AnchorY[3]*w[3]/sumw;
// 1580 //    
// 1581 //}
// 1582 //
// 1583 ///*********************************************************************
// 1584 // * @fn      gaussianfilter
// 1585 // *
// 1586 // * @brief   filter for received rssi data
// 1587 // *
// 1588 // * @param   rssi rssi array, the result will be stored in xposition and yposition
// 1589 // *
// 1590 // * @return  none
// 1591 // */
// 1592 //float gaussianfilter(int8* rssi, int length)
// 1593 //{
// 1594 //  float mu=0.0;
// 1595 //  float variance=0.0;
// 1596 //  float newmean=0.0;
// 1597 //  
// 1598 //  for (int i=0; i<length; i++)
// 1599 //  {
// 1600 //    mu+=*(rssi+i);
// 1601 //  }
// 1602 //  mu=mu/length;
// 1603 //  
// 1604 //  for (int i=0; i<length; i++)
// 1605 //  {
// 1606 //    float temp=*(rssi+i);
// 1607 //    variance+=(float)pow((mu-temp),2);
// 1608 //  }
// 1609 //  variance=(float)(variance/length);
// 1610 //  
// 1611 //  float intervalmin=mu-variance;
// 1612 //  float intervalmax=mu+variance;
// 1613 //  
// 1614 //  int index=0;
// 1615 //  for (int i=0; i<length; i++)
// 1616 //  {
// 1617 //    float temp=*(rssi+i);
// 1618 //    if(temp<=intervalmax&&temp>=intervalmin)
// 1619 //       {
// 1620 //         index++;
// 1621 //         newmean+=temp;
// 1622 //       }
// 1623 //  }
// 1624 //  
// 1625 //       if(index!=0)
// 1626 //       {
// 1627 //         newmean=newmean/index;
// 1628 //       }
// 1629 //       
// 1630 //  return newmean;
// 1631 //}
// 1632 //
// 1633 ///*********************************************************************
// 1634 // * @fn      averagefilter
// 1635 // *
// 1636 // * @brief   filter for received rssi data
// 1637 // *
// 1638 // * @param   rssi rssi array
// 1639 // *
// 1640 // * @return  none
// 1641 // */
// 1642 //float averagefilter(int8* rssi, int length)
// 1643 //{
// 1644 //  int32 mu=0;
// 1645 // 
// 1646 //  float newmean=0.0;
// 1647 //  
// 1648 //  for(int i=0; i<length; i++)
// 1649 //   {
// 1650 //                  mu+=(int32)*(rssi+i);
// 1651 //   }
// 1652 //                 newmean=((float)mu)/((float)length);
// 1653 //             
// 1654 //       
// 1655 //  return newmean;
// 1656 //}
// 1657 //
// 1658 ///*********************************************************************
// 1659 // * @fn      calibrationN
// 1660 // *
// 1661 // * @brief   calibration of n
// 1662 // *
// 1663 // * @param   rssi rssi array
// 1664 // *
// 1665 // * @return  none
// 1666 // */
// 1667 //float calibrationN(int localID, int index, float rssivalue_f, float AnchorX[4], float AnchorY[4], float AnchorZ[4], float A[4])
// 1668 //{
// 1669 //  float n;
// 1670 //  if(localID!=index)
// 1671 //  {
// 1672 //      
// 1673 //      float d=0.0;
// 1674 //      d=(AnchorX[localID-1]-AnchorX[index-1])*(AnchorX[localID-1]-AnchorX[index-1])+
// 1675 //        (AnchorY[localID-1]-AnchorY[index-1])*(AnchorY[localID-1]-AnchorY[index-1])+
// 1676 //          (AnchorZ[localID-1]-AnchorZ[index-1])*(AnchorZ[localID-1]-AnchorZ[index-1]);
// 1677 //     // d+=pow((AnchorY[localID-1]-AnchorY[index-1]),2);
// 1678 //     // d+=pow((AnchorZ[localID-1]-AnchorZ[index-1]),2);
// 1679 //      d=pow(d,0.5);
// 1680 //      if(d!=1)
// 1681 //        n=(rssivalue_f-A[index-1])/10/(log10(d));
// 1682 //      else
// 1683 //        n=nValue[localID-1];
// 1684 //  }
// 1685 //  else
// 1686 //  {
// 1687 //    n=nValue[localID-1];
// 1688 //  }
// 1689 //  return n;
// 1690 //}
// 1691 /*********************************************************************
// 1692 *********************************************************************/
// 
// 7 485 bytes in segment BANKED_CODE
//    66 bytes in segment BANK_RELAYS
//    98 bytes in segment XDATA_I
//    98 bytes in segment XDATA_ID
//    88 bytes in segment XDATA_ROM_C
//   478 bytes in segment XDATA_Z
// 
// 7 649 bytes of CODE  memory
//    68 bytes of CONST memory (+ 20 bytes shared)
//   576 bytes of XDATA memory
//
//Errors: none
//Warnings: none
