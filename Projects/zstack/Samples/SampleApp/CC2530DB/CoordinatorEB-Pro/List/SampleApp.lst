###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.20.2.41139 for 8051             11/Jan/2016  16:35:11 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\Source\SampleApp.c   #
#    Command line       =  -f C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\P #
#                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\.. #
#                          \Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ           #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DZDO_COORDINATOR -DRTR_NWK -DBLINK_LEDS) -f     #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\To #
#                          ols\CC2530DB\f8wConfig.cfg (-DSECURE=0             #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=TRUE      #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\Source\SampleApp.c   #
#                          -D ZIGBEEPRO -D ZTOOL_P1 -D xMT_TASK -D            #
#                          xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                    #
#                          LCD_SUPPORTED=DEBUG -lC C:\Users\ArnoldWorkStation #
#                          \Desktop\ZigbeeTest\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\CoordinatorEB-Pro\List\ -lA           #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\Coordinator #
#                          EB-Pro\List\ --diag_suppress Pe001,Pa010 -o        #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\Coordinator #
#                          EB-Pro\Obj\ -e --no_cse --no_unroll --no_inline    #
#                          --no_code_motion --no_tbaa --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I C:\Users\ArnoldWorkStation #
#                          \Desktop\ZigbeeTest\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\ -I C:\Users\ArnoldWorkStation\Deskto #
#                          p\ZigbeeTest\Projects\zstack\Samples\SampleApp\CC2 #
#                          530DB\..\SOURCE\ -I C:\Users\ArnoldWorkStation\Des #
#                          ktop\ZigbeeTest\Projects\zstack\Samples\SampleApp\ #
#                          CC2530DB\..\..\..\ZMAIN\TI2530DB\ -I               #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\MT\ -I C:\Users\ArnoldWorkStation\D #
#                          esktop\ZigbeeTest\Projects\zstack\Samples\SampleAp #
#                          p\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\INCLUDE\  #
#                          -I C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\P #
#                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\.. #
#                          \..\..\COMPONENTS\HAL\TARGET\CC2530EB\ -I          #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\OSAL\MCU\CCSOC\ -I                  #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\OSAL\INCLUDE\ -I                    #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\STACK\AF\ -I                        #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\STACK\NWK\ -I                       #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\STACK\SEC\ -I                       #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\STACK\SAPI\ -I                      #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\STACK\SYS\ -I                       #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\STACK\ZDO\ -I                       #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\ZMAC\F8W\ -I                        #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\ZMAC\ -I C:\Users\ArnoldWorkStation #
#                          \Desktop\ZigbeeTest\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\..\..\..\..\..\COMPONENTS\SERVICES\SA #
#                          DDR\ -I C:\Users\ArnoldWorkStation\Desktop\ZigbeeT #
#                          est\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\COMPONENTS\SERVICES\SDATA\ -I          #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\MAC\INCLUDE\ -I                     #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\MAC\HIGH_LEVEL\ -I                  #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\MAC\LOW_LEVEL\srf04\ -I             #
#                          C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\COMPONENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\    #
#                          -On --require_prototypes                           #
#    List file          =  C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\Coordinator #
#                          EB-Pro\List\SampleApp.lst                          #
#    Object file        =  C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\Coordinator #
#                          EB-Pro\Obj\SampleApp.r51                           #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\ArnoldWorkStation\Desktop\ZigbeeTest\Projects\zstack\Samples\SampleApp\Source\SampleApp.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Sample Application (no Profile).
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          #include "OSAL.h"
     60          #include "ZGlobals.h"
     61          #include "AF.h"
     62          #include "aps_groups.h"
     63          #include "ZDApp.h"
     64          
     65          #include "SampleApp.h"
     66          #include "SampleAppHw.h"
     67          
     68          #include "OnBoard.h"
     69          
     70          /* HAL */
     71          #include "hal_lcd.h"
     72          #include "hal_led.h"
     73          #include "hal_key.h"
     74          #include "MT_UART.h"
     75          #include "MT_APP.h"
     76          #include "MT.h"
     77          
     78          /*********************************************************************
     79           * MACROS
     80           */
     81          
     82          /*********************************************************************
     83           * CONSTANTS
     84           */
     85          
     86          /*********************************************************************
     87           * TYPEDEFS
     88           */
     89          
     90          /*********************************************************************
     91           * GLOBAL VARIABLES
     92           */
     93          
     94          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
     95          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0300         DW 3
     96          {
     97            SAMPLEAPP_PERIODIC_CLUSTERID,
     98            CALBRATION_N_CLUSTERID,
     99            LZQR_GROUP_CLUSTERID   //id for localization of quadrotor group 
    100          };
    101          

   \                                 In  segment XDATA_ROM_C, align 1
    102          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   03           DB 3
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   03           DB 3
   \   00000A   ....         DW SampleApp_ClusterList
    103          {
    104            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    105            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    106            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    107            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    108            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    109            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    110            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    111            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    112            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    113          };
    114          
    115          // This is the Endpoint/Interface description.  It is defined here, but
    116          // filled-in in SampleApp_Init().  Another way to go would be to fill
    117          // in the structure here and make it a "const" (in code space).  The
    118          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    119          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    120          
    121          /*********************************************************************
    122           * EXTERNAL VARIABLES
    123           */
    124          
    125          /*********************************************************************
    126           * EXTERNAL FUNCTIONS
    127           */
    128          
    129          
    130          /*********************************************************************
    131           * LOCAL VARIABLES
    132           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    134                                    // This variable will be received when
    135                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    136          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    137          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    138          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    139          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    140          afAddrType_t SampleApp_Router_Periodic_DstAddr;
   \                     SampleApp_Router_Periodic_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    141          afAddrType_t SampleApp_Tester_DstAddr;
   \                     SampleApp_Tester_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    142          afAddrType_t SampleApp_Quadrotor_Location_DstAddr;
   \                     SampleApp_Quadrotor_Location_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    143          
    144          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    145          aps_Group_t SampleApp_Group_1;
   \                     SampleApp_Group_1:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    146          aps_Group_t SampleApp_Group_2;
   \                     SampleApp_Group_2:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    147          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    148          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    149          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    150          
    151          //user setting for quadrotor
    152          
    153          //buf for storing rssi values from 4 anchors

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    154          int8 perRssiBuf1[RSSI_AVG_WINDOW_SIZE]={0};
   \                     perRssiBuf1:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    155          int8 perRssiBuf2[RSSI_AVG_WINDOW_SIZE]={0};
   \                     perRssiBuf2:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    156          int8 perRssiBuf3[RSSI_AVG_WINDOW_SIZE]={0};
   \                     perRssiBuf3:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    157          int8 perRssiBuf4[RSSI_AVG_WINDOW_SIZE]={0};
   \                     perRssiBuf4:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z
    158          //buf for nvalue

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    159          float pernBuf1[8]={0};
   \                     pernBuf1:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    160          float pernBuf2[8]={0};
   \                     pernBuf2:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    161          float pernBuf3[8]={0};
   \                     pernBuf3:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    162          float pernBuf4[8]={0};
   \                     pernBuf4:
   \   000000                DS 32
   \   000020                REQUIRE __INIT_XDATA_Z
    163          //temp rssivalue

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    164          int8 rssivalue;
   \                     rssivalue:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    165          // index for loop innenhalb the window

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    166          int8 i1=0;
   \                     i1:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    167          int8 i2=0;
   \                     i2:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    168          int8 i3=0;
   \                     i3:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    169          int8 i4=0;
   \                     i4:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    170          // index for moving filter

   \                                 In  segment XDATA_I, align 1, keep-with-next
    171          int imof1[2]={0,1};
   \                     imof1:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for imof1>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    172          int imof2[2]={0,1};
   \                     imof2:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for imof2>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    173          int imof3[2]={0,1};
   \                     imof3:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for imof3>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    174          int imof4[2]={0,1};
   \                     imof4:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for imof4>`
   \   000004                REQUIRE __INIT_XDATA_I
    175          // index for moving filter of n value

   \                                 In  segment XDATA_I, align 1, keep-with-next
    176          int nindex1[2]={0,1};
   \                     nindex1:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for nindex1>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    177          int nindex2[2]={0,1};
   \                     nindex2:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for nindex2>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    178          int nindex3[2]={0,1};
   \                     nindex3:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for nindex3>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    179          int nindex4[2]={0,1};
   \                     nindex4:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for nindex4>`
   \   000004                REQUIRE __INIT_XDATA_I
    180          // sum/average Rssi value

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    181          float sumRssi1=0;
   \                     sumRssi1:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    182          float sumRssi2=0;
   \                     sumRssi2:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    183          float sumRssi3=0;
   \                     sumRssi3:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    184          float sumRssi4=0;
   \                     sumRssi4:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    185          //localization parameter
    186          //float distance[4]={0,0,0,0};

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    187          float RssiValue[4]={0,0,0,0};
   \                     RssiValue:
   \   000000                DS 16
   \   000010                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    188          float nValue[4]={3.0f,3.0f,3.0f,3.0f};
   \                     nValue:
   \   000000                DS 16
   \   000010                REQUIRE `?<Initializer for nValue>`
   \   000010                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    189          float AValue[4]={44,44,44,44};
   \                     AValue:
   \   000000                DS 16
   \   000010                REQUIRE `?<Initializer for AValue>`
   \   000010                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    190          float AnchorX[4]={2.4f, 0.0f, 0.0f, 2.4f};
   \                     AnchorX:
   \   000000                DS 16
   \   000010                REQUIRE `?<Initializer for AnchorX>`
   \   000010                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    191          float AnchorY[4]={4.2f, 4.2f, 0.0f, 0.0f};
   \                     AnchorY:
   \   000000                DS 16
   \   000010                REQUIRE `?<Initializer for AnchorY>`
   \   000010                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    192          float AnchorZ[4]={0.0f, 0.0f, 0.0f, 0.0f};
   \                     AnchorZ:
   \   000000                DS 16
   \   000010                REQUIRE __INIT_XDATA_Z
    193          
    194          //altitude information

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    195          float locationX[4]={0.0f, 0.0f, 0.0f, 0.0f};
   \                     locationX:
   \   000000                DS 16
   \   000010                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    196          float locationY[4]={0.0f, 0.0f, 0.0f, 0.0f};
   \                     locationY:
   \   000000                DS 16
   \   000010                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    197          float locationZ[4]={0.0f, 0.0f, 0.0f, 0.0f};
   \                     locationZ:
   \   000000                DS 16
   \   000010                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    198          LParameter tempParameter;
   \                     tempParameter:
   \   000000                DS 36
   \   000024                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    199          int DeviceID=1;
   \                     DeviceID:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for DeviceID>`
   \   000002                REQUIRE __INIT_XDATA_I
    200          /*********************************************************************
    201           * LOCAL FUNCTIONS
    202           */
    203          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    204          //deal with message(Co)
    205          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    206          //deal with message(Ed)
    207          void SampleApp_QuadrotorMSGCB( afIncomingMSGPacket_t *pckt );
    208          //deal with message(Ro)
    209          void SampleApp_AnchorMSGCB( afIncomingMSGPacket_t *pckt );
    210          //tester calibration a(Ed)
    211          void SampleApp_Tester_calibrationMSGCB(afIncomingMSGPacket_t *pckt );
    212          //router send period message
    213          void SampleApp_Router_SendPeriodicMessage( int index );
    214          //quadrotor send their location in the group
    215          void SampleApp_Quadrotor_SendLocation( int index );
    216          //router calibration n
    217          void SampleApp_Router_calibrationNMessage(int index, float nvalue);
    218          //tester calibration A
    219          void SampleApp_Tester_calibrationAMessage( int index , float A );
    220          
    221          //void SampleApp_SendFlashMessage( uint16 flashTime );
    222          //void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg);
    223          
    224          //float gaussianfilter(int8* rssi, int length);
    225          //float averagefilter(int8* rssi, int length);
    226          //float calibrationN(int localID, int index, float rssivalue_f, float AnchorX[4], float AnchorY[4], float AnchorZ[4], float A[4]);
    227          /*********************************************************************
    228           * NETWORK LAYER CALLBACKS
    229           */
    230          
    231          /*********************************************************************
    232           * PUBLIC FUNCTIONS
    233           */
    234          
    235          /*********************************************************************
    236           * @fn      SampleApp_Init
    237           *
    238           * @brief   Initialization function for the Generic App Task.
    239           *          This is called during initialization and should contain
    240           *          any application specific initialization (ie. hardware
    241           *          initialization/setup, table initialization, power up
    242           *          notificaiton ... ).
    243           *
    244           * @param   task_id - the ID assigned by OSAL.  This ID should be
    245           *                    used to send messages and set timers.
    246           *
    247           * @return  none
    248           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    249          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    250          { 
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    251            SampleApp_TaskID = task_id;
   \   000007   EE           MOV     A,R6
   \   000008   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000B   F0           MOVX    @DPTR,A
    252            SampleApp_NwkState = DEV_INIT;
   \   00000C   90....       MOV     DPTR,#SampleApp_NwkState
   \   00000F   7401         MOV     A,#0x1
   \   000011   F0           MOVX    @DPTR,A
    253            SampleApp_TransID = 0;
   \   000012   90....       MOV     DPTR,#SampleApp_TransID
   \   000015   7400         MOV     A,#0x0
   \   000017   F0           MOVX    @DPTR,A
    254            
    255            MT_UartInit();                  //串口初始化
   \   000018                ; Setup parameters for call to function MT_UartInit
   \   000018   12....       LCALL   ??MT_UartInit?relay
    256            MT_UartRegisterTaskID(task_id); //注册串口任务
   \   00001B                ; Setup parameters for call to function MT_UartRegisterTaskID
   \   00001B   EE           MOV     A,R6
   \   00001C   F9           MOV     R1,A
   \   00001D   12....       LCALL   ??MT_UartRegisterTaskID?relay
    257            HalUARTWrite(0,"UartInit OK\n", sizeof("UartInit OK\n"));//提示信息
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020   7C0D         MOV     R4,#0xd
   \   000022   7D00         MOV     R5,#0x0
   \   000024   7A..         MOV     R2,#`?<Constant "UartInit OK\\n">` & 0xff
   \   000026   7B..         MOV     R3,#(`?<Constant "UartInit OK\\n">` >> 8) & 0xff
   \   000028   7900         MOV     R1,#0x0
   \   00002A   12....       LCALL   ??HalUARTWrite?relay
    258            
    259            // Device hardware initialization can be added here or in main() (Zmain.c).
    260            // If the hardware is application specific - add it here.
    261            // If the hardware is other parts of the device add it in main().
    262          
    263           #if defined ( BUILD_ALL_DEVICES )
    264            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    265            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    266            // together - if they are - we will start up a coordinator. Otherwise,
    267            // the device will start as a router.
    268            if ( readCoordinatorJumper() )
    269              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
    270            else
    271              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
    272          #endif // BUILD_ALL_DEVICES
    273          
    274          #if defined ( HOLD_AUTO_START )
    275            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    276            //  from starting the device and wait for the application to
    277            //  start the device.
    278            ZDOInitDevice(0);
    279          #endif
    280          
    281            // Setup for the periodic message's destination address
    282            // Router broadcast to everyone
    283          
    284          
    285            // Setup for the flash command's destination address - Group 1
    286          //  SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
    287          //  SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
    288          //  SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;
    289          
    290            // Fill out the endpoint description.
    291            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \   00002D   90....       MOV     DPTR,#SampleApp_epDesc
   \   000030   7414         MOV     A,#0x14
   \   000032   F0           MOVX    @DPTR,A
    292            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   000033   90....       MOV     DPTR,#SampleApp_epDesc + 1
   \   000036   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   000038   F0           MOVX    @DPTR,A
   \   000039   A3           INC     DPTR
   \   00003A   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   00003C   F0           MOVX    @DPTR,A
    293            SampleApp_epDesc.simpleDesc
    294                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   00003D   90....       MOV     DPTR,#SampleApp_epDesc + 3
   \   000040   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   000042   F0           MOVX    @DPTR,A
   \   000043   A3           INC     DPTR
   \   000044   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   000046   F0           MOVX    @DPTR,A
    295            SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   000047   90....       MOV     DPTR,#SampleApp_epDesc + 5
   \   00004A   7400         MOV     A,#0x0
   \   00004C   F0           MOVX    @DPTR,A
    296          
    297            // Register the endpoint description with the AF
    298            afRegister( &SampleApp_epDesc );
   \   00004D                ; Setup parameters for call to function afRegister
   \   00004D   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   00004F   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   000051   12....       LCALL   ??afRegister?relay
   \   000054   E9           MOV     A,R1
    299          
    300            // Register for all key events - This app will handle all key events
    301            RegisterForKeys( SampleApp_TaskID );
   \   000055                ; Setup parameters for call to function RegisterForKeys
   \   000055   90....       MOV     DPTR,#SampleApp_TaskID
   \   000058   E0           MOVX    A,@DPTR
   \   000059   F9           MOV     R1,A
   \   00005A   12....       LCALL   ??RegisterForKeys?relay
   \   00005D   E9           MOV     A,R1
    302          
    303            // By default, only end devices and coordinator start out in Group 1
    304            SampleApp_Group_1.ID = SAMPLEAPP_CalN_GROUP; //0x0001
   \   00005E   90....       MOV     DPTR,#SampleApp_Group_1
   \   000061   7401         MOV     A,#0x1
   \   000063   F0           MOVX    @DPTR,A
   \   000064   A3           INC     DPTR
   \   000065   7400         MOV     A,#0x0
   \   000067   F0           MOVX    @DPTR,A
    305            //SampleApp_Group.name[0]=0; or just as bellow
    306            osal_memcpy( SampleApp_Group_1.name, "Group 1", 7 );
   \   000068                ; Setup parameters for call to function osal_memcpy
   \   000068   75....       MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
   \   00006B   75....       MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   00006E   75..00       MOV     ?V0 + 2,#0x0
   \   000071   78..         MOV     R0,#?V0 + 0
   \   000073   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000076   7C07         MOV     R4,#0x7
   \   000078   7D00         MOV     R5,#0x0
   \   00007A   7A..         MOV     R2,#(SampleApp_Group_1 + 2) & 0xff
   \   00007C   7B..         MOV     R3,#((SampleApp_Group_1 + 2) >> 8) & 0xff
   \   00007E   12....       LCALL   ??osal_memcpy?relay
   \   000081   7403         MOV     A,#0x3
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
    307            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group_1 );
   \   000086                ; Setup parameters for call to function aps_AddGroup
   \   000086   7A..         MOV     R2,#SampleApp_Group_1 & 0xff
   \   000088   7B..         MOV     R3,#(SampleApp_Group_1 >> 8) & 0xff
   \   00008A   7914         MOV     R1,#0x14
   \   00008C   12....       LCALL   ??aps_AddGroup?relay
   \   00008F   E9           MOV     A,R1
    308            
    309             // Only end devices and coordinator can joint this Group 2
    310            SampleApp_Group_2.ID = SAMPLEAPP_QUADROTOR_GROUP; //0x0002
   \   000090   90....       MOV     DPTR,#SampleApp_Group_2
   \   000093   7402         MOV     A,#0x2
   \   000095   F0           MOVX    @DPTR,A
   \   000096   A3           INC     DPTR
   \   000097   7400         MOV     A,#0x0
   \   000099   F0           MOVX    @DPTR,A
    311            //SampleApp_Group.name[0]=0; or just as bellow
    312            osal_memcpy( SampleApp_Group_2.name, "Group 2", 7 );
   \   00009A                ; Setup parameters for call to function osal_memcpy
   \   00009A   75....       MOV     ?V0 + 0,#`?<Constant "Group 2">` & 0xff
   \   00009D   75....       MOV     ?V0 + 1,#(`?<Constant "Group 2">` >> 8) & 0xff
   \   0000A0   75..00       MOV     ?V0 + 2,#0x0
   \   0000A3   78..         MOV     R0,#?V0 + 0
   \   0000A5   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000A8   7C07         MOV     R4,#0x7
   \   0000AA   7D00         MOV     R5,#0x0
   \   0000AC   7A..         MOV     R2,#(SampleApp_Group_2 + 2) & 0xff
   \   0000AE   7B..         MOV     R3,#((SampleApp_Group_2 + 2) >> 8) & 0xff
   \   0000B0   12....       LCALL   ??osal_memcpy?relay
   \   0000B3   7403         MOV     A,#0x3
   \   0000B5   12....       LCALL   ?DEALLOC_XSTACK8
    313            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group_2 );
   \   0000B8                ; Setup parameters for call to function aps_AddGroup
   \   0000B8   7A..         MOV     R2,#SampleApp_Group_2 & 0xff
   \   0000BA   7B..         MOV     R3,#(SampleApp_Group_2 >> 8) & 0xff
   \   0000BC   7914         MOV     R1,#0x14
   \   0000BE   12....       LCALL   ??aps_AddGroup?relay
   \   0000C1   E9           MOV     A,R1
    314          
    315          
    316           
    317          
    318          #if defined ( LCD_SUPPORTED )
    319            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
   \   0000C2                ; Setup parameters for call to function HalLcdWriteString
   \   0000C2   7901         MOV     R1,#0x1
   \   0000C4   7A..         MOV     R2,#`?<Constant "SampleApp">` & 0xff
   \   0000C6   7B..         MOV     R3,#(`?<Constant "SampleApp">` >> 8) & 0xff
   \   0000C8   12....       LCALL   ??HalLcdWriteString?relay
    320          #endif
    321            
    322            
    323          }
   \   0000CB   7F03         MOV     R7,#0x3
   \   0000CD   02....       LJMP    ?BANKED_LEAVE_XDATA
    324          
    325          /*********************************************************************
    326           * @fn      SampleApp_ProcessEvent
    327           *
    328           * @brief   Generic Application Task event processor.  This function
    329           *          is called to process all events for the task.  Events
    330           *          include timers, messages and any other user defined events.
    331           *
    332           * @param   task_id  - The OSAL assigned task ID.
    333           * @param   events - events to process.  This is a bit map and can
    334           *                   contain more than one event.
    335           *
    336           * @return  none
    337           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    338          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    339          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 2,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    340            afIncomingMSGPacket_t *MSGpkt;
    341            (void)task_id;  // Intentionally unreferenced parameter
    342          
    343            if ( events & SYS_EVENT_MSG )
   \   00000B   EE           MOV     A,R6
   \   00000C   5400         ANL     A,#0x0
   \   00000E   F8           MOV     R0,A
   \   00000F   EF           MOV     A,R7
   \   000010   5480         ANL     A,#0x80
   \   000012   F9           MOV     R1,A
   \   000013   E8           MOV     A,R0
   \   000014   49           ORL     A,R1
   \   000015   7003         JNZ     $+5
   \   000017   02....       LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
    344            {
    345              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00001A                ; Setup parameters for call to function osal_msg_receive
   \   00001A   90....       MOV     DPTR,#SampleApp_TaskID
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   F9           MOV     R1,A
   \   00001F   12....       LCALL   ??osal_msg_receive?relay
   \   000022   8A..         MOV     ?V0 + 4,R2
   \   000024   8B..         MOV     ?V0 + 5,R3
   \   000026   85....       MOV     ?V0 + 0,?V0 + 4
   \   000029   85....       MOV     ?V0 + 1,?V0 + 5
    346            //HalUARTWrite(0, MSGpkt->cmd.Data, MSGpkt->cmd.DataLength); //输出接收到的数据
    347              while ( MSGpkt )
   \                     ??SampleApp_ProcessEvent_1:
   \   00002C   E5..         MOV     A,?V0 + 0
   \   00002E   45..         ORL     A,?V0 + 1
   \   000030   7003         JNZ     $+5
   \   000032   02....       LJMP    ??SampleApp_ProcessEvent_2 & 0xFFFF
    348              {
    349                switch ( MSGpkt->hdr.event )
   \   000035   85..82       MOV     DPL,?V0 + 0
   \   000038   85..83       MOV     DPH,?V0 + 1
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   24E6         ADD     A,#-0x1a
   \   00003E   6026         JZ      ??SampleApp_ProcessEvent_3
   \   000040   245A         ADD     A,#0x5a
   \   000042   6007         JZ      ??SampleApp_ProcessEvent_4
   \   000044   24EF         ADD     A,#-0x11
   \   000046   6068         JZ      ??SampleApp_ProcessEvent_5
   \   000048   02....       LJMP    ??SampleApp_ProcessEvent_6 & 0xFFFF
    350                {        
    351                  // Received when a key is pressed
    352                  case KEY_CHANGE:
    353                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
   \                     ??SampleApp_ProcessEvent_4:
   \   00004B                ; Setup parameters for call to function SampleApp_HandleKeys
   \   00004B   85..82       MOV     DPL,?V0 + 0
   \   00004E   85..83       MOV     DPH,?V0 + 1
   \   000051   A3           INC     DPTR
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   E0           MOVX    A,@DPTR
   \   000055   FA           MOV     R2,A
   \   000056   85..82       MOV     DPL,?V0 + 0
   \   000059   85..83       MOV     DPH,?V0 + 1
   \   00005C   A3           INC     DPTR
   \   00005D   A3           INC     DPTR
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   F9           MOV     R1,A
   \   000060   12....       LCALL   ??SampleApp_HandleKeys?relay
    354                    break;
   \   000063   02....       LJMP    ??SampleApp_ProcessEvent_6 & 0xFFFF
    355          
    356                  // Received when a messages is received (OTA) for this endpoint
    357                  case AF_INCOMING_MSG_CMD:
    358                            if ( (SampleApp_NwkState == DEV_ZB_COORD) 
    359                                  //|| (SampleApp_NwkState == DEV_ROUTER)
    360                               //|| (SampleApp_NwkState == DEV_END_DEVICE)
    361                                    
    362                                )
   \                     ??SampleApp_ProcessEvent_3:
   \   000066   90....       MOV     DPTR,#SampleApp_NwkState
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   6409         XRL     A,#0x9
   \   00006C   7009         JNZ     ??SampleApp_ProcessEvent_7
    363                            {
    364                             SampleApp_MessageMSGCB( MSGpkt );
   \   00006E                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   00006E   AA..         MOV     R2,?V0 + 0
   \   000070   AB..         MOV     R3,?V0 + 1
   \   000072   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   000075   8037         SJMP    ??SampleApp_ProcessEvent_8
    365                            }
    366                            else if((SampleApp_NwkState == DEV_END_DEVICE))
   \                     ??SampleApp_ProcessEvent_7:
   \   000077   90....       MOV     DPTR,#SampleApp_NwkState
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   6406         XRL     A,#0x6
   \   00007D   7009         JNZ     ??SampleApp_ProcessEvent_9
    367                            {
    368                             
    369                              SampleApp_QuadrotorMSGCB(MSGpkt);
   \   00007F                ; Setup parameters for call to function SampleApp_QuadrotorMSGCB
   \   00007F   AA..         MOV     R2,?V0 + 0
   \   000081   AB..         MOV     R3,?V0 + 1
   \   000083   12....       LCALL   ??SampleApp_QuadrotorMSGCB?relay
   \   000086   8026         SJMP    ??SampleApp_ProcessEvent_8
    370                             
    371                              
    372                            }
    373                             else if(SampleApp_NwkState == DEV_ROUTER)
   \                     ??SampleApp_ProcessEvent_9:
   \   000088   90....       MOV     DPTR,#SampleApp_NwkState
   \   00008B   E0           MOVX    A,@DPTR
   \   00008C   6407         XRL     A,#0x7
   \   00008E   707C         JNZ     ??SampleApp_ProcessEvent_6
    374                            {
    375                               if(DeviceID!=6)
   \   000090   90....       MOV     DPTR,#DeviceID
   \   000093   E0           MOVX    A,@DPTR
   \   000094   6406         XRL     A,#0x6
   \   000096   7004         JNZ     ??SampleApp_ProcessEvent_10
   \   000098   A3           INC     DPTR
   \   000099   E0           MOVX    A,@DPTR
   \   00009A   6400         XRL     A,#0x0
   \                     ??SampleApp_ProcessEvent_10:
   \   00009C   6009         JZ      ??SampleApp_ProcessEvent_11
    376                              SampleApp_AnchorMSGCB(MSGpkt);
   \   00009E                ; Setup parameters for call to function SampleApp_AnchorMSGCB
   \   00009E   AA..         MOV     R2,?V0 + 0
   \   0000A0   AB..         MOV     R3,?V0 + 1
   \   0000A2   12....       LCALL   ??SampleApp_AnchorMSGCB?relay
   \   0000A5   8065         SJMP    ??SampleApp_ProcessEvent_6
    377                               else
    378                               SampleApp_Tester_calibrationMSGCB(MSGpkt);
   \                     ??SampleApp_ProcessEvent_11:
   \   0000A7                ; Setup parameters for call to function SampleApp_Tester_calibrationMSGCB
   \   0000A7   AA..         MOV     R2,?V0 + 0
   \   0000A9   AB..         MOV     R3,?V0 + 1
   \   0000AB   12....       LCALL   ??SampleApp_Tester_calibrationMSGCB?relay
    379                            }
    380          //                  else if((SampleApp_NwkState == DEV_END_DEVICE)&&(DeviceID==6))
    381          //                  {
    382          //                    SampleApp_Tester_calibrationMSGCB(MSGpkt);
    383          //                  }
    384                              
    385                    break;
   \                     ??SampleApp_ProcessEvent_8:
   \   0000AE   805C         SJMP    ??SampleApp_ProcessEvent_6
    386          
    387                  case ZDO_STATE_CHANGE:
    388                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_5:
   \   0000B0   85..82       MOV     DPL,?V0 + 0
   \   0000B3   85..83       MOV     DPH,?V0 + 1
   \   0000B6   A3           INC     DPTR
   \   0000B7   E0           MOVX    A,@DPTR
   \   0000B8   90....       MOV     DPTR,#SampleApp_NwkState
   \   0000BB   F0           MOVX    @DPTR,A
    389                    if ( //(SampleApp_NwkState == DEV_ZB_COORD) ||
    390                           (SampleApp_NwkState == DEV_ROUTER)&&(DeviceID!=6)
    391                       //|| (SampleApp_NwkState == DEV_END_DEVICE)
    392                            
    393                        )
   \   0000BC   90....       MOV     DPTR,#SampleApp_NwkState
   \   0000BF   E0           MOVX    A,@DPTR
   \   0000C0   6407         XRL     A,#0x7
   \   0000C2   7021         JNZ     ??SampleApp_ProcessEvent_12
   \   0000C4   90....       MOV     DPTR,#DeviceID
   \   0000C7   E0           MOVX    A,@DPTR
   \   0000C8   6406         XRL     A,#0x6
   \   0000CA   7004         JNZ     ??SampleApp_ProcessEvent_13
   \   0000CC   A3           INC     DPTR
   \   0000CD   E0           MOVX    A,@DPTR
   \   0000CE   6400         XRL     A,#0x0
   \                     ??SampleApp_ProcessEvent_13:
   \   0000D0   6013         JZ      ??SampleApp_ProcessEvent_12
    394                    {
    395                      // Start sending the periodic message in a regular interval.
    396                      osal_start_timerEx( SampleApp_TaskID,
    397                                        SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    398                                        SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );
   \   0000D2                ; Setup parameters for call to function osal_start_timerEx
   \   0000D2   7C32         MOV     R4,#0x32
   \   0000D4   7D00         MOV     R5,#0x0
   \   0000D6   7A01         MOV     R2,#0x1
   \   0000D8   7B00         MOV     R3,#0x0
   \   0000DA   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000DD   E0           MOVX    A,@DPTR
   \   0000DE   F9           MOV     R1,A
   \   0000DF   12....       LCALL   ??osal_start_timerEx?relay
   \   0000E2   E9           MOV     A,R1
   \   0000E3   8027         SJMP    ??SampleApp_ProcessEvent_6
    399                         
    400                    }
    401                    else if((SampleApp_NwkState == DEV_END_DEVICE)&&(DeviceID!=6))
   \                     ??SampleApp_ProcessEvent_12:
   \   0000E5   90....       MOV     DPTR,#SampleApp_NwkState
   \   0000E8   E0           MOVX    A,@DPTR
   \   0000E9   6406         XRL     A,#0x6
   \   0000EB   701F         JNZ     ??SampleApp_ProcessEvent_6
   \   0000ED   90....       MOV     DPTR,#DeviceID
   \   0000F0   E0           MOVX    A,@DPTR
   \   0000F1   6406         XRL     A,#0x6
   \   0000F3   7004         JNZ     ??SampleApp_ProcessEvent_14
   \   0000F5   A3           INC     DPTR
   \   0000F6   E0           MOVX    A,@DPTR
   \   0000F7   6400         XRL     A,#0x0
   \                     ??SampleApp_ProcessEvent_14:
   \   0000F9   6011         JZ      ??SampleApp_ProcessEvent_6
    402                    {
    403                        //Start sending quadrotor location after calculation
    404                         osal_start_timerEx( SampleApp_TaskID,
    405                                        SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT,
    406                                        SAMPLEAPP_SEND_PERIODIC_LOCATION_TIMEOUT );
   \   0000FB                ; Setup parameters for call to function osal_start_timerEx
   \   0000FB   7CE8         MOV     R4,#-0x18
   \   0000FD   7D03         MOV     R5,#0x3
   \   0000FF   7A02         MOV     R2,#0x2
   \   000101   7B00         MOV     R3,#0x0
   \   000103   90....       MOV     DPTR,#SampleApp_TaskID
   \   000106   E0           MOVX    A,@DPTR
   \   000107   F9           MOV     R1,A
   \   000108   12....       LCALL   ??osal_start_timerEx?relay
   \   00010B   E9           MOV     A,R1
    407                            
    408                    }
    409                    else
    410                    {
    411                      // Device is no longer in the network
    412                    }
    413                    break;
    414          
    415                  default:
    416                    break;
    417                }
    418          
    419                // Release the memory
    420                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_6:
   \   00010C                ; Setup parameters for call to function osal_msg_deallocate
   \   00010C   AA..         MOV     R2,?V0 + 0
   \   00010E   AB..         MOV     R3,?V0 + 1
   \   000110   12....       LCALL   ??osal_msg_deallocate?relay
   \   000113   E9           MOV     A,R1
    421          
    422                // Next - if one is available
    423                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000114                ; Setup parameters for call to function osal_msg_receive
   \   000114   90....       MOV     DPTR,#SampleApp_TaskID
   \   000117   E0           MOVX    A,@DPTR
   \   000118   F9           MOV     R1,A
   \   000119   12....       LCALL   ??osal_msg_receive?relay
   \   00011C   8A..         MOV     ?V0 + 4,R2
   \   00011E   8B..         MOV     ?V0 + 5,R3
   \   000120   85....       MOV     ?V0 + 0,?V0 + 4
   \   000123   85....       MOV     ?V0 + 1,?V0 + 5
   \   000126   02....       LJMP    ??SampleApp_ProcessEvent_1 & 0xFFFF
    424              }
    425          
    426              // return unprocessed events
    427              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_2:
   \   000129   EE           MOV     A,R6
   \   00012A   6400         XRL     A,#0x0
   \   00012C   FA           MOV     R2,A
   \   00012D   EF           MOV     A,R7
   \   00012E   6480         XRL     A,#0x80
   \   000130   FB           MOV     R3,A
   \   000131   02....       LJMP    ??SampleApp_ProcessEvent_15 & 0xFFFF
    428            }
    429          
    430            // Send a message out - This event is generated by a timer
    431            //  (setup in SampleApp_Init()).
    432            // anchor sends period message to help ed to localise itself 
    433            if ( (events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT)&&(DeviceID!=6) )
   \                     ??SampleApp_ProcessEvent_0:
   \   000134   EE           MOV     A,R6
   \   000135   A2E0         MOV     C,0xE0 /* A   */.0
   \   000137   504D         JNC     ??SampleApp_ProcessEvent_16
   \   000139   90....       MOV     DPTR,#DeviceID
   \   00013C   E0           MOVX    A,@DPTR
   \   00013D   6406         XRL     A,#0x6
   \   00013F   7004         JNZ     ??SampleApp_ProcessEvent_17
   \   000141   A3           INC     DPTR
   \   000142   E0           MOVX    A,@DPTR
   \   000143   6400         XRL     A,#0x0
   \                     ??SampleApp_ProcessEvent_17:
   \   000145   603F         JZ      ??SampleApp_ProcessEvent_16
    434            {
    435              // Send the periodic message
    436              SampleApp_Router_SendPeriodicMessage(DeviceID);
   \   000147                ; Setup parameters for call to function SampleApp_Router_SendPeriodicMessage
   \   000147   90....       MOV     DPTR,#DeviceID
   \   00014A   E0           MOVX    A,@DPTR
   \   00014B   FA           MOV     R2,A
   \   00014C   A3           INC     DPTR
   \   00014D   E0           MOVX    A,@DPTR
   \   00014E   FB           MOV     R3,A
   \   00014F   12....       LCALL   ??SampleApp_Router_SendPeriodicMessage?relay
    437          
    438              // Setup to send message again in normal period (+ a little jitter)
    439              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    440                  (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x0003)) );
   \   000152                ; Setup parameters for call to function osal_rand
   \   000152   12....       LCALL   ??osal_rand?relay
   \   000155   8A..         MOV     ?V0 + 4,R2
   \   000157   8B..         MOV     ?V0 + 5,R3
   \   000159   A8..         MOV     R0,?V0 + 4
   \   00015B   A9..         MOV     R1,?V0 + 5
   \   00015D                ; Setup parameters for call to function osal_start_timerEx
   \   00015D   E5..         MOV     A,?V0 + 4
   \   00015F   5403         ANL     A,#0x3
   \   000161   F8           MOV     R0,A
   \   000162   E5..         MOV     A,?V0 + 5
   \   000164   5400         ANL     A,#0x0
   \   000166   F9           MOV     R1,A
   \   000167   E8           MOV     A,R0
   \   000168   2432         ADD     A,#0x32
   \   00016A   FC           MOV     R4,A
   \   00016B   E9           MOV     A,R1
   \   00016C   3400         ADDC    A,#0x0
   \   00016E   FD           MOV     R5,A
   \   00016F   7A01         MOV     R2,#0x1
   \   000171   7B00         MOV     R3,#0x0
   \   000173   90....       MOV     DPTR,#SampleApp_TaskID
   \   000176   E0           MOVX    A,@DPTR
   \   000177   F9           MOV     R1,A
   \   000178   12....       LCALL   ??osal_start_timerEx?relay
   \   00017B   E9           MOV     A,R1
    441          
    442              // return unprocessed events
    443              return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
   \   00017C   EE           MOV     A,R6
   \   00017D   6401         XRL     A,#0x1
   \   00017F   FA           MOV     R2,A
   \   000180   EF           MOV     A,R7
   \   000181   6400         XRL     A,#0x0
   \   000183   FB           MOV     R3,A
   \   000184   8056         SJMP    ??SampleApp_ProcessEvent_15
    444            }
    445          
    446            
    447             // Send a location message out (ED)
    448              if ( (events & SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT)&&(DeviceID!=6) )
   \                     ??SampleApp_ProcessEvent_16:
   \   000186   EE           MOV     A,R6
   \   000187   5402         ANL     A,#0x2
   \   000189   604D         JZ      ??SampleApp_ProcessEvent_18
   \   00018B   90....       MOV     DPTR,#DeviceID
   \   00018E   E0           MOVX    A,@DPTR
   \   00018F   6406         XRL     A,#0x6
   \   000191   7004         JNZ     ??SampleApp_ProcessEvent_19
   \   000193   A3           INC     DPTR
   \   000194   E0           MOVX    A,@DPTR
   \   000195   6400         XRL     A,#0x0
   \                     ??SampleApp_ProcessEvent_19:
   \   000197   603F         JZ      ??SampleApp_ProcessEvent_18
    449            {
    450              // Send the periodic message
    451              SampleApp_Quadrotor_SendLocation(DeviceID);
   \   000199                ; Setup parameters for call to function SampleApp_Quadrotor_SendLocation
   \   000199   90....       MOV     DPTR,#DeviceID
   \   00019C   E0           MOVX    A,@DPTR
   \   00019D   FA           MOV     R2,A
   \   00019E   A3           INC     DPTR
   \   00019F   E0           MOVX    A,@DPTR
   \   0001A0   FB           MOV     R3,A
   \   0001A1   12....       LCALL   ??SampleApp_Quadrotor_SendLocation?relay
    452          
    453              // Setup to send message again in normal period (+ a little jitter)
    454              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT,
    455                  (SAMPLEAPP_SEND_PERIODIC_LOCATION_TIMEOUT + (osal_rand() & 0x000E)) );
   \   0001A4                ; Setup parameters for call to function osal_rand
   \   0001A4   12....       LCALL   ??osal_rand?relay
   \   0001A7   8A..         MOV     ?V0 + 4,R2
   \   0001A9   8B..         MOV     ?V0 + 5,R3
   \   0001AB   A8..         MOV     R0,?V0 + 4
   \   0001AD   A9..         MOV     R1,?V0 + 5
   \   0001AF                ; Setup parameters for call to function osal_start_timerEx
   \   0001AF   E5..         MOV     A,?V0 + 4
   \   0001B1   540E         ANL     A,#0xe
   \   0001B3   F8           MOV     R0,A
   \   0001B4   E5..         MOV     A,?V0 + 5
   \   0001B6   5400         ANL     A,#0x0
   \   0001B8   F9           MOV     R1,A
   \   0001B9   E8           MOV     A,R0
   \   0001BA   24E8         ADD     A,#-0x18
   \   0001BC   FC           MOV     R4,A
   \   0001BD   E9           MOV     A,R1
   \   0001BE   3403         ADDC    A,#0x3
   \   0001C0   FD           MOV     R5,A
   \   0001C1   7A02         MOV     R2,#0x2
   \   0001C3   7B00         MOV     R3,#0x0
   \   0001C5   90....       MOV     DPTR,#SampleApp_TaskID
   \   0001C8   E0           MOVX    A,@DPTR
   \   0001C9   F9           MOV     R1,A
   \   0001CA   12....       LCALL   ??osal_start_timerEx?relay
   \   0001CD   E9           MOV     A,R1
    456          
    457              // return unprocessed events
    458              return (events ^ SAMPLEAPP_SEND_PERIODIC_LOCATION_EVT);
   \   0001CE   EE           MOV     A,R6
   \   0001CF   6402         XRL     A,#0x2
   \   0001D1   FA           MOV     R2,A
   \   0001D2   EF           MOV     A,R7
   \   0001D3   6400         XRL     A,#0x0
   \   0001D5   FB           MOV     R3,A
   \   0001D6   8004         SJMP    ??SampleApp_ProcessEvent_15
    459            }
    460            
    461            
    462            
    463            // Discard unknown events
    464            return 0;
   \                     ??SampleApp_ProcessEvent_18:
   \   0001D8   7A00         MOV     R2,#0x0
   \   0001DA   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_15:
   \   0001DC   7F06         MOV     R7,#0x6
   \   0001DE   02....       LJMP    ?BANKED_LEAVE_XDATA
    465          }
    466          
    467          /*********************************************************************
    468           * Event Generation Functions
    469           */
    470          /*********************************************************************
    471           * @fn      SampleApp_HandleKeys
    472           *
    473           * @brief   Handles all key events for this device.
    474           *
    475           * @param   shift - true if in shift/alt.
    476           * @param   keys - bit field for key events. Valid entries:
    477           *                 HAL_KEY_SW_2
    478           *                 HAL_KEY_SW_1
    479           *
    480           * @return  none
    481           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    482          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    483          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   EA           MOV     A,R2
   \   000008   FF           MOV     R7,A
    484            (void)shift;  // Intentionally unreferenced parameter
    485            
    486            if ( keys & HAL_KEY_SW_1 && (DeviceID==6))
   \   000009   A2E0         MOV     C,0xE0 /* A   */.0
   \   00000B   5072         JNC     ??SampleApp_HandleKeys_0
   \   00000D   90....       MOV     DPTR,#DeviceID
   \   000010   E0           MOVX    A,@DPTR
   \   000011   6406         XRL     A,#0x6
   \   000013   7004         JNZ     ??SampleApp_HandleKeys_1
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   6400         XRL     A,#0x0
   \                     ??SampleApp_HandleKeys_1:
   \   000019   7064         JNZ     ??SampleApp_HandleKeys_0
    487            {
    488              /* This key sends the Flash Command is sent to Group 1.
    489               * This device will not receive the Flash Command from this
    490               * device (even if it belongs to group 1).
    491               */
    492              //SampleApp_SendFlashMessage( SAMPLEAPP_FLASH_DURATION );
    493               
    494               static int aindex;
    495               if(aindex!=4)
   \   00001B   90....       MOV     DPTR,#??aindex
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   6404         XRL     A,#0x4
   \   000021   7004         JNZ     ??SampleApp_HandleKeys_2
   \   000023   A3           INC     DPTR
   \   000024   E0           MOVX    A,@DPTR
   \   000025   6400         XRL     A,#0x0
   \                     ??SampleApp_HandleKeys_2:
   \   000027   604C         JZ      ??SampleApp_HandleKeys_3
    496               {
    497                  SampleApp_Tester_calibrationAMessage( aindex+1 , RssiValue[aindex] );
   \   000029                ; Setup parameters for call to function SampleApp_Tester_calibrationAMessage
   \   000029   90....       MOV     DPTR,#??aindex
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   F8           MOV     R0,A
   \   00002E   A3           INC     DPTR
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   F9           MOV     R1,A
   \   000031   E8           MOV     A,R0
   \   000032   75F004       MOV     B,#0x4
   \   000035   A4           MUL     AB
   \   000036   C8           XCH     A,R0
   \   000037   AAF0         MOV     R2,B
   \   000039   75F000       MOV     B,#0x0
   \   00003C   A4           MUL     AB
   \   00003D   2A           ADD     A,R2
   \   00003E   FA           MOV     R2,A
   \   00003F   75F004       MOV     B,#0x4
   \   000042   E9           MOV     A,R1
   \   000043   A4           MUL     AB
   \   000044   2A           ADD     A,R2
   \   000045   F9           MOV     R1,A
   \   000046   74..         MOV     A,#RssiValue & 0xff
   \   000048   28           ADD     A,R0
   \   000049   F582         MOV     DPL,A
   \   00004B   74..         MOV     A,#(RssiValue >> 8) & 0xff
   \   00004D   39           ADDC    A,R1
   \   00004E   F583         MOV     DPH,A
   \   000050   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000053   90....       MOV     DPTR,#??aindex
   \   000056   E0           MOVX    A,@DPTR
   \   000057   2401         ADD     A,#0x1
   \   000059   FA           MOV     R2,A
   \   00005A   A3           INC     DPTR
   \   00005B   E0           MOVX    A,@DPTR
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   FB           MOV     R3,A
   \   00005F   12....       LCALL   ??SampleApp_Tester_calibrationAMessage?relay
   \   000062   7404         MOV     A,#0x4
   \   000064   12....       LCALL   ?DEALLOC_XSTACK8
    498                  aindex++;
   \   000067   90....       MOV     DPTR,#??aindex
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   2401         ADD     A,#0x1
   \   00006D   F0           MOVX    @DPTR,A
   \   00006E   A3           INC     DPTR
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   3400         ADDC    A,#0x0
   \   000072   F0           MOVX    @DPTR,A
   \   000073   800A         SJMP    ??SampleApp_HandleKeys_0
    499               }
    500               else
    501               {
    502                 aindex=0;
   \                     ??SampleApp_HandleKeys_3:
   \   000075   90....       MOV     DPTR,#??aindex
   \   000078   7400         MOV     A,#0x0
   \   00007A   F0           MOVX    @DPTR,A
   \   00007B   A3           INC     DPTR
   \   00007C   7400         MOV     A,#0x0
   \   00007E   F0           MOVX    @DPTR,A
    503               }
    504            }
    505          
    506            if ( keys & HAL_KEY_SW_2 )
    507            {
    508              /* The Flashr Command is sent to Group 1.
    509               * This key toggles this device in and out of group 1.
    510               * If this device doesn't belong to group 1, this application
    511               * will not receive the Flash command sent to group 1.
    512               */
    513              
    514          //    aps_Group_t *grp;
    515          //    grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    516          //    if ( grp )
    517          //    {
    518          //      // Remove from the group
    519          //      aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    520          //    }
    521          //    else
    522          //    {
    523          //      // Add to the flash group
    524          //      aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
    525          //    }
    526            }
    527          }
   \                     ??SampleApp_HandleKeys_0:
   \   00007F   7F01         MOV     R7,#0x1
   \   000081   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??aindex:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    528          
    529          /*********************************************************************
    530           * LOCAL FUNCTIONS
    531           */
    532          
    533          /*********************************************************************
    534           * @fn      SampleApp_MessageMSGCB
    535           *
    536           * @brief   Data message processor callback.  This function processes
    537           *          any incoming data - probably from other devices.  So, based
    538           *          on cluster ID, perform the intended action.
    539           *
    540           * @param   none
    541           *
    542           * @return  none
    543           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    544          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt ) //接收数据
   \                     SampleApp_MessageMSGCB:
    545          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    546            //uint16 flashTime;
    547              float avalue=0.0f;
   \   000009   75..00       MOV     ?V0 + 0,#0x0
   \   00000C   75..00       MOV     ?V0 + 1,#0x0
   \   00000F   75..00       MOV     ?V0 + 2,#0x0
   \   000012   75..00       MOV     ?V0 + 3,#0x0
    548            switch ( pkt->clusterId )
   \   000015   8E82         MOV     DPL,R6
   \   000017   8F83         MOV     DPH,R7
   \   000019   A3           INC     DPTR
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   A3           INC     DPTR
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   F5..         MOV     ?V0 + 4,A
   \   000020   A3           INC     DPTR
   \   000021   E0           MOVX    A,@DPTR
   \   000022   F5..         MOV     ?V0 + 5,A
   \   000024   E5..         MOV     A,?V0 + 5
   \   000026   6003         JZ      $+5
   \   000028   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
   \   00002B   E5..         MOV     A,?V0 + 4
   \   00002D   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for SampleApp_MessageMSGCB>_0`:
   \   000030   00           DB        0
   \   000031   06           DB        6
   \   000032   01           DB        1
   \   000033   ....         DW        ??SampleApp_MessageMSGCB_1
   \   000035   02           DB        2
   \   000036   ....         DW        ??SampleApp_MessageMSGCB_2
   \   000038   03           DB        3
   \   000039   ....         DW        ??SampleApp_MessageMSGCB_3
   \   00003B   32           DB        50
   \   00003C   ....         DW        ??SampleApp_MessageMSGCB_4
   \   00003E   33           DB        51
   \   00003F   ....         DW        ??SampleApp_MessageMSGCB_5
   \   000041   34           DB        52
   \   000042   ....         DW        ??SampleApp_MessageMSGCB_6
   \   000044   ....         DW        ??SampleApp_MessageMSGCB_0
    549            {
    550              case SAMPLEAPP_PERIODIC_CLUSTERID:
    551                HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
   \                     ??SampleApp_MessageMSGCB_1:
   \   000046                ; Setup parameters for call to function HalUARTWrite
   \   000046   EE           MOV     A,R6
   \   000047   241F         ADD     A,#0x1f
   \   000049   F582         MOV     DPL,A
   \   00004B   EF           MOV     A,R7
   \   00004C   3400         ADDC    A,#0x0
   \   00004E   F583         MOV     DPH,A
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FC           MOV     R4,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FD           MOV     R5,A
   \   000055   EE           MOV     A,R6
   \   000056   2421         ADD     A,#0x21
   \   000058   F582         MOV     DPL,A
   \   00005A   EF           MOV     A,R7
   \   00005B   3400         ADDC    A,#0x0
   \   00005D   F583         MOV     DPH,A
   \   00005F   E0           MOVX    A,@DPTR
   \   000060   FA           MOV     R2,A
   \   000061   A3           INC     DPTR
   \   000062   E0           MOVX    A,@DPTR
   \   000063   FB           MOV     R3,A
   \   000064   7900         MOV     R1,#0x0
   \   000066   12....       LCALL   ??HalUARTWrite?relay
    552                break;
   \   000069   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    553          //    case SAMPLEAPP_PERIODIC_CLUSTERID:
    554          //      { // unsigned char* rssivalue;
    555          //        //  uint8 rssiE=25;
    556          //         // int abc=3;
    557          //         // rssivalue=&rssiE;
    558          //       // int8 rssivalue;
    559          //        rssivalue=0xff-pkt->rssi;
    560          //        unsigned char rssi_buf[3];
    561          //        rssi_buf[0]='-';
    562          //        rssi_buf[1]=rssivalue/10+0x30;
    563          //        rssi_buf[2]=rssivalue%10+0x30;
    564          //     // HalUARTWrite(0, "Rx:", 3);        //提示信息
    565          //      HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
    566          //  
    567          //                
    568          //    //  HalUARTWrite(0, "\n", 1); 
    569          //      HalUARTWrite(0, "RSSI:", 5);  
    570          //      HalUARTWrite(0,rssi_buf,3);
    571          ////     HalUARTWrite(0, "\r\n", 2); 
    572          //////     
    573          ////     uint8 lqivalue;
    574          ////     lqivalue=pkt->LinkQuality;
    575          ////     unsigned char lqi_buf[3];
    576          ////      lqi_buf[0]=lqivalue/100+0x30;
    577          ////        lqi_buf[1]=(lqivalue%100)/10+0x30;
    578          ////        lqi_buf[2]=lqivalue%10+0x30;
    579          ////      HalUARTWrite(0, "LQI:", 4);  
    580          ////      HalUARTWrite(0,lqi_buf,3);
    581          ////     HalUARTWrite(0, "\n", 1);         //回车换行
    582          //      break;
    583          //      }
    584              
    585              
    586          
    587              case LZQR_GROUP_CLUSTERID: 
    588                {
    589                  HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
   \                     ??SampleApp_MessageMSGCB_3:
   \   00006C                ; Setup parameters for call to function HalUARTWrite
   \   00006C   EE           MOV     A,R6
   \   00006D   241F         ADD     A,#0x1f
   \   00006F   F582         MOV     DPL,A
   \   000071   EF           MOV     A,R7
   \   000072   3400         ADDC    A,#0x0
   \   000074   F583         MOV     DPH,A
   \   000076   E0           MOVX    A,@DPTR
   \   000077   FC           MOV     R4,A
   \   000078   A3           INC     DPTR
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   FD           MOV     R5,A
   \   00007B   EE           MOV     A,R6
   \   00007C   2421         ADD     A,#0x21
   \   00007E   F582         MOV     DPL,A
   \   000080   EF           MOV     A,R7
   \   000081   3400         ADDC    A,#0x0
   \   000083   F583         MOV     DPH,A
   \   000085   E0           MOVX    A,@DPTR
   \   000086   FA           MOV     R2,A
   \   000087   A3           INC     DPTR
   \   000088   E0           MOVX    A,@DPTR
   \   000089   FB           MOV     R3,A
   \   00008A   7900         MOV     R1,#0x0
   \   00008C   12....       LCALL   ??HalUARTWrite?relay
    590                  
    591                  
    592             
    593                  
    594                  
    595                  break;
   \   00008F   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    596                }
    597              case CALBRATION_N_CLUSTERID:
    598                {
    599                 HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
   \                     ??SampleApp_MessageMSGCB_2:
   \   000092                ; Setup parameters for call to function HalUARTWrite
   \   000092   EE           MOV     A,R6
   \   000093   241F         ADD     A,#0x1f
   \   000095   F582         MOV     DPL,A
   \   000097   EF           MOV     A,R7
   \   000098   3400         ADDC    A,#0x0
   \   00009A   F583         MOV     DPH,A
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   FC           MOV     R4,A
   \   00009E   A3           INC     DPTR
   \   00009F   E0           MOVX    A,@DPTR
   \   0000A0   FD           MOV     R5,A
   \   0000A1   EE           MOV     A,R6
   \   0000A2   2421         ADD     A,#0x21
   \   0000A4   F582         MOV     DPL,A
   \   0000A6   EF           MOV     A,R7
   \   0000A7   3400         ADDC    A,#0x0
   \   0000A9   F583         MOV     DPH,A
   \   0000AB   E0           MOVX    A,@DPTR
   \   0000AC   FA           MOV     R2,A
   \   0000AD   A3           INC     DPTR
   \   0000AE   E0           MOVX    A,@DPTR
   \   0000AF   FB           MOV     R3,A
   \   0000B0   7900         MOV     R1,#0x0
   \   0000B2   12....       LCALL   ??HalUARTWrite?relay
    600                  byte alphaindex;
    601                  alphaindex=*(pkt->cmd.Data);
   \   0000B5   EE           MOV     A,R6
   \   0000B6   2421         ADD     A,#0x21
   \   0000B8   F582         MOV     DPL,A
   \   0000BA   EF           MOV     A,R7
   \   0000BB   3400         ADDC    A,#0x0
   \   0000BD   F583         MOV     DPH,A
   \   0000BF   E0           MOVX    A,@DPTR
   \   0000C0   F8           MOV     R0,A
   \   0000C1   A3           INC     DPTR
   \   0000C2   E0           MOVX    A,@DPTR
   \   0000C3   F583         MOV     DPH,A
   \   0000C5   8882         MOV     DPL,R0
   \   0000C7   E0           MOVX    A,@DPTR
   \   0000C8   FD           MOV     R5,A
    602                  if(alphaindex=='A')
   \   0000C9   7441         MOV     A,#0x41
   \   0000CB   6D           XRL     A,R5
   \   0000CC   6003         JZ      $+5
   \   0000CE   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    603                   {  
    604                        byte index;
    605                        index=*(pkt->cmd.Data+1);
   \   0000D1   EE           MOV     A,R6
   \   0000D2   2421         ADD     A,#0x21
   \   0000D4   F582         MOV     DPL,A
   \   0000D6   EF           MOV     A,R7
   \   0000D7   3400         ADDC    A,#0x0
   \   0000D9   F583         MOV     DPH,A
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   F8           MOV     R0,A
   \   0000DD   A3           INC     DPTR
   \   0000DE   E0           MOVX    A,@DPTR
   \   0000DF   F583         MOV     DPH,A
   \   0000E1   8882         MOV     DPL,R0
   \   0000E3   A3           INC     DPTR
   \   0000E4   E0           MOVX    A,@DPTR
   \   0000E5   FC           MOV     R4,A
    606                        avalue=10.0f*(float)((int)(*(pkt->cmd.Data+3))-48)+(float)((int)(*(pkt->cmd.Data+4))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+6))-48);
   \   0000E6   EE           MOV     A,R6
   \   0000E7   2421         ADD     A,#0x21
   \   0000E9   F582         MOV     DPL,A
   \   0000EB   EF           MOV     A,R7
   \   0000EC   3400         ADDC    A,#0x0
   \   0000EE   F583         MOV     DPH,A
   \   0000F0   E0           MOVX    A,@DPTR
   \   0000F1   F8           MOV     R0,A
   \   0000F2   A3           INC     DPTR
   \   0000F3   E0           MOVX    A,@DPTR
   \   0000F4   F583         MOV     DPH,A
   \   0000F6   8882         MOV     DPL,R0
   \   0000F8   A3           INC     DPTR
   \   0000F9   A3           INC     DPTR
   \   0000FA   A3           INC     DPTR
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   F8           MOV     R0,A
   \   0000FD   7900         MOV     R1,#0x0
   \   0000FF   24D0         ADD     A,#-0x30
   \   000101   F5..         MOV     ?V0 + 4,A
   \   000103   E9           MOV     A,R1
   \   000104   34FF         ADDC    A,#-0x1
   \   000106   F5..         MOV     ?V0 + 5,A
   \   000108   E5..         MOV     A,?V0 + 5
   \   00010A   33           RLC     A
   \   00010B   95E0         SUBB    A,0xE0 /* A   */
   \   00010D   F5..         MOV     ?V0 + 6,A
   \   00010F   F5..         MOV     ?V0 + 7,A
   \   000111   78..         MOV     R0,#?V0 + 4
   \   000113   12....       LCALL   ?L_TO_FLT
   \   000116   90....       MOV     DPTR,#__Constant_41200000
   \   000119   78..         MOV     R0,#?V0 + 8
   \   00011B   12....       LCALL   ?L_MOV_X
   \   00011E   78..         MOV     R0,#?V0 + 4
   \   000120   79..         MOV     R1,#?V0 + 8
   \   000122   12....       LCALL   ?FLT_MUL
   \   000125   EE           MOV     A,R6
   \   000126   2421         ADD     A,#0x21
   \   000128   F582         MOV     DPL,A
   \   00012A   EF           MOV     A,R7
   \   00012B   3400         ADDC    A,#0x0
   \   00012D   F583         MOV     DPH,A
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   F8           MOV     R0,A
   \   000131   A3           INC     DPTR
   \   000132   E0           MOVX    A,@DPTR
   \   000133   F583         MOV     DPH,A
   \   000135   8882         MOV     DPL,R0
   \   000137   A3           INC     DPTR
   \   000138   A3           INC     DPTR
   \   000139   A3           INC     DPTR
   \   00013A   A3           INC     DPTR
   \   00013B   E0           MOVX    A,@DPTR
   \   00013C   F8           MOV     R0,A
   \   00013D   7900         MOV     R1,#0x0
   \   00013F   24D0         ADD     A,#-0x30
   \   000141   F5..         MOV     ?V0 + 8,A
   \   000143   E9           MOV     A,R1
   \   000144   34FF         ADDC    A,#-0x1
   \   000146   F5..         MOV     ?V0 + 9,A
   \   000148   E5..         MOV     A,?V0 + 9
   \   00014A   33           RLC     A
   \   00014B   95E0         SUBB    A,0xE0 /* A   */
   \   00014D   F5..         MOV     ?V0 + 10,A
   \   00014F   F5..         MOV     ?V0 + 11,A
   \   000151   78..         MOV     R0,#?V0 + 8
   \   000153   12....       LCALL   ?L_TO_FLT
   \   000156   78..         MOV     R0,#?V0 + 4
   \   000158   79..         MOV     R1,#?V0 + 8
   \   00015A   12....       LCALL   ?FLT_ADD
   \   00015D   EE           MOV     A,R6
   \   00015E   2421         ADD     A,#0x21
   \   000160   F582         MOV     DPL,A
   \   000162   EF           MOV     A,R7
   \   000163   3400         ADDC    A,#0x0
   \   000165   F583         MOV     DPH,A
   \   000167   E0           MOVX    A,@DPTR
   \   000168   F8           MOV     R0,A
   \   000169   A3           INC     DPTR
   \   00016A   E0           MOVX    A,@DPTR
   \   00016B   C8           XCH     A,R0
   \   00016C   2406         ADD     A,#0x6
   \   00016E   F582         MOV     DPL,A
   \   000170   E8           MOV     A,R0
   \   000171   3400         ADDC    A,#0x0
   \   000173   F583         MOV     DPH,A
   \   000175   E0           MOVX    A,@DPTR
   \   000176   F8           MOV     R0,A
   \   000177   7900         MOV     R1,#0x0
   \   000179   24D0         ADD     A,#-0x30
   \   00017B   F5..         MOV     ?V0 + 12,A
   \   00017D   E9           MOV     A,R1
   \   00017E   34FF         ADDC    A,#-0x1
   \   000180   F5..         MOV     ?V0 + 13,A
   \   000182   E5..         MOV     A,?V0 + 13
   \   000184   33           RLC     A
   \   000185   95E0         SUBB    A,0xE0 /* A   */
   \   000187   F5..         MOV     ?V0 + 14,A
   \   000189   F5..         MOV     ?V0 + 15,A
   \   00018B   78..         MOV     R0,#?V0 + 12
   \   00018D   12....       LCALL   ?L_TO_FLT
   \   000190   90....       MOV     DPTR,#__Constant_3dcccccd
   \   000193   78..         MOV     R0,#?V0 + 8
   \   000195   12....       LCALL   ?L_MOV_X
   \   000198   78..         MOV     R0,#?V0 + 12
   \   00019A   79..         MOV     R1,#?V0 + 8
   \   00019C   12....       LCALL   ?FLT_MUL
   \   00019F   78..         MOV     R0,#?V0 + 4
   \   0001A1   79..         MOV     R1,#?V0 + 12
   \   0001A3   12....       LCALL   ?FLT_ADD
   \   0001A6   85....       MOV     ?V0 + 0,?V0 + 4
   \   0001A9   85....       MOV     ?V0 + 1,?V0 + 5
   \   0001AC   85....       MOV     ?V0 + 2,?V0 + 6
   \   0001AF   85....       MOV     ?V0 + 3,?V0 + 7
    607                        if(avalue>0)   
   \   0001B2   90....       MOV     DPTR,#__Constant_1
   \   0001B5   78..         MOV     R0,#?V0 + 4
   \   0001B7   12....       LCALL   ?L_MOV_X
   \   0001BA   78..         MOV     R0,#?V0 + 0
   \   0001BC   79..         MOV     R1,#?V0 + 4
   \   0001BE   12....       LCALL   ?FLT_GE
   \   0001C1   5029         JNC     ??SampleApp_MessageMSGCB_0
    608                        {
    609                            switch (index)
   \   0001C3   7431         MOV     A,#0x31
   \   0001C5   6C           XRL     A,R4
   \   0001C6   7008         JNZ     ??SampleApp_MessageMSGCB_4
    610                                 case '1':
    611                                    {
    612                                            AValue[0]=avalue;
   \   0001C8   90....       MOV     DPTR,#AValue
   \   0001CB   78..         MOV     R0,#?V0 + 0
   \   0001CD   12....       LCALL   ?L_MOV_TO_X
    613                                            break;
    614                                     }
    615                                 case '2':
    616                                    {
    617                                            AValue[1]=avalue;
   \                     ??SampleApp_MessageMSGCB_4:
   \   0001D0   90....       MOV     DPTR,#AValue + 4
   \   0001D3   78..         MOV     R0,#?V0 + 0
   \   0001D5   12....       LCALL   ?L_MOV_TO_X
    618                                            break;
   \   0001D8   8012         SJMP    ??SampleApp_MessageMSGCB_0
    619                                     }
    620                                 case '3':
    621                                    {
    622                                            AValue[2]=avalue;
   \                     ??SampleApp_MessageMSGCB_5:
   \   0001DA   90....       MOV     DPTR,#AValue + 8
   \   0001DD   78..         MOV     R0,#?V0 + 0
   \   0001DF   12....       LCALL   ?L_MOV_TO_X
    623                                            break;
   \   0001E2   8008         SJMP    ??SampleApp_MessageMSGCB_0
    624                                     }
    625                                 case '4':
    626                                    {
    627                                            AValue[3]=avalue;
   \                     ??SampleApp_MessageMSGCB_6:
   \   0001E4   90....       MOV     DPTR,#AValue + 12
   \   0001E7   78..         MOV     R0,#?V0 + 0
   \   0001E9   12....       LCALL   ?L_MOV_TO_X
    628                                            break;
    629                                     }
    630                      
    631                            break;
    632                        }
    633                     }
    634                }
    635          
    636            }
    637          }
   \                     ??SampleApp_MessageMSGCB_0:
   \   0001EC   7F10         MOV     R7,#0x10
   \   0001EE   02....       LJMP    ?BANKED_LEAVE_XDATA
    638          
    639          /*********************************************************************
    640           * @fn      SampleApp_QuadrotorMSGCB
    641           *
    642           * @brief   Data message processor callback.  This function processes
    643           *          any incoming data - probably from other devices.  So, based
    644           *          on cluster ID, perform the intended action.
    645           *
    646           * @param   none
    647           *
    648           * @return  none
    649           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    650          void SampleApp_QuadrotorMSGCB( afIncomingMSGPacket_t *pkt ) //receive data for ed
   \                     SampleApp_QuadrotorMSGCB:
    651          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    652            float avalue=0.0f;
   \   00000E   75..00       MOV     ?V0 + 0,#0x0
   \   000011   75..00       MOV     ?V0 + 1,#0x0
   \   000014   75..00       MOV     ?V0 + 2,#0x0
   \   000017   75..00       MOV     ?V0 + 3,#0x0
    653            switch ( pkt->clusterId )
   \   00001A   8E82         MOV     DPL,R6
   \   00001C   8F83         MOV     DPH,R7
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   E0           MOVX    A,@DPTR
   \   000023   F5..         MOV     ?V0 + 4,A
   \   000025   A3           INC     DPTR
   \   000026   E0           MOVX    A,@DPTR
   \   000027   F5..         MOV     ?V0 + 5,A
   \   000029   E5..         MOV     A,?V0 + 5
   \   00002B   6003         JZ      $+5
   \   00002D   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
   \   000030   E5..         MOV     A,?V0 + 4
   \   000032   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for SampleApp_QuadrotorMSGCB>_0`:
   \   000035   01           DB        1
   \   000036   02           DB        2
   \   000037   03           DB        3
   \   000038   ....         DW        ??SampleApp_QuadrotorMSGCB_1
   \   00003A   04           DB        4
   \   00003B   01           DB        1
   \   00003C   ....         DW        ??SampleApp_QuadrotorMSGCB_2
   \   00003E   32           DB        50
   \   00003F   ....         DW        ??SampleApp_QuadrotorMSGCB_3
   \   000041   33           DB        51
   \   000042   ....         DW        ??SampleApp_QuadrotorMSGCB_4
   \   000044   34           DB        52
   \   000045   ....         DW        ??SampleApp_QuadrotorMSGCB_5
   \   000047   ....         DW        ??SampleApp_QuadrotorMSGCB_0
    654            {
    655               
    656              case SAMPLEAPP_PERIODIC_CLUSTERID:
    657                { 
    658                  
    659                  byte index;
    660                  index=*(pkt->cmd.Data+1);
   \                     ??SampleApp_QuadrotorMSGCB_2:
   \   000049   EE           MOV     A,R6
   \   00004A   2421         ADD     A,#0x21
   \   00004C   F582         MOV     DPL,A
   \   00004E   EF           MOV     A,R7
   \   00004F   3400         ADDC    A,#0x0
   \   000051   F583         MOV     DPH,A
   \   000053   E0           MOVX    A,@DPTR
   \   000054   F8           MOV     R0,A
   \   000055   A3           INC     DPTR
   \   000056   E0           MOVX    A,@DPTR
   \   000057   F583         MOV     DPH,A
   \   000059   8882         MOV     DPL,R0
   \   00005B   A3           INC     DPTR
   \   00005C   E0           MOVX    A,@DPTR
   \   00005D   F5..         MOV     ?V0 + 4,A
    661                  rssivalue=(0xff-pkt->rssi);
   \   00005F   EE           MOV     A,R6
   \   000060   2418         ADD     A,#0x18
   \   000062   F582         MOV     DPL,A
   \   000064   EF           MOV     A,R7
   \   000065   3400         ADDC    A,#0x0
   \   000067   F583         MOV     DPH,A
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   F8           MOV     R0,A
   \   00006B   74FF         MOV     A,#-0x1
   \   00006D   C3           CLR     C
   \   00006E   98           SUBB    A,R0
   \   00006F   90....       MOV     DPTR,#rssivalue
   \   000072   F0           MOVX    @DPTR,A
    662                  
    663                  switch (index)
   \   000073   E5..         MOV     A,?V0 + 4
   \   000075   24CF         ADD     A,#-0x31
   \   000077   600F         JZ      ??SampleApp_QuadrotorMSGCB_6
   \   000079   14           DEC     A
   \   00007A   603A         JZ      ??SampleApp_QuadrotorMSGCB_7
   \   00007C   14           DEC     A
   \   00007D   6064         JZ      ??SampleApp_QuadrotorMSGCB_8
   \   00007F   14           DEC     A
   \   000080   7003         JNZ     $+5
   \   000082   02....       LJMP    ??SampleApp_QuadrotorMSGCB_9 & 0xFFFF
   \   000085   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    664                  {
    665                      case '1':
    666                        {
    667          //                //average filter
    668          //                perRssiBuf1[i1]=rssivalue;
    669          //                
    670          //                if(i1==31)
    671          //                {
    672          //                  i1=0;
    673          //                  /*average filter*/
    674          ////                  RssiValue[0]=averagefilter(perRssiBuf1,RSSI_AVG_WINDOW_SIZE);
    675          //                  /*gausian filter*/
    676          //                  RssiValue[0]=gaussianfilter(perRssiBuf1,RSSI_AVG_WINDOW_SIZE);
    677          //
    678          //                }
    679          //                i1++;
    680          //                
    681                          //moving average filter
    682                          moving_average(rssivalue, perRssiBuf1, RSSI_AVG_WINDOW_SIZE-1, imof1, &RssiValue[0]);
   \                     ??SampleApp_QuadrotorMSGCB_6:
   \   000088                ; Setup parameters for call to function moving_average
   \   000088   75....       MOV     ?V0 + 6,#RssiValue & 0xff
   \   00008B   75....       MOV     ?V0 + 7,#(RssiValue >> 8) & 0xff
   \   00008E   78..         MOV     R0,#?V0 + 6
   \   000090   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000093   75....       MOV     ?V0 + 6,#imof1 & 0xff
   \   000096   75....       MOV     ?V0 + 7,#(imof1 >> 8) & 0xff
   \   000099   78..         MOV     R0,#?V0 + 6
   \   00009B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009E   7C1F         MOV     R4,#0x1f
   \   0000A0   7D00         MOV     R5,#0x0
   \   0000A2   7A..         MOV     R2,#perRssiBuf1 & 0xff
   \   0000A4   7B..         MOV     R3,#(perRssiBuf1 >> 8) & 0xff
   \   0000A6   90....       MOV     DPTR,#rssivalue
   \   0000A9   E0           MOVX    A,@DPTR
   \   0000AA   F9           MOV     R1,A
   \   0000AB   12....       LCALL   ??moving_average?relay
   \   0000AE   7404         MOV     A,#0x4
   \   0000B0   12....       LCALL   ?DEALLOC_XSTACK8
    683                        }
    684                      
    685                            break;
   \   0000B3   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    686                      case '2':
    687                        {
    688          //                perRssiBuf2[i2]=rssivalue;
    689          //                
    690          //                if(i2==31)
    691          //                {
    692          //                  i2=0;
    693          //                  /*average filter*/
    694          ////                  RssiValue[1]=averagefilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
    695          //                  /*gausian filter*/
    696          //                  RssiValue[1]=gaussianfilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
    697          //                }
    698          //                i2++;
    699                          //moving average filter
    700                          moving_average(rssivalue, perRssiBuf2, RSSI_AVG_WINDOW_SIZE-1, imof2, &RssiValue[1]);
   \                     ??SampleApp_QuadrotorMSGCB_7:
   \   0000B6                ; Setup parameters for call to function moving_average
   \   0000B6   75....       MOV     ?V0 + 6,#(RssiValue + 4) & 0xff
   \   0000B9   75....       MOV     ?V0 + 7,#((RssiValue + 4) >> 8) & 0xff
   \   0000BC   78..         MOV     R0,#?V0 + 6
   \   0000BE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C1   75....       MOV     ?V0 + 6,#imof2 & 0xff
   \   0000C4   75....       MOV     ?V0 + 7,#(imof2 >> 8) & 0xff
   \   0000C7   78..         MOV     R0,#?V0 + 6
   \   0000C9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CC   7C1F         MOV     R4,#0x1f
   \   0000CE   7D00         MOV     R5,#0x0
   \   0000D0   7A..         MOV     R2,#perRssiBuf2 & 0xff
   \   0000D2   7B..         MOV     R3,#(perRssiBuf2 >> 8) & 0xff
   \   0000D4   90....       MOV     DPTR,#rssivalue
   \   0000D7   E0           MOVX    A,@DPTR
   \   0000D8   F9           MOV     R1,A
   \   0000D9   12....       LCALL   ??moving_average?relay
   \   0000DC   7404         MOV     A,#0x4
   \   0000DE   12....       LCALL   ?DEALLOC_XSTACK8
    701                        }
    702                            break;
   \   0000E1   8058         SJMP    ??SampleApp_QuadrotorMSGCB_10
    703                      case '3':
    704                        {
    705          //                perRssiBuf3[i3]=rssivalue;
    706          //                
    707          //                if(i3==31)
    708          //                {
    709          //                  i3=0;
    710          //                   /*average filter*/
    711          ////                  RssiValue[2]=averagefilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
    712          //                  /*gausian filter*/
    713          //                  RssiValue[2]=gaussianfilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
    714          //                }
    715          //                i3++;
    716                          //moving average filter
    717                          moving_average(rssivalue, perRssiBuf3, RSSI_AVG_WINDOW_SIZE-1, imof3, &RssiValue[2]);
   \                     ??SampleApp_QuadrotorMSGCB_8:
   \   0000E3                ; Setup parameters for call to function moving_average
   \   0000E3   75....       MOV     ?V0 + 6,#(RssiValue + 8) & 0xff
   \   0000E6   75....       MOV     ?V0 + 7,#((RssiValue + 8) >> 8) & 0xff
   \   0000E9   78..         MOV     R0,#?V0 + 6
   \   0000EB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000EE   75....       MOV     ?V0 + 6,#imof3 & 0xff
   \   0000F1   75....       MOV     ?V0 + 7,#(imof3 >> 8) & 0xff
   \   0000F4   78..         MOV     R0,#?V0 + 6
   \   0000F6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F9   7C1F         MOV     R4,#0x1f
   \   0000FB   7D00         MOV     R5,#0x0
   \   0000FD   7A..         MOV     R2,#perRssiBuf3 & 0xff
   \   0000FF   7B..         MOV     R3,#(perRssiBuf3 >> 8) & 0xff
   \   000101   90....       MOV     DPTR,#rssivalue
   \   000104   E0           MOVX    A,@DPTR
   \   000105   F9           MOV     R1,A
   \   000106   12....       LCALL   ??moving_average?relay
   \   000109   7404         MOV     A,#0x4
   \   00010B   12....       LCALL   ?DEALLOC_XSTACK8
    718                        }
    719                            break;
   \   00010E   802B         SJMP    ??SampleApp_QuadrotorMSGCB_10
    720                      case '4':
    721                        {
    722          //                perRssiBuf4[i4]=rssivalue;
    723          //                
    724          //                if(i4==31)
    725          //                {
    726          //                  i4=0;
    727          //                   /*average filter*/
    728          ////                  RssiValue[3]=averagefilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
    729          //                  /*gausian filter*/
    730          //                  RssiValue[3]=gaussianfilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
    731          //                }
    732          //                i4++;
    733                          //moving average filter
    734                           moving_average(rssivalue, perRssiBuf4, RSSI_AVG_WINDOW_SIZE-1, imof4, &RssiValue[3]);
   \                     ??SampleApp_QuadrotorMSGCB_9:
   \   000110                ; Setup parameters for call to function moving_average
   \   000110   75....       MOV     ?V0 + 6,#(RssiValue + 12) & 0xff
   \   000113   75....       MOV     ?V0 + 7,#((RssiValue + 12) >> 8) & 0xff
   \   000116   78..         MOV     R0,#?V0 + 6
   \   000118   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011B   75....       MOV     ?V0 + 6,#imof4 & 0xff
   \   00011E   75....       MOV     ?V0 + 7,#(imof4 >> 8) & 0xff
   \   000121   78..         MOV     R0,#?V0 + 6
   \   000123   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000126   7C1F         MOV     R4,#0x1f
   \   000128   7D00         MOV     R5,#0x0
   \   00012A   7A..         MOV     R2,#perRssiBuf4 & 0xff
   \   00012C   7B..         MOV     R3,#(perRssiBuf4 >> 8) & 0xff
   \   00012E   90....       MOV     DPTR,#rssivalue
   \   000131   E0           MOVX    A,@DPTR
   \   000132   F9           MOV     R1,A
   \   000133   12....       LCALL   ??moving_average?relay
   \   000136   7404         MOV     A,#0x4
   \   000138   12....       LCALL   ?DEALLOC_XSTACK8
    735                        }
    736                            break;    
    737                      default:
    738                      
    739                             break;
    740                   }
    741                  break;
   \                     ??SampleApp_QuadrotorMSGCB_10:
   \   00013B   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    742                }
    743          
    744              case LZQR_GROUP_CLUSTERID: // position of other quadrotors
    745                    {
    746                      //HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
    747                      
    748                 
    749                      
    750                      
    751                     // break;
    752                    }
    753              
    754          
    755               case CALBRATION_N_CLUSTERID:
    756                {
    757                  HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
   \                     ??SampleApp_QuadrotorMSGCB_1:
   \   00013E                ; Setup parameters for call to function HalUARTWrite
   \   00013E   EE           MOV     A,R6
   \   00013F   241F         ADD     A,#0x1f
   \   000141   F582         MOV     DPL,A
   \   000143   EF           MOV     A,R7
   \   000144   3400         ADDC    A,#0x0
   \   000146   F583         MOV     DPH,A
   \   000148   E0           MOVX    A,@DPTR
   \   000149   FC           MOV     R4,A
   \   00014A   A3           INC     DPTR
   \   00014B   E0           MOVX    A,@DPTR
   \   00014C   FD           MOV     R5,A
   \   00014D   EE           MOV     A,R6
   \   00014E   2421         ADD     A,#0x21
   \   000150   F582         MOV     DPL,A
   \   000152   EF           MOV     A,R7
   \   000153   3400         ADDC    A,#0x0
   \   000155   F583         MOV     DPH,A
   \   000157   E0           MOVX    A,@DPTR
   \   000158   FA           MOV     R2,A
   \   000159   A3           INC     DPTR
   \   00015A   E0           MOVX    A,@DPTR
   \   00015B   FB           MOV     R3,A
   \   00015C   7900         MOV     R1,#0x0
   \   00015E   12....       LCALL   ??HalUARTWrite?relay
    758                  byte alphaindex;
    759                  alphaindex=*(pkt->cmd.Data);
   \   000161   EE           MOV     A,R6
   \   000162   2421         ADD     A,#0x21
   \   000164   F582         MOV     DPL,A
   \   000166   EF           MOV     A,R7
   \   000167   3400         ADDC    A,#0x0
   \   000169   F583         MOV     DPH,A
   \   00016B   E0           MOVX    A,@DPTR
   \   00016C   F8           MOV     R0,A
   \   00016D   A3           INC     DPTR
   \   00016E   E0           MOVX    A,@DPTR
   \   00016F   F583         MOV     DPH,A
   \   000171   8882         MOV     DPL,R0
   \   000173   E0           MOVX    A,@DPTR
   \   000174   85..82       MOV     DPL,?XSP + 0
   \   000177   85..83       MOV     DPH,?XSP + 1
   \   00017A   F0           MOVX    @DPTR,A
    760                  if(alphaindex=='A')
   \   00017B   85..82       MOV     DPL,?XSP + 0
   \   00017E   85..83       MOV     DPH,?XSP + 1
   \   000181   E0           MOVX    A,@DPTR
   \   000182   6441         XRL     A,#0x41
   \   000184   6003         JZ      $+5
   \   000186   02....       LJMP    ??SampleApp_QuadrotorMSGCB_11 & 0xFFFF
    761                   {  
    762                        byte index;
    763                        index=*(pkt->cmd.Data+1);
   \   000189   EE           MOV     A,R6
   \   00018A   2421         ADD     A,#0x21
   \   00018C   F582         MOV     DPL,A
   \   00018E   EF           MOV     A,R7
   \   00018F   3400         ADDC    A,#0x0
   \   000191   F583         MOV     DPH,A
   \   000193   E0           MOVX    A,@DPTR
   \   000194   F8           MOV     R0,A
   \   000195   A3           INC     DPTR
   \   000196   E0           MOVX    A,@DPTR
   \   000197   F583         MOV     DPH,A
   \   000199   8882         MOV     DPL,R0
   \   00019B   A3           INC     DPTR
   \   00019C   E0           MOVX    A,@DPTR
   \   00019D   FC           MOV     R4,A
    764                        avalue=10.0f*(float)((int)(*(pkt->cmd.Data+3))-48)+(float)((int)(*(pkt->cmd.Data+4))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+6))-48);
   \   00019E   EE           MOV     A,R6
   \   00019F   2421         ADD     A,#0x21
   \   0001A1   F582         MOV     DPL,A
   \   0001A3   EF           MOV     A,R7
   \   0001A4   3400         ADDC    A,#0x0
   \   0001A6   F583         MOV     DPH,A
   \   0001A8   E0           MOVX    A,@DPTR
   \   0001A9   F8           MOV     R0,A
   \   0001AA   A3           INC     DPTR
   \   0001AB   E0           MOVX    A,@DPTR
   \   0001AC   F583         MOV     DPH,A
   \   0001AE   8882         MOV     DPL,R0
   \   0001B0   A3           INC     DPTR
   \   0001B1   A3           INC     DPTR
   \   0001B2   A3           INC     DPTR
   \   0001B3   E0           MOVX    A,@DPTR
   \   0001B4   F8           MOV     R0,A
   \   0001B5   7900         MOV     R1,#0x0
   \   0001B7   24D0         ADD     A,#-0x30
   \   0001B9   F5..         MOV     ?V0 + 4,A
   \   0001BB   E9           MOV     A,R1
   \   0001BC   34FF         ADDC    A,#-0x1
   \   0001BE   F5..         MOV     ?V0 + 5,A
   \   0001C0   E5..         MOV     A,?V0 + 5
   \   0001C2   33           RLC     A
   \   0001C3   95E0         SUBB    A,0xE0 /* A   */
   \   0001C5   F5..         MOV     ?V0 + 6,A
   \   0001C7   F5..         MOV     ?V0 + 7,A
   \   0001C9   78..         MOV     R0,#?V0 + 4
   \   0001CB   12....       LCALL   ?L_TO_FLT
   \   0001CE   90....       MOV     DPTR,#__Constant_41200000
   \   0001D1   78..         MOV     R0,#?V0 + 8
   \   0001D3   12....       LCALL   ?L_MOV_X
   \   0001D6   78..         MOV     R0,#?V0 + 4
   \   0001D8   79..         MOV     R1,#?V0 + 8
   \   0001DA   12....       LCALL   ?FLT_MUL
   \   0001DD   EE           MOV     A,R6
   \   0001DE   2421         ADD     A,#0x21
   \   0001E0   F582         MOV     DPL,A
   \   0001E2   EF           MOV     A,R7
   \   0001E3   3400         ADDC    A,#0x0
   \   0001E5   F583         MOV     DPH,A
   \   0001E7   E0           MOVX    A,@DPTR
   \   0001E8   F8           MOV     R0,A
   \   0001E9   A3           INC     DPTR
   \   0001EA   E0           MOVX    A,@DPTR
   \   0001EB   F583         MOV     DPH,A
   \   0001ED   8882         MOV     DPL,R0
   \   0001EF   A3           INC     DPTR
   \   0001F0   A3           INC     DPTR
   \   0001F1   A3           INC     DPTR
   \   0001F2   A3           INC     DPTR
   \   0001F3   E0           MOVX    A,@DPTR
   \   0001F4   F8           MOV     R0,A
   \   0001F5   7900         MOV     R1,#0x0
   \   0001F7   24D0         ADD     A,#-0x30
   \   0001F9   F5..         MOV     ?V0 + 8,A
   \   0001FB   E9           MOV     A,R1
   \   0001FC   34FF         ADDC    A,#-0x1
   \   0001FE   F5..         MOV     ?V0 + 9,A
   \   000200   E5..         MOV     A,?V0 + 9
   \   000202   33           RLC     A
   \   000203   95E0         SUBB    A,0xE0 /* A   */
   \   000205   F5..         MOV     ?V0 + 10,A
   \   000207   F5..         MOV     ?V0 + 11,A
   \   000209   78..         MOV     R0,#?V0 + 8
   \   00020B   12....       LCALL   ?L_TO_FLT
   \   00020E   78..         MOV     R0,#?V0 + 4
   \   000210   79..         MOV     R1,#?V0 + 8
   \   000212   12....       LCALL   ?FLT_ADD
   \   000215   EE           MOV     A,R6
   \   000216   2421         ADD     A,#0x21
   \   000218   F582         MOV     DPL,A
   \   00021A   EF           MOV     A,R7
   \   00021B   3400         ADDC    A,#0x0
   \   00021D   F583         MOV     DPH,A
   \   00021F   E0           MOVX    A,@DPTR
   \   000220   F8           MOV     R0,A
   \   000221   A3           INC     DPTR
   \   000222   E0           MOVX    A,@DPTR
   \   000223   C8           XCH     A,R0
   \   000224   2406         ADD     A,#0x6
   \   000226   F582         MOV     DPL,A
   \   000228   E8           MOV     A,R0
   \   000229   3400         ADDC    A,#0x0
   \   00022B   F583         MOV     DPH,A
   \   00022D   E0           MOVX    A,@DPTR
   \   00022E   F8           MOV     R0,A
   \   00022F   7900         MOV     R1,#0x0
   \   000231   24D0         ADD     A,#-0x30
   \   000233   F5..         MOV     ?V0 + 12,A
   \   000235   E9           MOV     A,R1
   \   000236   34FF         ADDC    A,#-0x1
   \   000238   F5..         MOV     ?V0 + 13,A
   \   00023A   E5..         MOV     A,?V0 + 13
   \   00023C   33           RLC     A
   \   00023D   95E0         SUBB    A,0xE0 /* A   */
   \   00023F   F5..         MOV     ?V0 + 14,A
   \   000241   F5..         MOV     ?V0 + 15,A
   \   000243   78..         MOV     R0,#?V0 + 12
   \   000245   12....       LCALL   ?L_TO_FLT
   \   000248   90....       MOV     DPTR,#__Constant_3dcccccd
   \   00024B   78..         MOV     R0,#?V0 + 8
   \   00024D   12....       LCALL   ?L_MOV_X
   \   000250   78..         MOV     R0,#?V0 + 12
   \   000252   79..         MOV     R1,#?V0 + 8
   \   000254   12....       LCALL   ?FLT_MUL
   \   000257   78..         MOV     R0,#?V0 + 4
   \   000259   79..         MOV     R1,#?V0 + 12
   \   00025B   12....       LCALL   ?FLT_ADD
   \   00025E   85....       MOV     ?V0 + 0,?V0 + 4
   \   000261   85....       MOV     ?V0 + 1,?V0 + 5
   \   000264   85....       MOV     ?V0 + 2,?V0 + 6
   \   000267   85....       MOV     ?V0 + 3,?V0 + 7
    765                        if(avalue>0)   
   \   00026A   90....       MOV     DPTR,#__Constant_1
   \   00026D   78..         MOV     R0,#?V0 + 4
   \   00026F   12....       LCALL   ?L_MOV_X
   \   000272   78..         MOV     R0,#?V0 + 0
   \   000274   79..         MOV     R1,#?V0 + 4
   \   000276   12....       LCALL   ?FLT_GE
   \   000279   4003         JC      $+5
   \   00027B   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    766                        {
    767                            switch (index)
   \   00027E   7431         MOV     A,#0x31
   \   000280   6C           XRL     A,R4
   \   000281   7008         JNZ     ??SampleApp_QuadrotorMSGCB_3
    768                                 case '1':
    769                                    {
    770                                            AValue[0]=avalue;
   \   000283   90....       MOV     DPTR,#AValue
   \   000286   78..         MOV     R0,#?V0 + 0
   \   000288   12....       LCALL   ?L_MOV_TO_X
    771                                            break;
    772                                     }
    773                                 case '2':
    774                                    {
    775                                            AValue[1]=avalue;
   \                     ??SampleApp_QuadrotorMSGCB_3:
   \   00028B   90....       MOV     DPTR,#AValue + 4
   \   00028E   78..         MOV     R0,#?V0 + 0
   \   000290   12....       LCALL   ?L_MOV_TO_X
    776                                            break;
   \   000293   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    777                                     }
    778                                 case '3':
    779                                    {
    780                                            AValue[2]=avalue;
   \                     ??SampleApp_QuadrotorMSGCB_4:
   \   000296   90....       MOV     DPTR,#AValue + 8
   \   000299   78..         MOV     R0,#?V0 + 0
   \   00029B   12....       LCALL   ?L_MOV_TO_X
    781                                            break;
   \   00029E   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    782                                     }
    783                                 case '4':
    784                                    {
    785                                            AValue[3]=avalue;
   \                     ??SampleApp_QuadrotorMSGCB_5:
   \   0002A1   90....       MOV     DPTR,#AValue + 12
   \   0002A4   78..         MOV     R0,#?V0 + 0
   \   0002A6   12....       LCALL   ?L_MOV_TO_X
    786                                            break;
   \   0002A9   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    787                                     }
    788                      
    789                            break;
    790                        }
    791                   } 
    792                         else if(alphaindex=='N')
   \                     ??SampleApp_QuadrotorMSGCB_11:
   \   0002AC   85..82       MOV     DPL,?XSP + 0
   \   0002AF   85..83       MOV     DPH,?XSP + 1
   \   0002B2   E0           MOVX    A,@DPTR
   \   0002B3   644E         XRL     A,#0x4e
   \   0002B5   6003         JZ      $+5
   \   0002B7   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    793                       {
    794                                byte index;
    795                                index=*(pkt->cmd.Data+1);
   \   0002BA   EE           MOV     A,R6
   \   0002BB   2421         ADD     A,#0x21
   \   0002BD   F582         MOV     DPL,A
   \   0002BF   EF           MOV     A,R7
   \   0002C0   3400         ADDC    A,#0x0
   \   0002C2   F583         MOV     DPH,A
   \   0002C4   E0           MOVX    A,@DPTR
   \   0002C5   F8           MOV     R0,A
   \   0002C6   A3           INC     DPTR
   \   0002C7   E0           MOVX    A,@DPTR
   \   0002C8   F583         MOV     DPH,A
   \   0002CA   8882         MOV     DPL,R0
   \   0002CC   A3           INC     DPTR
   \   0002CD   E0           MOVX    A,@DPTR
   \   0002CE   C0E0         PUSH    A
   \   0002D0   7401         MOV     A,#0x1
   \   0002D2   12....       LCALL   ?XSTACK_DISP0_8
   \   0002D5   D0E0         POP     A
   \   0002D7   F0           MOVX    @DPTR,A
    796          
    797                                float nvalue;
    798                        //        float tempn=0.0f;
    799                                
    800                                if(((int)(*(pkt->cmd.Data+3))-48)>=0&&((int)(*(pkt->cmd.Data+3))-48)<=9)
   \   0002D8   EE           MOV     A,R6
   \   0002D9   2421         ADD     A,#0x21
   \   0002DB   F582         MOV     DPL,A
   \   0002DD   EF           MOV     A,R7
   \   0002DE   3400         ADDC    A,#0x0
   \   0002E0   F583         MOV     DPH,A
   \   0002E2   E0           MOVX    A,@DPTR
   \   0002E3   F8           MOV     R0,A
   \   0002E4   A3           INC     DPTR
   \   0002E5   E0           MOVX    A,@DPTR
   \   0002E6   F583         MOV     DPH,A
   \   0002E8   8882         MOV     DPL,R0
   \   0002EA   A3           INC     DPTR
   \   0002EB   A3           INC     DPTR
   \   0002EC   A3           INC     DPTR
   \   0002ED   E0           MOVX    A,@DPTR
   \   0002EE   F8           MOV     R0,A
   \   0002EF   7900         MOV     R1,#0x0
   \   0002F1   24D0         ADD     A,#-0x30
   \   0002F3   F8           MOV     R0,A
   \   0002F4   E9           MOV     A,R1
   \   0002F5   34FF         ADDC    A,#-0x1
   \   0002F7   F9           MOV     R1,A
   \   0002F8   C3           CLR     C
   \   0002F9   E8           MOV     A,R0
   \   0002FA   9400         SUBB    A,#0x0
   \   0002FC   E9           MOV     A,R1
   \   0002FD   9400         SUBB    A,#0x0
   \   0002FF   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000301   65D0         XRL     A,PSW
   \   000303   33           RLC     A
   \   000304   5003         JNC     $+5
   \   000306   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
   \   000309   EE           MOV     A,R6
   \   00030A   2421         ADD     A,#0x21
   \   00030C   F582         MOV     DPL,A
   \   00030E   EF           MOV     A,R7
   \   00030F   3400         ADDC    A,#0x0
   \   000311   F583         MOV     DPH,A
   \   000313   E0           MOVX    A,@DPTR
   \   000314   F8           MOV     R0,A
   \   000315   A3           INC     DPTR
   \   000316   E0           MOVX    A,@DPTR
   \   000317   F583         MOV     DPH,A
   \   000319   8882         MOV     DPL,R0
   \   00031B   A3           INC     DPTR
   \   00031C   A3           INC     DPTR
   \   00031D   A3           INC     DPTR
   \   00031E   E0           MOVX    A,@DPTR
   \   00031F   F8           MOV     R0,A
   \   000320   7900         MOV     R1,#0x0
   \   000322   24D0         ADD     A,#-0x30
   \   000324   F8           MOV     R0,A
   \   000325   E9           MOV     A,R1
   \   000326   34FF         ADDC    A,#-0x1
   \   000328   F9           MOV     R1,A
   \   000329   C3           CLR     C
   \   00032A   E8           MOV     A,R0
   \   00032B   940A         SUBB    A,#0xa
   \   00032D   E9           MOV     A,R1
   \   00032E   9400         SUBB    A,#0x0
   \   000330   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000332   65D0         XRL     A,PSW
   \   000334   33           RLC     A
   \   000335   4003         JC      $+5
   \   000337   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    801                                {  nvalue=(float)((int)(*(pkt->cmd.Data+3))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+5))-48)+0.01f*(float)((int)(*(pkt->cmd.Data+6))-48);
   \   00033A   EE           MOV     A,R6
   \   00033B   2421         ADD     A,#0x21
   \   00033D   F582         MOV     DPL,A
   \   00033F   EF           MOV     A,R7
   \   000340   3400         ADDC    A,#0x0
   \   000342   F583         MOV     DPH,A
   \   000344   E0           MOVX    A,@DPTR
   \   000345   F8           MOV     R0,A
   \   000346   A3           INC     DPTR
   \   000347   E0           MOVX    A,@DPTR
   \   000348   F583         MOV     DPH,A
   \   00034A   8882         MOV     DPL,R0
   \   00034C   A3           INC     DPTR
   \   00034D   A3           INC     DPTR
   \   00034E   A3           INC     DPTR
   \   00034F   E0           MOVX    A,@DPTR
   \   000350   F8           MOV     R0,A
   \   000351   7900         MOV     R1,#0x0
   \   000353   24D0         ADD     A,#-0x30
   \   000355   F5..         MOV     ?V0 + 8,A
   \   000357   E9           MOV     A,R1
   \   000358   34FF         ADDC    A,#-0x1
   \   00035A   F5..         MOV     ?V0 + 9,A
   \   00035C   E5..         MOV     A,?V0 + 9
   \   00035E   33           RLC     A
   \   00035F   95E0         SUBB    A,0xE0 /* A   */
   \   000361   F5..         MOV     ?V0 + 10,A
   \   000363   F5..         MOV     ?V0 + 11,A
   \   000365   78..         MOV     R0,#?V0 + 8
   \   000367   12....       LCALL   ?L_TO_FLT
   \   00036A   C0..         PUSH    ?V0 + 8
   \   00036C   C0..         PUSH    ?V0 + 9
   \   00036E   C0..         PUSH    ?V0 + 10
   \   000370   C0..         PUSH    ?V0 + 11
   \   000372   EE           MOV     A,R6
   \   000373   2421         ADD     A,#0x21
   \   000375   F582         MOV     DPL,A
   \   000377   EF           MOV     A,R7
   \   000378   3400         ADDC    A,#0x0
   \   00037A   F583         MOV     DPH,A
   \   00037C   E0           MOVX    A,@DPTR
   \   00037D   F8           MOV     R0,A
   \   00037E   A3           INC     DPTR
   \   00037F   E0           MOVX    A,@DPTR
   \   000380   F583         MOV     DPH,A
   \   000382   8882         MOV     DPL,R0
   \   000384   A3           INC     DPTR
   \   000385   A3           INC     DPTR
   \   000386   A3           INC     DPTR
   \   000387   A3           INC     DPTR
   \   000388   A3           INC     DPTR
   \   000389   E0           MOVX    A,@DPTR
   \   00038A   F8           MOV     R0,A
   \   00038B   7900         MOV     R1,#0x0
   \   00038D   24D0         ADD     A,#-0x30
   \   00038F   F5..         MOV     ?V0 + 12,A
   \   000391   E9           MOV     A,R1
   \   000392   34FF         ADDC    A,#-0x1
   \   000394   F5..         MOV     ?V0 + 13,A
   \   000396   E5..         MOV     A,?V0 + 13
   \   000398   33           RLC     A
   \   000399   95E0         SUBB    A,0xE0 /* A   */
   \   00039B   F5..         MOV     ?V0 + 14,A
   \   00039D   F5..         MOV     ?V0 + 15,A
   \   00039F   78..         MOV     R0,#?V0 + 12
   \   0003A1   12....       LCALL   ?L_TO_FLT
   \   0003A4   90....       MOV     DPTR,#__Constant_3dcccccd
   \   0003A7   78..         MOV     R0,#?V0 + 8
   \   0003A9   12....       LCALL   ?L_MOV_X
   \   0003AC   78..         MOV     R0,#?V0 + 12
   \   0003AE   79..         MOV     R1,#?V0 + 8
   \   0003B0   12....       LCALL   ?FLT_MUL
   \   0003B3   D0..         POP     ?V0 + 11
   \   0003B5   D0..         POP     ?V0 + 10
   \   0003B7   D0..         POP     ?V0 + 9
   \   0003B9   D0..         POP     ?V0 + 8
   \   0003BB   78..         MOV     R0,#?V0 + 8
   \   0003BD   79..         MOV     R1,#?V0 + 12
   \   0003BF   12....       LCALL   ?FLT_ADD
   \   0003C2   C0..         PUSH    ?V0 + 8
   \   0003C4   C0..         PUSH    ?V0 + 9
   \   0003C6   C0..         PUSH    ?V0 + 10
   \   0003C8   C0..         PUSH    ?V0 + 11
   \   0003CA   EE           MOV     A,R6
   \   0003CB   2421         ADD     A,#0x21
   \   0003CD   F582         MOV     DPL,A
   \   0003CF   EF           MOV     A,R7
   \   0003D0   3400         ADDC    A,#0x0
   \   0003D2   F583         MOV     DPH,A
   \   0003D4   E0           MOVX    A,@DPTR
   \   0003D5   F8           MOV     R0,A
   \   0003D6   A3           INC     DPTR
   \   0003D7   E0           MOVX    A,@DPTR
   \   0003D8   C8           XCH     A,R0
   \   0003D9   2406         ADD     A,#0x6
   \   0003DB   F582         MOV     DPL,A
   \   0003DD   E8           MOV     A,R0
   \   0003DE   3400         ADDC    A,#0x0
   \   0003E0   F583         MOV     DPH,A
   \   0003E2   E0           MOVX    A,@DPTR
   \   0003E3   F8           MOV     R0,A
   \   0003E4   7900         MOV     R1,#0x0
   \   0003E6   24D0         ADD     A,#-0x30
   \   0003E8   F5..         MOV     ?V0 + 12,A
   \   0003EA   E9           MOV     A,R1
   \   0003EB   34FF         ADDC    A,#-0x1
   \   0003ED   F5..         MOV     ?V0 + 13,A
   \   0003EF   E5..         MOV     A,?V0 + 13
   \   0003F1   33           RLC     A
   \   0003F2   95E0         SUBB    A,0xE0 /* A   */
   \   0003F4   F5..         MOV     ?V0 + 14,A
   \   0003F6   F5..         MOV     ?V0 + 15,A
   \   0003F8   78..         MOV     R0,#?V0 + 12
   \   0003FA   12....       LCALL   ?L_TO_FLT
   \   0003FD   90....       MOV     DPTR,#__Constant_3c23d70a
   \   000400   78..         MOV     R0,#?V0 + 8
   \   000402   12....       LCALL   ?L_MOV_X
   \   000405   78..         MOV     R0,#?V0 + 12
   \   000407   79..         MOV     R1,#?V0 + 8
   \   000409   12....       LCALL   ?FLT_MUL
   \   00040C   D0..         POP     ?V0 + 11
   \   00040E   D0..         POP     ?V0 + 10
   \   000410   D0..         POP     ?V0 + 9
   \   000412   D0..         POP     ?V0 + 8
   \   000414   78..         MOV     R0,#?V0 + 8
   \   000416   79..         MOV     R1,#?V0 + 12
   \   000418   12....       LCALL   ?FLT_ADD
   \   00041B   85....       MOV     ?V0 + 4,?V0 + 8
   \   00041E   85....       MOV     ?V0 + 5,?V0 + 9
   \   000421   85....       MOV     ?V0 + 6,?V0 + 10
   \   000424   85....       MOV     ?V0 + 7,?V0 + 11
    802                                    
    803                                     switch (index)
   \   000427   7401         MOV     A,#0x1
   \   000429   12....       LCALL   ?XSTACK_DISP0_8
   \   00042C   E0           MOVX    A,@DPTR
   \   00042D   24CF         ADD     A,#-0x31
   \   00042F   6012         JZ      ??SampleApp_QuadrotorMSGCB_12
   \   000431   14           DEC     A
   \   000432   604E         JZ      ??SampleApp_QuadrotorMSGCB_13
   \   000434   14           DEC     A
   \   000435   7003         JNZ     $+5
   \   000437   02....       LJMP    ??SampleApp_QuadrotorMSGCB_14 & 0xFFFF
   \   00043A   14           DEC     A
   \   00043B   7003         JNZ     $+5
   \   00043D   02....       LJMP    ??SampleApp_QuadrotorMSGCB_15 & 0xFFFF
   \   000440   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    804                                     {  
    805                                          case '1':
    806                                           {
    807          //                                   pernBuf1[nindex1]=nvalue;
    808          //                                   nindex1++;
    809          //                                   if(nindex1==7)
    810          //                                   {
    811          //                                     nindex1=0;
    812          //                                     for (int i=0; i<8; i++)
    813          //                                     {
    814          //                                        tempn+=pernBuf1[i];
    815          //                                     }
    816          //                                      nValue[0]=tempn;
    817          //                                   }
    818                                             
    819                                               moving_average_f(nvalue, pernBuf1, 7, nindex1, &nValue[0]);
   \                     ??SampleApp_QuadrotorMSGCB_12:
   \   000443                ; Setup parameters for call to function moving_average_f
   \   000443   75....       MOV     ?V0 + 8,#nValue & 0xff
   \   000446   75....       MOV     ?V0 + 9,#(nValue >> 8) & 0xff
   \   000449   78..         MOV     R0,#?V0 + 8
   \   00044B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00044E   75....       MOV     ?V0 + 8,#nindex1 & 0xff
   \   000451   75....       MOV     ?V0 + 9,#(nindex1 >> 8) & 0xff
   \   000454   78..         MOV     R0,#?V0 + 8
   \   000456   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000459   75..07       MOV     ?V0 + 8,#0x7
   \   00045C   75..00       MOV     ?V0 + 9,#0x0
   \   00045F   78..         MOV     R0,#?V0 + 8
   \   000461   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000464   75....       MOV     ?V0 + 8,#pernBuf1 & 0xff
   \   000467   75....       MOV     ?V0 + 9,#(pernBuf1 >> 8) & 0xff
   \   00046A   78..         MOV     R0,#?V0 + 8
   \   00046C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00046F   AA..         MOV     R2,?V0 + 4
   \   000471   AB..         MOV     R3,?V0 + 5
   \   000473   AC..         MOV     R4,?V0 + 6
   \   000475   AD..         MOV     R5,?V0 + 7
   \   000477   12....       LCALL   ??moving_average_f?relay
   \   00047A   7408         MOV     A,#0x8
   \   00047C   12....       LCALL   ?DEALLOC_XSTACK8
    820                                             
    821                                            
    822                                             break;
   \   00047F   02....       LJMP    ??SampleApp_QuadrotorMSGCB_0 & 0xFFFF
    823                                           }
    824                                          case '2':
    825                                           {
    826          //                                   pernBuf2[nindex2]=nvalue;
    827          //                                   nindex2++;
    828          //                                   if(nindex2==7)
    829          //                                   {
    830          //                                     nindex2=0;
    831          //                                     for (int i=0; i<8; i++)
    832          //                                     {
    833          //                                        tempn+=pernBuf2[i];
    834          //                                     }
    835          //                                      nValue[1]=tempn;
    836          //                                   }
    837                                                moving_average_f(nvalue, pernBuf2, 7, nindex2, &nValue[1]);
   \                     ??SampleApp_QuadrotorMSGCB_13:
   \   000482                ; Setup parameters for call to function moving_average_f
   \   000482   75....       MOV     ?V0 + 8,#(nValue + 4) & 0xff
   \   000485   75....       MOV     ?V0 + 9,#((nValue + 4) >> 8) & 0xff
   \   000488   78..         MOV     R0,#?V0 + 8
   \   00048A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00048D   75....       MOV     ?V0 + 8,#nindex2 & 0xff
   \   000490   75....       MOV     ?V0 + 9,#(nindex2 >> 8) & 0xff
   \   000493   78..         MOV     R0,#?V0 + 8
   \   000495   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000498   75..07       MOV     ?V0 + 8,#0x7
   \   00049B   75..00       MOV     ?V0 + 9,#0x0
   \   00049E   78..         MOV     R0,#?V0 + 8
   \   0004A0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004A3   75....       MOV     ?V0 + 8,#pernBuf2 & 0xff
   \   0004A6   75....       MOV     ?V0 + 9,#(pernBuf2 >> 8) & 0xff
   \   0004A9   78..         MOV     R0,#?V0 + 8
   \   0004AB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004AE   AA..         MOV     R2,?V0 + 4
   \   0004B0   AB..         MOV     R3,?V0 + 5
   \   0004B2   AC..         MOV     R4,?V0 + 6
   \   0004B4   AD..         MOV     R5,?V0 + 7
   \   0004B6   12....       LCALL   ??moving_average_f?relay
   \   0004B9   7408         MOV     A,#0x8
   \   0004BB   12....       LCALL   ?DEALLOC_XSTACK8
    838                                             break;
   \   0004BE   807A         SJMP    ??SampleApp_QuadrotorMSGCB_0
    839                                           }
    840                                           case '3':
    841                                           {
    842          //                                   pernBuf3[nindex3]=nvalue;
    843          //                                   nindex3++;
    844          //                                   if(nindex3==7)
    845          //                                   {
    846          //                                     nindex3=0;
    847          //                                     for (int i=0; i<8; i++)
    848          //                                     {
    849          //                                        tempn+=pernBuf3[i];
    850          //                                     }
    851          //                                      nValue[2]=tempn;
    852          //                                   }
    853                                             moving_average_f(nvalue, pernBuf3, 7, nindex3, &nValue[2]);
   \                     ??SampleApp_QuadrotorMSGCB_14:
   \   0004C0                ; Setup parameters for call to function moving_average_f
   \   0004C0   75....       MOV     ?V0 + 8,#(nValue + 8) & 0xff
   \   0004C3   75....       MOV     ?V0 + 9,#((nValue + 8) >> 8) & 0xff
   \   0004C6   78..         MOV     R0,#?V0 + 8
   \   0004C8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004CB   75....       MOV     ?V0 + 8,#nindex3 & 0xff
   \   0004CE   75....       MOV     ?V0 + 9,#(nindex3 >> 8) & 0xff
   \   0004D1   78..         MOV     R0,#?V0 + 8
   \   0004D3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004D6   75..07       MOV     ?V0 + 8,#0x7
   \   0004D9   75..00       MOV     ?V0 + 9,#0x0
   \   0004DC   78..         MOV     R0,#?V0 + 8
   \   0004DE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004E1   75....       MOV     ?V0 + 8,#pernBuf3 & 0xff
   \   0004E4   75....       MOV     ?V0 + 9,#(pernBuf3 >> 8) & 0xff
   \   0004E7   78..         MOV     R0,#?V0 + 8
   \   0004E9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004EC   AA..         MOV     R2,?V0 + 4
   \   0004EE   AB..         MOV     R3,?V0 + 5
   \   0004F0   AC..         MOV     R4,?V0 + 6
   \   0004F2   AD..         MOV     R5,?V0 + 7
   \   0004F4   12....       LCALL   ??moving_average_f?relay
   \   0004F7   7408         MOV     A,#0x8
   \   0004F9   12....       LCALL   ?DEALLOC_XSTACK8
    854                                             break;
   \   0004FC   803C         SJMP    ??SampleApp_QuadrotorMSGCB_0
    855                                           }
    856                                           case '4':
    857                                           {
    858          //                                   pernBuf4[nindex4]=nvalue;
    859          //                                   nindex4++;
    860          //                                   if(nindex4==7)
    861          //                                   {
    862          //                                     nindex4=0;
    863          //                                     for (int i=0; i<8; i++)
    864          //                                     {
    865          //                                        tempn+=pernBuf4[i];
    866          //                                     }
    867          //                                      nValue[3]=tempn;
    868          //                                   }
    869                                              moving_average_f(nvalue, pernBuf4, 7, nindex4, &nValue[3]);
   \                     ??SampleApp_QuadrotorMSGCB_15:
   \   0004FE                ; Setup parameters for call to function moving_average_f
   \   0004FE   75....       MOV     ?V0 + 8,#(nValue + 12) & 0xff
   \   000501   75....       MOV     ?V0 + 9,#((nValue + 12) >> 8) & 0xff
   \   000504   78..         MOV     R0,#?V0 + 8
   \   000506   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000509   75....       MOV     ?V0 + 8,#nindex4 & 0xff
   \   00050C   75....       MOV     ?V0 + 9,#(nindex4 >> 8) & 0xff
   \   00050F   78..         MOV     R0,#?V0 + 8
   \   000511   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000514   75..07       MOV     ?V0 + 8,#0x7
   \   000517   75..00       MOV     ?V0 + 9,#0x0
   \   00051A   78..         MOV     R0,#?V0 + 8
   \   00051C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00051F   75....       MOV     ?V0 + 8,#pernBuf4 & 0xff
   \   000522   75....       MOV     ?V0 + 9,#(pernBuf4 >> 8) & 0xff
   \   000525   78..         MOV     R0,#?V0 + 8
   \   000527   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00052A   AA..         MOV     R2,?V0 + 4
   \   00052C   AB..         MOV     R3,?V0 + 5
   \   00052E   AC..         MOV     R4,?V0 + 6
   \   000530   AD..         MOV     R5,?V0 + 7
   \   000532   12....       LCALL   ??moving_average_f?relay
   \   000535   7408         MOV     A,#0x8
   \   000537   12....       LCALL   ?DEALLOC_XSTACK8
    870                                             break;
    871                                                   }
    872                                          break;
    873                                      }
    874                                    }
    875                               }
    876                   }
    877                
    878           
    879           
    880            }
    881          
    882          }
   \                     ??SampleApp_QuadrotorMSGCB_0:
   \   00053A   7402         MOV     A,#0x2
   \   00053C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00053F   7F10         MOV     R7,#0x10
   \   000541   02....       LJMP    ?BANKED_LEAVE_XDATA
    883          
    884          /*********************************************************************
    885           * @fn      SampleApp_Tester_calibrationMSGCB
    886           *
    887           * @brief   Data message processor callback.  This function processes
    888           *          any incoming data - probably from other devices.  So, based
    889           *          on cluster ID, perform the intended action.
    890           *
    891           * @param   none
    892           *
    893           * @return  none
    894           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    895          void SampleApp_Tester_calibrationMSGCB( afIncomingMSGPacket_t *pkt ) //receive data for ed
   \                     SampleApp_Tester_calibrationMSGCB:
    896          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    897          
    898            switch ( pkt->clusterId )
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   A3           INC     DPTR
   \   000011   E0           MOVX    A,@DPTR
   \   000012   6401         XRL     A,#0x1
   \   000014   7004         JNZ     ??SampleApp_Tester_calibrationMSGCB_0
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   6400         XRL     A,#0x0
   \                     ??SampleApp_Tester_calibrationMSGCB_0:
   \   00001A   6003         JZ      $+5
   \   00001C   02....       LJMP    ??SampleApp_Tester_calibrationMSGCB_1 & 0xFFFF
    899            {
    900              case SAMPLEAPP_PERIODIC_CLUSTERID:
    901                { 
    902                  
    903                 //  int8 rssivalue;
    904                  HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
   \   00001F                ; Setup parameters for call to function HalUARTWrite
   \   00001F   EE           MOV     A,R6
   \   000020   241F         ADD     A,#0x1f
   \   000022   F582         MOV     DPL,A
   \   000024   EF           MOV     A,R7
   \   000025   3400         ADDC    A,#0x0
   \   000027   F583         MOV     DPH,A
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   FC           MOV     R4,A
   \   00002B   A3           INC     DPTR
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   FD           MOV     R5,A
   \   00002E   EE           MOV     A,R6
   \   00002F   2421         ADD     A,#0x21
   \   000031   F582         MOV     DPL,A
   \   000033   EF           MOV     A,R7
   \   000034   3400         ADDC    A,#0x0
   \   000036   F583         MOV     DPH,A
   \   000038   E0           MOVX    A,@DPTR
   \   000039   FA           MOV     R2,A
   \   00003A   A3           INC     DPTR
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   FB           MOV     R3,A
   \   00003D   7900         MOV     R1,#0x0
   \   00003F   12....       LCALL   ??HalUARTWrite?relay
    905                  byte index;
    906                  index=*(pkt->cmd.Data+1);
   \   000042   EE           MOV     A,R6
   \   000043   2421         ADD     A,#0x21
   \   000045   F582         MOV     DPL,A
   \   000047   EF           MOV     A,R7
   \   000048   3400         ADDC    A,#0x0
   \   00004A   F583         MOV     DPH,A
   \   00004C   E0           MOVX    A,@DPTR
   \   00004D   F8           MOV     R0,A
   \   00004E   A3           INC     DPTR
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   F583         MOV     DPH,A
   \   000052   8882         MOV     DPL,R0
   \   000054   A3           INC     DPTR
   \   000055   E0           MOVX    A,@DPTR
   \   000056   F5..         MOV     ?V0 + 0,A
    907                  rssivalue=(0xff-pkt->rssi);
   \   000058   EE           MOV     A,R6
   \   000059   2418         ADD     A,#0x18
   \   00005B   F582         MOV     DPL,A
   \   00005D   EF           MOV     A,R7
   \   00005E   3400         ADDC    A,#0x0
   \   000060   F583         MOV     DPH,A
   \   000062   E0           MOVX    A,@DPTR
   \   000063   F8           MOV     R0,A
   \   000064   74FF         MOV     A,#-0x1
   \   000066   C3           CLR     C
   \   000067   98           SUBB    A,R0
   \   000068   90....       MOV     DPTR,#rssivalue
   \   00006B   F0           MOVX    @DPTR,A
    908                  
    909                  switch (index)
   \   00006C   E5..         MOV     A,?V0 + 0
   \   00006E   24CF         ADD     A,#-0x31
   \   000070   600F         JZ      ??SampleApp_Tester_calibrationMSGCB_2
   \   000072   14           DEC     A
   \   000073   603A         JZ      ??SampleApp_Tester_calibrationMSGCB_3
   \   000075   14           DEC     A
   \   000076   6064         JZ      ??SampleApp_Tester_calibrationMSGCB_4
   \   000078   14           DEC     A
   \   000079   7003         JNZ     $+5
   \   00007B   02....       LJMP    ??SampleApp_Tester_calibrationMSGCB_5 & 0xFFFF
   \   00007E   02....       LJMP    ??SampleApp_Tester_calibrationMSGCB_1 & 0xFFFF
    910                  {
    911                      case '1':
    912                        {
    913          //                perRssiBuf1[i1]=rssivalue;
    914          //                
    915          //                if(i1==9)
    916          //                {
    917          //                  i1=0;
    918          //                  /*average filter*/
    919          ////                  RssiValue[0]=averagefilter(perRssiBuf1,10);
    920          //                  /*gausian filter*/
    921          //                    RssiValue[0]=gaussianfilter(perRssiBuf1,10);
    922          //                }
    923          //                i1++;
    924                          moving_average(rssivalue, perRssiBuf1, 11, imof1, &RssiValue[0]);
   \                     ??SampleApp_Tester_calibrationMSGCB_2:
   \   000081                ; Setup parameters for call to function moving_average
   \   000081   75....       MOV     ?V0 + 2,#RssiValue & 0xff
   \   000084   75....       MOV     ?V0 + 3,#(RssiValue >> 8) & 0xff
   \   000087   78..         MOV     R0,#?V0 + 2
   \   000089   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008C   75....       MOV     ?V0 + 2,#imof1 & 0xff
   \   00008F   75....       MOV     ?V0 + 3,#(imof1 >> 8) & 0xff
   \   000092   78..         MOV     R0,#?V0 + 2
   \   000094   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000097   7C0B         MOV     R4,#0xb
   \   000099   7D00         MOV     R5,#0x0
   \   00009B   7A..         MOV     R2,#perRssiBuf1 & 0xff
   \   00009D   7B..         MOV     R3,#(perRssiBuf1 >> 8) & 0xff
   \   00009F   90....       MOV     DPTR,#rssivalue
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   F9           MOV     R1,A
   \   0000A4   12....       LCALL   ??moving_average?relay
   \   0000A7   7404         MOV     A,#0x4
   \   0000A9   12....       LCALL   ?DEALLOC_XSTACK8
    925                        }
    926                      
    927                            break;
   \   0000AC   02....       LJMP    ??SampleApp_Tester_calibrationMSGCB_1 & 0xFFFF
    928                      case '2':
    929                        {
    930          //                perRssiBuf2[i2]=rssivalue;
    931          //                
    932          //                if(i2==9)
    933          //                {
    934          //                  i2=0;
    935          //                  /*average filter*/
    936          ////                  RssiValue[1]=averagefilter(perRssiBuf2,10);
    937          //                  /*gausian filter*/
    938          //                  RssiValue[1]=gaussianfilter(perRssiBuf2,10);
    939          //                }
    940          //                i2++;
    941                           moving_average(rssivalue, perRssiBuf2, 11, imof2, &RssiValue[1]);
   \                     ??SampleApp_Tester_calibrationMSGCB_3:
   \   0000AF                ; Setup parameters for call to function moving_average
   \   0000AF   75....       MOV     ?V0 + 2,#(RssiValue + 4) & 0xff
   \   0000B2   75....       MOV     ?V0 + 3,#((RssiValue + 4) >> 8) & 0xff
   \   0000B5   78..         MOV     R0,#?V0 + 2
   \   0000B7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BA   75....       MOV     ?V0 + 2,#imof2 & 0xff
   \   0000BD   75....       MOV     ?V0 + 3,#(imof2 >> 8) & 0xff
   \   0000C0   78..         MOV     R0,#?V0 + 2
   \   0000C2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C5   7C0B         MOV     R4,#0xb
   \   0000C7   7D00         MOV     R5,#0x0
   \   0000C9   7A..         MOV     R2,#perRssiBuf2 & 0xff
   \   0000CB   7B..         MOV     R3,#(perRssiBuf2 >> 8) & 0xff
   \   0000CD   90....       MOV     DPTR,#rssivalue
   \   0000D0   E0           MOVX    A,@DPTR
   \   0000D1   F9           MOV     R1,A
   \   0000D2   12....       LCALL   ??moving_average?relay
   \   0000D5   7404         MOV     A,#0x4
   \   0000D7   12....       LCALL   ?DEALLOC_XSTACK8
    942                        }
    943                            break;
   \   0000DA   8058         SJMP    ??SampleApp_Tester_calibrationMSGCB_1
    944                      case '3':
    945                        {
    946          //                perRssiBuf3[i3]=rssivalue;
    947          //                
    948          //                if(i3==9)
    949          //                {
    950          //                  i3=0;
    951          //                   /*average filter*/
    952          ////                  RssiValue[2]=averagefilter(perRssiBuf3,10);
    953          //                  /*gausian filter*/
    954          //                  RssiValue[2]=gaussianfilter(perRssiBuf3,10);
    955          //                }
    956          //                i3++;
    957                           moving_average(rssivalue, perRssiBuf3, 11, imof3, &RssiValue[2]);
   \                     ??SampleApp_Tester_calibrationMSGCB_4:
   \   0000DC                ; Setup parameters for call to function moving_average
   \   0000DC   75....       MOV     ?V0 + 2,#(RssiValue + 8) & 0xff
   \   0000DF   75....       MOV     ?V0 + 3,#((RssiValue + 8) >> 8) & 0xff
   \   0000E2   78..         MOV     R0,#?V0 + 2
   \   0000E4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E7   75....       MOV     ?V0 + 2,#imof3 & 0xff
   \   0000EA   75....       MOV     ?V0 + 3,#(imof3 >> 8) & 0xff
   \   0000ED   78..         MOV     R0,#?V0 + 2
   \   0000EF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F2   7C0B         MOV     R4,#0xb
   \   0000F4   7D00         MOV     R5,#0x0
   \   0000F6   7A..         MOV     R2,#perRssiBuf3 & 0xff
   \   0000F8   7B..         MOV     R3,#(perRssiBuf3 >> 8) & 0xff
   \   0000FA   90....       MOV     DPTR,#rssivalue
   \   0000FD   E0           MOVX    A,@DPTR
   \   0000FE   F9           MOV     R1,A
   \   0000FF   12....       LCALL   ??moving_average?relay
   \   000102   7404         MOV     A,#0x4
   \   000104   12....       LCALL   ?DEALLOC_XSTACK8
    958                        }
    959                            break;
   \   000107   802B         SJMP    ??SampleApp_Tester_calibrationMSGCB_1
    960                      case '4':
    961                        {
    962          //                perRssiBuf4[i4]=rssivalue;
    963          //                
    964          //                if(i4==9)
    965          //                {
    966          //                  i4=0;
    967          //                   /*average filter*/
    968          ////                  RssiValue[3]=averagefilter(perRssiBuf4,10);
    969          //                  /*gausian filter*/
    970          //                    RssiValue[3]=gaussianfilter(perRssiBuf4,10);
    971          //                }
    972          //                i4++;
    973                           moving_average(rssivalue, perRssiBuf4, 11, imof4, &RssiValue[3]);
   \                     ??SampleApp_Tester_calibrationMSGCB_5:
   \   000109                ; Setup parameters for call to function moving_average
   \   000109   75....       MOV     ?V0 + 2,#(RssiValue + 12) & 0xff
   \   00010C   75....       MOV     ?V0 + 3,#((RssiValue + 12) >> 8) & 0xff
   \   00010F   78..         MOV     R0,#?V0 + 2
   \   000111   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000114   75....       MOV     ?V0 + 2,#imof4 & 0xff
   \   000117   75....       MOV     ?V0 + 3,#(imof4 >> 8) & 0xff
   \   00011A   78..         MOV     R0,#?V0 + 2
   \   00011C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011F   7C0B         MOV     R4,#0xb
   \   000121   7D00         MOV     R5,#0x0
   \   000123   7A..         MOV     R2,#perRssiBuf4 & 0xff
   \   000125   7B..         MOV     R3,#(perRssiBuf4 >> 8) & 0xff
   \   000127   90....       MOV     DPTR,#rssivalue
   \   00012A   E0           MOVX    A,@DPTR
   \   00012B   F9           MOV     R1,A
   \   00012C   12....       LCALL   ??moving_average?relay
   \   00012F   7404         MOV     A,#0x4
   \   000131   12....       LCALL   ?DEALLOC_XSTACK8
    974                        }
    975                            break;    
    976                      default:
    977                      
    978                             break;
    979                   }
    980                  break;
    981                }
    982          
    983               
    984             
    985            }
    986          
    987          }
   \                     ??SampleApp_Tester_calibrationMSGCB_1:
   \   000134   7F04         MOV     R7,#0x4
   \   000136   02....       LJMP    ?BANKED_LEAVE_XDATA
    988          
    989          
    990          /*********************************************************************
    991           * @fn      SampleApp_AnchorMSGCB
    992           *
    993           * @brief   Data message processor callback.  This function processes
    994           *          any incoming data - probably from other devices.  So, based
    995           *          on cluster ID, perform the intended action.
    996           *
    997           * @param   none
    998           *
    999           * @return  none
   1000           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1001          void SampleApp_AnchorMSGCB( afIncomingMSGPacket_t *pkt ) //receive data for ed
   \                     SampleApp_AnchorMSGCB:
   1002          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   EA           MOV     A,R2
   \   000011   F0           MOVX    @DPTR,A
   \   000012   A3           INC     DPTR
   \   000013   EB           MOV     A,R3
   \   000014   F0           MOVX    @DPTR,A
   1003            float avalue=0.0f;
   \   000015   75..00       MOV     ?V0 + 0,#0x0
   \   000018   75..00       MOV     ?V0 + 1,#0x0
   \   00001B   75..00       MOV     ?V0 + 2,#0x0
   \   00001E   75..00       MOV     ?V0 + 3,#0x0
   1004            int switchindex;
   1005            switch ( pkt->clusterId )
   \   000021   85..82       MOV     DPL,?XSP + 0
   \   000024   85..83       MOV     DPH,?XSP + 1
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F8           MOV     R0,A
   \   000029   A3           INC     DPTR
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   F583         MOV     DPH,A
   \   00002D   8882         MOV     DPL,R0
   \   00002F   A3           INC     DPTR
   \   000030   A3           INC     DPTR
   \   000031   A3           INC     DPTR
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   F5..         MOV     ?V0 + 4,A
   \   000036   A3           INC     DPTR
   \   000037   E0           MOVX    A,@DPTR
   \   000038   F5..         MOV     ?V0 + 5,A
   \   00003A   78..         MOV     R0,#?V0 + 4
   \   00003C   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for SampleApp_AnchorMSGCB>_0`:
   \   00003F   0000         DW        0
   \   000041   0500         DW        5
   \   000043   0100         DW        1
   \   000045   ....         DW        ??SampleApp_AnchorMSGCB_0
   \   000047   0200         DW        2
   \   000049   ....         DW        ??SampleApp_AnchorMSGCB_1
   \   00004B   3200         DW        50
   \   00004D   ....         DW        ??SampleApp_AnchorMSGCB_2
   \   00004F   3300         DW        51
   \   000051   ....         DW        ??SampleApp_AnchorMSGCB_3
   \   000053   3400         DW        52
   \   000055   ....         DW        ??SampleApp_AnchorMSGCB_4
   \   000057   ....         DW        ??SampleApp_AnchorMSGCB_5
   1006            {
   1007              case SAMPLEAPP_PERIODIC_CLUSTERID:
   1008                { 
   1009                  
   1010                  
   1011                  //tempParameter.A[0]=AValue[0];
   1012                  
   1013                  byte index;
   1014                  index=*(pkt->cmd.Data+1);
   \                     ??SampleApp_AnchorMSGCB_0:
   \   000059   85..82       MOV     DPL,?XSP + 0
   \   00005C   85..83       MOV     DPH,?XSP + 1
   \   00005F   E0           MOVX    A,@DPTR
   \   000060   F8           MOV     R0,A
   \   000061   A3           INC     DPTR
   \   000062   E0           MOVX    A,@DPTR
   \   000063   C8           XCH     A,R0
   \   000064   2421         ADD     A,#0x21
   \   000066   F582         MOV     DPL,A
   \   000068   E8           MOV     A,R0
   \   000069   3400         ADDC    A,#0x0
   \   00006B   F583         MOV     DPH,A
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   F8           MOV     R0,A
   \   00006F   A3           INC     DPTR
   \   000070   E0           MOVX    A,@DPTR
   \   000071   F583         MOV     DPH,A
   \   000073   8882         MOV     DPL,R0
   \   000075   A3           INC     DPTR
   \   000076   E0           MOVX    A,@DPTR
   \   000077   F5..         MOV     ?V0 + 12,A
   1015                  rssivalue=(0xff-pkt->rssi);
   \   000079   85..82       MOV     DPL,?XSP + 0
   \   00007C   85..83       MOV     DPH,?XSP + 1
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   F8           MOV     R0,A
   \   000081   A3           INC     DPTR
   \   000082   E0           MOVX    A,@DPTR
   \   000083   C8           XCH     A,R0
   \   000084   2418         ADD     A,#0x18
   \   000086   F582         MOV     DPL,A
   \   000088   E8           MOV     A,R0
   \   000089   3400         ADDC    A,#0x0
   \   00008B   F583         MOV     DPH,A
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   F8           MOV     R0,A
   \   00008F   74FF         MOV     A,#-0x1
   \   000091   C3           CLR     C
   \   000092   98           SUBB    A,R0
   \   000093   90....       MOV     DPTR,#rssivalue
   \   000096   F0           MOVX    @DPTR,A
   1016                  
   1017                  switch (index)
   \   000097   E5..         MOV     A,?V0 + 12
   \   000099   24CF         ADD     A,#-0x31
   \   00009B   6015         JZ      ??SampleApp_AnchorMSGCB_6
   \   00009D   14           DEC     A
   \   00009E   7003         JNZ     $+5
   \   0000A0   02....       LJMP    ??SampleApp_AnchorMSGCB_7 & 0xFFFF
   \   0000A3   14           DEC     A
   \   0000A4   7003         JNZ     $+5
   \   0000A6   02....       LJMP    ??SampleApp_AnchorMSGCB_8 & 0xFFFF
   \   0000A9   14           DEC     A
   \   0000AA   7003         JNZ     $+5
   \   0000AC   02....       LJMP    ??SampleApp_AnchorMSGCB_9 & 0xFFFF
   \   0000AF   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1018                  {
   1019                      case '1':
   1020                        {
   1021          //                switchindex=1;
   1022          //                perRssiBuf1[i1]=rssivalue;
   1023          //                
   1024          //                if(i1==(RSSI_AVG_WINDOW_SIZE-1))
   1025          //                {
   1026          //                  i1=0;
   1027          //   
   1028          //                  /*average filter*/
   1029          ////                  RssiValue[1]=averagefilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
   1030          //                  /*gausian filter*/
   1031          //                  RssiValue[switchindex-1]=gaussianfilter(perRssiBuf1,RSSI_AVG_WINDOW_SIZE);
   1032          //                 if( (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,
   1033          //                                                         AnchorX,AnchorY,AnchorZ,AValue))<10)
   1034          //                 {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   1035          //                  
   1036          //                }
   1037          //                i1++;
   1038                          
   1039                          //moving average filter
   1040                          switchindex=1;
   \                     ??SampleApp_AnchorMSGCB_6:
   \   0000B2   7E01         MOV     R6,#0x1
   \   0000B4   7F00         MOV     R7,#0x0
   1041                          moving_average(rssivalue, perRssiBuf1, RSSI_AVG_WINDOW_SIZE-1, imof1, &RssiValue[switchindex-1]);
   \   0000B6                ; Setup parameters for call to function moving_average
   \   0000B6   EE           MOV     A,R6
   \   0000B7   F8           MOV     R0,A
   \   0000B8   EF           MOV     A,R7
   \   0000B9   F9           MOV     R1,A
   \   0000BA   E8           MOV     A,R0
   \   0000BB   75F004       MOV     B,#0x4
   \   0000BE   A4           MUL     AB
   \   0000BF   C8           XCH     A,R0
   \   0000C0   AAF0         MOV     R2,B
   \   0000C2   75F000       MOV     B,#0x0
   \   0000C5   A4           MUL     AB
   \   0000C6   2A           ADD     A,R2
   \   0000C7   FA           MOV     R2,A
   \   0000C8   75F004       MOV     B,#0x4
   \   0000CB   E9           MOV     A,R1
   \   0000CC   A4           MUL     AB
   \   0000CD   2A           ADD     A,R2
   \   0000CE   F9           MOV     R1,A
   \   0000CF   74..         MOV     A,#(RssiValue + 252) & 0xff
   \   0000D1   28           ADD     A,R0
   \   0000D2   F5..         MOV     ?V0 + 4,A
   \   0000D4   74..         MOV     A,#((RssiValue - 4) >> 8) & 0xff
   \   0000D6   39           ADDC    A,R1
   \   0000D7   F5..         MOV     ?V0 + 5,A
   \   0000D9   78..         MOV     R0,#?V0 + 4
   \   0000DB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000DE   75....       MOV     ?V0 + 4,#imof1 & 0xff
   \   0000E1   75....       MOV     ?V0 + 5,#(imof1 >> 8) & 0xff
   \   0000E4   78..         MOV     R0,#?V0 + 4
   \   0000E6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E9   7C1F         MOV     R4,#0x1f
   \   0000EB   7D00         MOV     R5,#0x0
   \   0000ED   7A..         MOV     R2,#perRssiBuf1 & 0xff
   \   0000EF   7B..         MOV     R3,#(perRssiBuf1 >> 8) & 0xff
   \   0000F1   90....       MOV     DPTR,#rssivalue
   \   0000F4   E0           MOVX    A,@DPTR
   \   0000F5   F9           MOV     R1,A
   \   0000F6   12....       LCALL   ??moving_average?relay
   \   0000F9   7404         MOV     A,#0x4
   \   0000FB   12....       LCALL   ?DEALLOC_XSTACK8
   1042                          if( (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,
   1043                                                              AnchorX,AnchorY,AnchorZ,AValue))<10)
   \   0000FE                ; Setup parameters for call to function calibrationN
   \   0000FE   75....       MOV     ?V0 + 4,#AValue & 0xff
   \   000101   75....       MOV     ?V0 + 5,#(AValue >> 8) & 0xff
   \   000104   78..         MOV     R0,#?V0 + 4
   \   000106   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000109   75....       MOV     ?V0 + 4,#AnchorZ & 0xff
   \   00010C   75....       MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
   \   00010F   78..         MOV     R0,#?V0 + 4
   \   000111   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000114   75....       MOV     ?V0 + 4,#AnchorY & 0xff
   \   000117   75....       MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
   \   00011A   78..         MOV     R0,#?V0 + 4
   \   00011C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011F   75....       MOV     ?V0 + 4,#AnchorX & 0xff
   \   000122   75....       MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
   \   000125   78..         MOV     R0,#?V0 + 4
   \   000127   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012A   75....       MOV     ?V0 + 4,#nValue & 0xff
   \   00012D   75....       MOV     ?V0 + 5,#(nValue >> 8) & 0xff
   \   000130   78..         MOV     R0,#?V0 + 4
   \   000132   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000135   75....       MOV     ?V0 + 4,#RssiValue & 0xff
   \   000138   75....       MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
   \   00013B   78..         MOV     R0,#?V0 + 4
   \   00013D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000140   EE           MOV     A,R6
   \   000141   FC           MOV     R4,A
   \   000142   EF           MOV     A,R7
   \   000143   FD           MOV     R5,A
   \   000144   90....       MOV     DPTR,#DeviceID
   \   000147   E0           MOVX    A,@DPTR
   \   000148   FA           MOV     R2,A
   \   000149   A3           INC     DPTR
   \   00014A   E0           MOVX    A,@DPTR
   \   00014B   FB           MOV     R3,A
   \   00014C   12....       LCALL   ??calibrationN?relay
   \   00014F   740C         MOV     A,#0xc
   \   000151   12....       LCALL   ?DEALLOC_XSTACK8
   \   000154   8A..         MOV     ?V0 + 8,R2
   \   000156   8B..         MOV     ?V0 + 9,R3
   \   000158   8C..         MOV     ?V0 + 10,R4
   \   00015A   8D..         MOV     ?V0 + 11,R5
   \   00015C   EE           MOV     A,R6
   \   00015D   F8           MOV     R0,A
   \   00015E   EF           MOV     A,R7
   \   00015F   F9           MOV     R1,A
   \   000160   E8           MOV     A,R0
   \   000161   75F004       MOV     B,#0x4
   \   000164   A4           MUL     AB
   \   000165   C8           XCH     A,R0
   \   000166   AAF0         MOV     R2,B
   \   000168   75F000       MOV     B,#0x0
   \   00016B   A4           MUL     AB
   \   00016C   2A           ADD     A,R2
   \   00016D   FA           MOV     R2,A
   \   00016E   75F004       MOV     B,#0x4
   \   000171   E9           MOV     A,R1
   \   000172   A4           MUL     AB
   \   000173   2A           ADD     A,R2
   \   000174   F9           MOV     R1,A
   \   000175   74..         MOV     A,#(nValue + 252) & 0xff
   \   000177   28           ADD     A,R0
   \   000178   F582         MOV     DPL,A
   \   00017A   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   00017C   39           ADDC    A,R1
   \   00017D   F583         MOV     DPH,A
   \   00017F   78..         MOV     R0,#?V0 + 8
   \   000181   12....       LCALL   ?L_MOV_TO_X
   \   000184   90....       MOV     DPTR,#__Constant_41200000
   \   000187   78..         MOV     R0,#?V0 + 4
   \   000189   12....       LCALL   ?L_MOV_X
   \   00018C   78..         MOV     R0,#?V0 + 8
   \   00018E   79..         MOV     R1,#?V0 + 4
   \   000190   12....       LCALL   ?FLT_LT
   \   000193   5032         JNC     ??SampleApp_AnchorMSGCB_10
   1044                             {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   \   000195                ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
   \   000195   EE           MOV     A,R6
   \   000196   F8           MOV     R0,A
   \   000197   EF           MOV     A,R7
   \   000198   F9           MOV     R1,A
   \   000199   E8           MOV     A,R0
   \   00019A   75F004       MOV     B,#0x4
   \   00019D   A4           MUL     AB
   \   00019E   C8           XCH     A,R0
   \   00019F   AAF0         MOV     R2,B
   \   0001A1   75F000       MOV     B,#0x0
   \   0001A4   A4           MUL     AB
   \   0001A5   2A           ADD     A,R2
   \   0001A6   FA           MOV     R2,A
   \   0001A7   75F004       MOV     B,#0x4
   \   0001AA   E9           MOV     A,R1
   \   0001AB   A4           MUL     AB
   \   0001AC   2A           ADD     A,R2
   \   0001AD   F9           MOV     R1,A
   \   0001AE   74..         MOV     A,#(nValue + 252) & 0xff
   \   0001B0   28           ADD     A,R0
   \   0001B1   F582         MOV     DPL,A
   \   0001B3   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   0001B5   39           ADDC    A,R1
   \   0001B6   F583         MOV     DPH,A
   \   0001B8   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0001BB   EE           MOV     A,R6
   \   0001BC   FA           MOV     R2,A
   \   0001BD   EF           MOV     A,R7
   \   0001BE   FB           MOV     R3,A
   \   0001BF   12....       LCALL   ??SampleApp_Router_calibrationNMessage?relay
   \   0001C2   7404         MOV     A,#0x4
   \   0001C4   12....       LCALL   ?DEALLOC_XSTACK8
   1045                        }
   1046                      
   1047                            break;
   \                     ??SampleApp_AnchorMSGCB_10:
   \   0001C7   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1048                      case '2':
   1049                        {
   1050          //                switchindex=2;
   1051          //                perRssiBuf2[i2]=rssivalue;
   1052          //                
   1053          //                if(i2==31)
   1054          //                {
   1055          //                  i2=0;
   1056          //
   1057          //                  /*average filter*/
   1058          //  //                RssiValue[1]=averagefilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
   1059          //                  /*gaussian filter*/
   1060          //                   RssiValue[switchindex-1]=gaussianfilter(perRssiBuf2,RSSI_AVG_WINDOW_SIZE);
   1061          //                   
   1062          //                  if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
   1063          //                  { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   1064          //                }
   1065          //                i2++;
   1066                          //moving average filter
   1067                          switchindex=2;
   \                     ??SampleApp_AnchorMSGCB_7:
   \   0001CA   7E02         MOV     R6,#0x2
   \   0001CC   7F00         MOV     R7,#0x0
   1068                          moving_average(rssivalue, perRssiBuf2, RSSI_AVG_WINDOW_SIZE-1, imof2, &RssiValue[switchindex-1]);
   \   0001CE                ; Setup parameters for call to function moving_average
   \   0001CE   EE           MOV     A,R6
   \   0001CF   F8           MOV     R0,A
   \   0001D0   EF           MOV     A,R7
   \   0001D1   F9           MOV     R1,A
   \   0001D2   E8           MOV     A,R0
   \   0001D3   75F004       MOV     B,#0x4
   \   0001D6   A4           MUL     AB
   \   0001D7   C8           XCH     A,R0
   \   0001D8   AAF0         MOV     R2,B
   \   0001DA   75F000       MOV     B,#0x0
   \   0001DD   A4           MUL     AB
   \   0001DE   2A           ADD     A,R2
   \   0001DF   FA           MOV     R2,A
   \   0001E0   75F004       MOV     B,#0x4
   \   0001E3   E9           MOV     A,R1
   \   0001E4   A4           MUL     AB
   \   0001E5   2A           ADD     A,R2
   \   0001E6   F9           MOV     R1,A
   \   0001E7   74..         MOV     A,#(RssiValue + 252) & 0xff
   \   0001E9   28           ADD     A,R0
   \   0001EA   F5..         MOV     ?V0 + 4,A
   \   0001EC   74..         MOV     A,#((RssiValue - 4) >> 8) & 0xff
   \   0001EE   39           ADDC    A,R1
   \   0001EF   F5..         MOV     ?V0 + 5,A
   \   0001F1   78..         MOV     R0,#?V0 + 4
   \   0001F3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F6   75....       MOV     ?V0 + 4,#imof2 & 0xff
   \   0001F9   75....       MOV     ?V0 + 5,#(imof2 >> 8) & 0xff
   \   0001FC   78..         MOV     R0,#?V0 + 4
   \   0001FE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000201   7C1F         MOV     R4,#0x1f
   \   000203   7D00         MOV     R5,#0x0
   \   000205   7A..         MOV     R2,#perRssiBuf2 & 0xff
   \   000207   7B..         MOV     R3,#(perRssiBuf2 >> 8) & 0xff
   \   000209   90....       MOV     DPTR,#rssivalue
   \   00020C   E0           MOVX    A,@DPTR
   \   00020D   F9           MOV     R1,A
   \   00020E   12....       LCALL   ??moving_average?relay
   \   000211   7404         MOV     A,#0x4
   \   000213   12....       LCALL   ?DEALLOC_XSTACK8
   1069                          if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,
   1070                                                                   nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
   \   000216                ; Setup parameters for call to function calibrationN
   \   000216   75....       MOV     ?V0 + 4,#AValue & 0xff
   \   000219   75....       MOV     ?V0 + 5,#(AValue >> 8) & 0xff
   \   00021C   78..         MOV     R0,#?V0 + 4
   \   00021E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000221   75....       MOV     ?V0 + 4,#AnchorZ & 0xff
   \   000224   75....       MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
   \   000227   78..         MOV     R0,#?V0 + 4
   \   000229   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00022C   75....       MOV     ?V0 + 4,#AnchorY & 0xff
   \   00022F   75....       MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
   \   000232   78..         MOV     R0,#?V0 + 4
   \   000234   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000237   75....       MOV     ?V0 + 4,#AnchorX & 0xff
   \   00023A   75....       MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
   \   00023D   78..         MOV     R0,#?V0 + 4
   \   00023F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000242   75....       MOV     ?V0 + 4,#nValue & 0xff
   \   000245   75....       MOV     ?V0 + 5,#(nValue >> 8) & 0xff
   \   000248   78..         MOV     R0,#?V0 + 4
   \   00024A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00024D   75....       MOV     ?V0 + 4,#RssiValue & 0xff
   \   000250   75....       MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
   \   000253   78..         MOV     R0,#?V0 + 4
   \   000255   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000258   EE           MOV     A,R6
   \   000259   FC           MOV     R4,A
   \   00025A   EF           MOV     A,R7
   \   00025B   FD           MOV     R5,A
   \   00025C   90....       MOV     DPTR,#DeviceID
   \   00025F   E0           MOVX    A,@DPTR
   \   000260   FA           MOV     R2,A
   \   000261   A3           INC     DPTR
   \   000262   E0           MOVX    A,@DPTR
   \   000263   FB           MOV     R3,A
   \   000264   12....       LCALL   ??calibrationN?relay
   \   000267   740C         MOV     A,#0xc
   \   000269   12....       LCALL   ?DEALLOC_XSTACK8
   \   00026C   8A..         MOV     ?V0 + 8,R2
   \   00026E   8B..         MOV     ?V0 + 9,R3
   \   000270   8C..         MOV     ?V0 + 10,R4
   \   000272   8D..         MOV     ?V0 + 11,R5
   \   000274   EE           MOV     A,R6
   \   000275   F8           MOV     R0,A
   \   000276   EF           MOV     A,R7
   \   000277   F9           MOV     R1,A
   \   000278   E8           MOV     A,R0
   \   000279   75F004       MOV     B,#0x4
   \   00027C   A4           MUL     AB
   \   00027D   C8           XCH     A,R0
   \   00027E   AAF0         MOV     R2,B
   \   000280   75F000       MOV     B,#0x0
   \   000283   A4           MUL     AB
   \   000284   2A           ADD     A,R2
   \   000285   FA           MOV     R2,A
   \   000286   75F004       MOV     B,#0x4
   \   000289   E9           MOV     A,R1
   \   00028A   A4           MUL     AB
   \   00028B   2A           ADD     A,R2
   \   00028C   F9           MOV     R1,A
   \   00028D   74..         MOV     A,#(nValue + 252) & 0xff
   \   00028F   28           ADD     A,R0
   \   000290   F582         MOV     DPL,A
   \   000292   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   000294   39           ADDC    A,R1
   \   000295   F583         MOV     DPH,A
   \   000297   78..         MOV     R0,#?V0 + 8
   \   000299   12....       LCALL   ?L_MOV_TO_X
   \   00029C   90....       MOV     DPTR,#__Constant_41200000
   \   00029F   78..         MOV     R0,#?V0 + 4
   \   0002A1   12....       LCALL   ?L_MOV_X
   \   0002A4   78..         MOV     R0,#?V0 + 8
   \   0002A6   79..         MOV     R1,#?V0 + 4
   \   0002A8   12....       LCALL   ?FLT_LT
   \   0002AB   5032         JNC     ??SampleApp_AnchorMSGCB_11
   1071                         { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   \   0002AD                ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
   \   0002AD   EE           MOV     A,R6
   \   0002AE   F8           MOV     R0,A
   \   0002AF   EF           MOV     A,R7
   \   0002B0   F9           MOV     R1,A
   \   0002B1   E8           MOV     A,R0
   \   0002B2   75F004       MOV     B,#0x4
   \   0002B5   A4           MUL     AB
   \   0002B6   C8           XCH     A,R0
   \   0002B7   AAF0         MOV     R2,B
   \   0002B9   75F000       MOV     B,#0x0
   \   0002BC   A4           MUL     AB
   \   0002BD   2A           ADD     A,R2
   \   0002BE   FA           MOV     R2,A
   \   0002BF   75F004       MOV     B,#0x4
   \   0002C2   E9           MOV     A,R1
   \   0002C3   A4           MUL     AB
   \   0002C4   2A           ADD     A,R2
   \   0002C5   F9           MOV     R1,A
   \   0002C6   74..         MOV     A,#(nValue + 252) & 0xff
   \   0002C8   28           ADD     A,R0
   \   0002C9   F582         MOV     DPL,A
   \   0002CB   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   0002CD   39           ADDC    A,R1
   \   0002CE   F583         MOV     DPH,A
   \   0002D0   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0002D3   EE           MOV     A,R6
   \   0002D4   FA           MOV     R2,A
   \   0002D5   EF           MOV     A,R7
   \   0002D6   FB           MOV     R3,A
   \   0002D7   12....       LCALL   ??SampleApp_Router_calibrationNMessage?relay
   \   0002DA   7404         MOV     A,#0x4
   \   0002DC   12....       LCALL   ?DEALLOC_XSTACK8
   1072                        }
   1073                            break;
   \                     ??SampleApp_AnchorMSGCB_11:
   \   0002DF   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1074                      case '3':
   1075                        {
   1076          //                switchindex=3;
   1077          //                perRssiBuf3[i3]=rssivalue;
   1078          //                
   1079          //                if(i3==31)
   1080          //                {
   1081          //                  i3=0;              
   1082          //                  /*average filter*/
   1083          ////                  RssiValue[2]=averagefilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
   1084          //                  /*gaussian filter*/
   1085          //                   RssiValue[switchindex-1]=gaussianfilter(perRssiBuf3,RSSI_AVG_WINDOW_SIZE);
   1086          //                   if((nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
   1087          //                   {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   1088          //                }
   1089          //                i3++;
   1090                           //moving average filter
   1091                          switchindex=3;
   \                     ??SampleApp_AnchorMSGCB_8:
   \   0002E2   7E03         MOV     R6,#0x3
   \   0002E4   7F00         MOV     R7,#0x0
   1092                          moving_average(rssivalue, perRssiBuf3, RSSI_AVG_WINDOW_SIZE-1, imof3, &RssiValue[switchindex-1]);
   \   0002E6                ; Setup parameters for call to function moving_average
   \   0002E6   EE           MOV     A,R6
   \   0002E7   F8           MOV     R0,A
   \   0002E8   EF           MOV     A,R7
   \   0002E9   F9           MOV     R1,A
   \   0002EA   E8           MOV     A,R0
   \   0002EB   75F004       MOV     B,#0x4
   \   0002EE   A4           MUL     AB
   \   0002EF   C8           XCH     A,R0
   \   0002F0   AAF0         MOV     R2,B
   \   0002F2   75F000       MOV     B,#0x0
   \   0002F5   A4           MUL     AB
   \   0002F6   2A           ADD     A,R2
   \   0002F7   FA           MOV     R2,A
   \   0002F8   75F004       MOV     B,#0x4
   \   0002FB   E9           MOV     A,R1
   \   0002FC   A4           MUL     AB
   \   0002FD   2A           ADD     A,R2
   \   0002FE   F9           MOV     R1,A
   \   0002FF   74..         MOV     A,#(RssiValue + 252) & 0xff
   \   000301   28           ADD     A,R0
   \   000302   F5..         MOV     ?V0 + 4,A
   \   000304   74..         MOV     A,#((RssiValue - 4) >> 8) & 0xff
   \   000306   39           ADDC    A,R1
   \   000307   F5..         MOV     ?V0 + 5,A
   \   000309   78..         MOV     R0,#?V0 + 4
   \   00030B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00030E   75....       MOV     ?V0 + 4,#imof3 & 0xff
   \   000311   75....       MOV     ?V0 + 5,#(imof3 >> 8) & 0xff
   \   000314   78..         MOV     R0,#?V0 + 4
   \   000316   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000319   7C1F         MOV     R4,#0x1f
   \   00031B   7D00         MOV     R5,#0x0
   \   00031D   7A..         MOV     R2,#perRssiBuf3 & 0xff
   \   00031F   7B..         MOV     R3,#(perRssiBuf3 >> 8) & 0xff
   \   000321   90....       MOV     DPTR,#rssivalue
   \   000324   E0           MOVX    A,@DPTR
   \   000325   F9           MOV     R1,A
   \   000326   12....       LCALL   ??moving_average?relay
   \   000329   7404         MOV     A,#0x4
   \   00032B   12....       LCALL   ?DEALLOC_XSTACK8
   1093                          if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,
   1094                                                                   nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
   \   00032E                ; Setup parameters for call to function calibrationN
   \   00032E   75....       MOV     ?V0 + 4,#AValue & 0xff
   \   000331   75....       MOV     ?V0 + 5,#(AValue >> 8) & 0xff
   \   000334   78..         MOV     R0,#?V0 + 4
   \   000336   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000339   75....       MOV     ?V0 + 4,#AnchorZ & 0xff
   \   00033C   75....       MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
   \   00033F   78..         MOV     R0,#?V0 + 4
   \   000341   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000344   75....       MOV     ?V0 + 4,#AnchorY & 0xff
   \   000347   75....       MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
   \   00034A   78..         MOV     R0,#?V0 + 4
   \   00034C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00034F   75....       MOV     ?V0 + 4,#AnchorX & 0xff
   \   000352   75....       MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
   \   000355   78..         MOV     R0,#?V0 + 4
   \   000357   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00035A   75....       MOV     ?V0 + 4,#nValue & 0xff
   \   00035D   75....       MOV     ?V0 + 5,#(nValue >> 8) & 0xff
   \   000360   78..         MOV     R0,#?V0 + 4
   \   000362   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000365   75....       MOV     ?V0 + 4,#RssiValue & 0xff
   \   000368   75....       MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
   \   00036B   78..         MOV     R0,#?V0 + 4
   \   00036D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000370   EE           MOV     A,R6
   \   000371   FC           MOV     R4,A
   \   000372   EF           MOV     A,R7
   \   000373   FD           MOV     R5,A
   \   000374   90....       MOV     DPTR,#DeviceID
   \   000377   E0           MOVX    A,@DPTR
   \   000378   FA           MOV     R2,A
   \   000379   A3           INC     DPTR
   \   00037A   E0           MOVX    A,@DPTR
   \   00037B   FB           MOV     R3,A
   \   00037C   12....       LCALL   ??calibrationN?relay
   \   00037F   740C         MOV     A,#0xc
   \   000381   12....       LCALL   ?DEALLOC_XSTACK8
   \   000384   8A..         MOV     ?V0 + 8,R2
   \   000386   8B..         MOV     ?V0 + 9,R3
   \   000388   8C..         MOV     ?V0 + 10,R4
   \   00038A   8D..         MOV     ?V0 + 11,R5
   \   00038C   EE           MOV     A,R6
   \   00038D   F8           MOV     R0,A
   \   00038E   EF           MOV     A,R7
   \   00038F   F9           MOV     R1,A
   \   000390   E8           MOV     A,R0
   \   000391   75F004       MOV     B,#0x4
   \   000394   A4           MUL     AB
   \   000395   C8           XCH     A,R0
   \   000396   AAF0         MOV     R2,B
   \   000398   75F000       MOV     B,#0x0
   \   00039B   A4           MUL     AB
   \   00039C   2A           ADD     A,R2
   \   00039D   FA           MOV     R2,A
   \   00039E   75F004       MOV     B,#0x4
   \   0003A1   E9           MOV     A,R1
   \   0003A2   A4           MUL     AB
   \   0003A3   2A           ADD     A,R2
   \   0003A4   F9           MOV     R1,A
   \   0003A5   74..         MOV     A,#(nValue + 252) & 0xff
   \   0003A7   28           ADD     A,R0
   \   0003A8   F582         MOV     DPL,A
   \   0003AA   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   0003AC   39           ADDC    A,R1
   \   0003AD   F583         MOV     DPH,A
   \   0003AF   78..         MOV     R0,#?V0 + 8
   \   0003B1   12....       LCALL   ?L_MOV_TO_X
   \   0003B4   90....       MOV     DPTR,#__Constant_41200000
   \   0003B7   78..         MOV     R0,#?V0 + 4
   \   0003B9   12....       LCALL   ?L_MOV_X
   \   0003BC   78..         MOV     R0,#?V0 + 8
   \   0003BE   79..         MOV     R1,#?V0 + 4
   \   0003C0   12....       LCALL   ?FLT_LT
   \   0003C3   5032         JNC     ??SampleApp_AnchorMSGCB_12
   1095                         { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   \   0003C5                ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
   \   0003C5   EE           MOV     A,R6
   \   0003C6   F8           MOV     R0,A
   \   0003C7   EF           MOV     A,R7
   \   0003C8   F9           MOV     R1,A
   \   0003C9   E8           MOV     A,R0
   \   0003CA   75F004       MOV     B,#0x4
   \   0003CD   A4           MUL     AB
   \   0003CE   C8           XCH     A,R0
   \   0003CF   AAF0         MOV     R2,B
   \   0003D1   75F000       MOV     B,#0x0
   \   0003D4   A4           MUL     AB
   \   0003D5   2A           ADD     A,R2
   \   0003D6   FA           MOV     R2,A
   \   0003D7   75F004       MOV     B,#0x4
   \   0003DA   E9           MOV     A,R1
   \   0003DB   A4           MUL     AB
   \   0003DC   2A           ADD     A,R2
   \   0003DD   F9           MOV     R1,A
   \   0003DE   74..         MOV     A,#(nValue + 252) & 0xff
   \   0003E0   28           ADD     A,R0
   \   0003E1   F582         MOV     DPL,A
   \   0003E3   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   0003E5   39           ADDC    A,R1
   \   0003E6   F583         MOV     DPH,A
   \   0003E8   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0003EB   EE           MOV     A,R6
   \   0003EC   FA           MOV     R2,A
   \   0003ED   EF           MOV     A,R7
   \   0003EE   FB           MOV     R3,A
   \   0003EF   12....       LCALL   ??SampleApp_Router_calibrationNMessage?relay
   \   0003F2   7404         MOV     A,#0x4
   \   0003F4   12....       LCALL   ?DEALLOC_XSTACK8
   1096                        }
   1097                            break;
   \                     ??SampleApp_AnchorMSGCB_12:
   \   0003F7   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1098                      case '4':
   1099                        {
   1100          //                switchindex=4;
   1101          //                perRssiBuf4[i4]=rssivalue;
   1102          //                
   1103          //                if(i4==31)
   1104          //                {
   1105          //                  i4=0;
   1106          //
   1107          //                     /*average filter*/
   1108          ////                  RssiValue[3]=averagefilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
   1109          //                  /*gaussian filter*/
   1110          //                   RssiValue[switchindex-1]=gaussianfilter(perRssiBuf4,RSSI_AVG_WINDOW_SIZE);
   1111          //                   
   1112          //                    if((nValue[switchindex-1]=calibrationN(DeviceID,4,RssiValue,nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
   1113          //                    {SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   1114          //                }
   1115          //                i4++;
   1116                           //moving average filter
   1117                          switchindex=4;
   \                     ??SampleApp_AnchorMSGCB_9:
   \   0003FA   7E04         MOV     R6,#0x4
   \   0003FC   7F00         MOV     R7,#0x0
   1118                          moving_average(rssivalue, perRssiBuf4, RSSI_AVG_WINDOW_SIZE-1, imof4, &RssiValue[switchindex-1]);
   \   0003FE                ; Setup parameters for call to function moving_average
   \   0003FE   EE           MOV     A,R6
   \   0003FF   F8           MOV     R0,A
   \   000400   EF           MOV     A,R7
   \   000401   F9           MOV     R1,A
   \   000402   E8           MOV     A,R0
   \   000403   75F004       MOV     B,#0x4
   \   000406   A4           MUL     AB
   \   000407   C8           XCH     A,R0
   \   000408   AAF0         MOV     R2,B
   \   00040A   75F000       MOV     B,#0x0
   \   00040D   A4           MUL     AB
   \   00040E   2A           ADD     A,R2
   \   00040F   FA           MOV     R2,A
   \   000410   75F004       MOV     B,#0x4
   \   000413   E9           MOV     A,R1
   \   000414   A4           MUL     AB
   \   000415   2A           ADD     A,R2
   \   000416   F9           MOV     R1,A
   \   000417   74..         MOV     A,#(RssiValue + 252) & 0xff
   \   000419   28           ADD     A,R0
   \   00041A   F5..         MOV     ?V0 + 4,A
   \   00041C   74..         MOV     A,#((RssiValue - 4) >> 8) & 0xff
   \   00041E   39           ADDC    A,R1
   \   00041F   F5..         MOV     ?V0 + 5,A
   \   000421   78..         MOV     R0,#?V0 + 4
   \   000423   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000426   75....       MOV     ?V0 + 4,#imof4 & 0xff
   \   000429   75....       MOV     ?V0 + 5,#(imof4 >> 8) & 0xff
   \   00042C   78..         MOV     R0,#?V0 + 4
   \   00042E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000431   7C1F         MOV     R4,#0x1f
   \   000433   7D00         MOV     R5,#0x0
   \   000435   7A..         MOV     R2,#perRssiBuf4 & 0xff
   \   000437   7B..         MOV     R3,#(perRssiBuf4 >> 8) & 0xff
   \   000439   90....       MOV     DPTR,#rssivalue
   \   00043C   E0           MOVX    A,@DPTR
   \   00043D   F9           MOV     R1,A
   \   00043E   12....       LCALL   ??moving_average?relay
   \   000441   7404         MOV     A,#0x4
   \   000443   12....       LCALL   ?DEALLOC_XSTACK8
   1119                          if(  (nValue[switchindex-1]=calibrationN(DeviceID,switchindex,RssiValue,
   1120                                                                   nValue,AnchorX,AnchorY,AnchorZ,AValue))<10)
   \   000446                ; Setup parameters for call to function calibrationN
   \   000446   75....       MOV     ?V0 + 4,#AValue & 0xff
   \   000449   75....       MOV     ?V0 + 5,#(AValue >> 8) & 0xff
   \   00044C   78..         MOV     R0,#?V0 + 4
   \   00044E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000451   75....       MOV     ?V0 + 4,#AnchorZ & 0xff
   \   000454   75....       MOV     ?V0 + 5,#(AnchorZ >> 8) & 0xff
   \   000457   78..         MOV     R0,#?V0 + 4
   \   000459   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00045C   75....       MOV     ?V0 + 4,#AnchorY & 0xff
   \   00045F   75....       MOV     ?V0 + 5,#(AnchorY >> 8) & 0xff
   \   000462   78..         MOV     R0,#?V0 + 4
   \   000464   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000467   75....       MOV     ?V0 + 4,#AnchorX & 0xff
   \   00046A   75....       MOV     ?V0 + 5,#(AnchorX >> 8) & 0xff
   \   00046D   78..         MOV     R0,#?V0 + 4
   \   00046F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000472   75....       MOV     ?V0 + 4,#nValue & 0xff
   \   000475   75....       MOV     ?V0 + 5,#(nValue >> 8) & 0xff
   \   000478   78..         MOV     R0,#?V0 + 4
   \   00047A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00047D   75....       MOV     ?V0 + 4,#RssiValue & 0xff
   \   000480   75....       MOV     ?V0 + 5,#(RssiValue >> 8) & 0xff
   \   000483   78..         MOV     R0,#?V0 + 4
   \   000485   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000488   EE           MOV     A,R6
   \   000489   FC           MOV     R4,A
   \   00048A   EF           MOV     A,R7
   \   00048B   FD           MOV     R5,A
   \   00048C   90....       MOV     DPTR,#DeviceID
   \   00048F   E0           MOVX    A,@DPTR
   \   000490   FA           MOV     R2,A
   \   000491   A3           INC     DPTR
   \   000492   E0           MOVX    A,@DPTR
   \   000493   FB           MOV     R3,A
   \   000494   12....       LCALL   ??calibrationN?relay
   \   000497   740C         MOV     A,#0xc
   \   000499   12....       LCALL   ?DEALLOC_XSTACK8
   \   00049C   8A..         MOV     ?V0 + 8,R2
   \   00049E   8B..         MOV     ?V0 + 9,R3
   \   0004A0   8C..         MOV     ?V0 + 10,R4
   \   0004A2   8D..         MOV     ?V0 + 11,R5
   \   0004A4   EE           MOV     A,R6
   \   0004A5   F8           MOV     R0,A
   \   0004A6   EF           MOV     A,R7
   \   0004A7   F9           MOV     R1,A
   \   0004A8   E8           MOV     A,R0
   \   0004A9   75F004       MOV     B,#0x4
   \   0004AC   A4           MUL     AB
   \   0004AD   C8           XCH     A,R0
   \   0004AE   AAF0         MOV     R2,B
   \   0004B0   75F000       MOV     B,#0x0
   \   0004B3   A4           MUL     AB
   \   0004B4   2A           ADD     A,R2
   \   0004B5   FA           MOV     R2,A
   \   0004B6   75F004       MOV     B,#0x4
   \   0004B9   E9           MOV     A,R1
   \   0004BA   A4           MUL     AB
   \   0004BB   2A           ADD     A,R2
   \   0004BC   F9           MOV     R1,A
   \   0004BD   74..         MOV     A,#(nValue + 252) & 0xff
   \   0004BF   28           ADD     A,R0
   \   0004C0   F582         MOV     DPL,A
   \   0004C2   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   0004C4   39           ADDC    A,R1
   \   0004C5   F583         MOV     DPH,A
   \   0004C7   78..         MOV     R0,#?V0 + 8
   \   0004C9   12....       LCALL   ?L_MOV_TO_X
   \   0004CC   90....       MOV     DPTR,#__Constant_41200000
   \   0004CF   78..         MOV     R0,#?V0 + 4
   \   0004D1   12....       LCALL   ?L_MOV_X
   \   0004D4   78..         MOV     R0,#?V0 + 8
   \   0004D6   79..         MOV     R1,#?V0 + 4
   \   0004D8   12....       LCALL   ?FLT_LT
   \   0004DB   5032         JNC     ??SampleApp_AnchorMSGCB_13
   1121                         { SampleApp_Router_calibrationNMessage(switchindex,nValue[switchindex-1]);}
   \   0004DD                ; Setup parameters for call to function SampleApp_Router_calibrationNMessage
   \   0004DD   EE           MOV     A,R6
   \   0004DE   F8           MOV     R0,A
   \   0004DF   EF           MOV     A,R7
   \   0004E0   F9           MOV     R1,A
   \   0004E1   E8           MOV     A,R0
   \   0004E2   75F004       MOV     B,#0x4
   \   0004E5   A4           MUL     AB
   \   0004E6   C8           XCH     A,R0
   \   0004E7   AAF0         MOV     R2,B
   \   0004E9   75F000       MOV     B,#0x0
   \   0004EC   A4           MUL     AB
   \   0004ED   2A           ADD     A,R2
   \   0004EE   FA           MOV     R2,A
   \   0004EF   75F004       MOV     B,#0x4
   \   0004F2   E9           MOV     A,R1
   \   0004F3   A4           MUL     AB
   \   0004F4   2A           ADD     A,R2
   \   0004F5   F9           MOV     R1,A
   \   0004F6   74..         MOV     A,#(nValue + 252) & 0xff
   \   0004F8   28           ADD     A,R0
   \   0004F9   F582         MOV     DPL,A
   \   0004FB   74..         MOV     A,#((nValue - 4) >> 8) & 0xff
   \   0004FD   39           ADDC    A,R1
   \   0004FE   F583         MOV     DPH,A
   \   000500   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000503   EE           MOV     A,R6
   \   000504   FA           MOV     R2,A
   \   000505   EF           MOV     A,R7
   \   000506   FB           MOV     R3,A
   \   000507   12....       LCALL   ??SampleApp_Router_calibrationNMessage?relay
   \   00050A   7404         MOV     A,#0x4
   \   00050C   12....       LCALL   ?DEALLOC_XSTACK8
   1122                        }
   1123                            break;    
   1124                      default:
   1125                      
   1126                             break;
   1127                   }
   1128                  break;
   \                     ??SampleApp_AnchorMSGCB_13:
   \   00050F   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1129                }
   1130          
   1131                     case CALBRATION_N_CLUSTERID:
   1132                {
   1133                  HalUARTWrite(0, pkt->cmd.Data, pkt->cmd.DataLength); //输出接收到的数据
   \                     ??SampleApp_AnchorMSGCB_1:
   \   000512                ; Setup parameters for call to function HalUARTWrite
   \   000512   85..82       MOV     DPL,?XSP + 0
   \   000515   85..83       MOV     DPH,?XSP + 1
   \   000518   E0           MOVX    A,@DPTR
   \   000519   F8           MOV     R0,A
   \   00051A   A3           INC     DPTR
   \   00051B   E0           MOVX    A,@DPTR
   \   00051C   C8           XCH     A,R0
   \   00051D   241F         ADD     A,#0x1f
   \   00051F   F582         MOV     DPL,A
   \   000521   E8           MOV     A,R0
   \   000522   3400         ADDC    A,#0x0
   \   000524   F583         MOV     DPH,A
   \   000526   E0           MOVX    A,@DPTR
   \   000527   FC           MOV     R4,A
   \   000528   A3           INC     DPTR
   \   000529   E0           MOVX    A,@DPTR
   \   00052A   FD           MOV     R5,A
   \   00052B   85..82       MOV     DPL,?XSP + 0
   \   00052E   85..83       MOV     DPH,?XSP + 1
   \   000531   E0           MOVX    A,@DPTR
   \   000532   F8           MOV     R0,A
   \   000533   A3           INC     DPTR
   \   000534   E0           MOVX    A,@DPTR
   \   000535   C8           XCH     A,R0
   \   000536   2421         ADD     A,#0x21
   \   000538   F582         MOV     DPL,A
   \   00053A   E8           MOV     A,R0
   \   00053B   3400         ADDC    A,#0x0
   \   00053D   F583         MOV     DPH,A
   \   00053F   E0           MOVX    A,@DPTR
   \   000540   FA           MOV     R2,A
   \   000541   A3           INC     DPTR
   \   000542   E0           MOVX    A,@DPTR
   \   000543   FB           MOV     R3,A
   \   000544   7900         MOV     R1,#0x0
   \   000546   12....       LCALL   ??HalUARTWrite?relay
   1134                  byte alphaindex;
   1135                  alphaindex=*(pkt->cmd.Data);
   \   000549   85..82       MOV     DPL,?XSP + 0
   \   00054C   85..83       MOV     DPH,?XSP + 1
   \   00054F   E0           MOVX    A,@DPTR
   \   000550   F8           MOV     R0,A
   \   000551   A3           INC     DPTR
   \   000552   E0           MOVX    A,@DPTR
   \   000553   C8           XCH     A,R0
   \   000554   2421         ADD     A,#0x21
   \   000556   F582         MOV     DPL,A
   \   000558   E8           MOV     A,R0
   \   000559   3400         ADDC    A,#0x0
   \   00055B   F583         MOV     DPH,A
   \   00055D   E0           MOVX    A,@DPTR
   \   00055E   F8           MOV     R0,A
   \   00055F   A3           INC     DPTR
   \   000560   E0           MOVX    A,@DPTR
   \   000561   F583         MOV     DPH,A
   \   000563   8882         MOV     DPL,R0
   \   000565   E0           MOVX    A,@DPTR
   \   000566   C0E0         PUSH    A
   \   000568   7402         MOV     A,#0x2
   \   00056A   12....       LCALL   ?XSTACK_DISP0_8
   \   00056D   D0E0         POP     A
   \   00056F   F0           MOVX    @DPTR,A
   1136                  if(alphaindex=='A')
   \   000570   7402         MOV     A,#0x2
   \   000572   12....       LCALL   ?XSTACK_DISP0_8
   \   000575   E0           MOVX    A,@DPTR
   \   000576   6441         XRL     A,#0x41
   \   000578   6003         JZ      $+5
   \   00057A   02....       LJMP    ??SampleApp_AnchorMSGCB_14 & 0xFFFF
   1137                   {  
   1138                        byte index;
   1139                        index=*(pkt->cmd.Data+1);
   \   00057D   85..82       MOV     DPL,?XSP + 0
   \   000580   85..83       MOV     DPH,?XSP + 1
   \   000583   E0           MOVX    A,@DPTR
   \   000584   F8           MOV     R0,A
   \   000585   A3           INC     DPTR
   \   000586   E0           MOVX    A,@DPTR
   \   000587   C8           XCH     A,R0
   \   000588   2421         ADD     A,#0x21
   \   00058A   F582         MOV     DPL,A
   \   00058C   E8           MOV     A,R0
   \   00058D   3400         ADDC    A,#0x0
   \   00058F   F583         MOV     DPH,A
   \   000591   E0           MOVX    A,@DPTR
   \   000592   F8           MOV     R0,A
   \   000593   A3           INC     DPTR
   \   000594   E0           MOVX    A,@DPTR
   \   000595   F583         MOV     DPH,A
   \   000597   8882         MOV     DPL,R0
   \   000599   A3           INC     DPTR
   \   00059A   E0           MOVX    A,@DPTR
   \   00059B   FC           MOV     R4,A
   1140                        
   1141                        avalue=10.0f*(float)((int)(*(pkt->cmd.Data+3))-48)+(float)((int)(*(pkt->cmd.Data+4))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+6))-48);
   \   00059C   85..82       MOV     DPL,?XSP + 0
   \   00059F   85..83       MOV     DPH,?XSP + 1
   \   0005A2   E0           MOVX    A,@DPTR
   \   0005A3   F8           MOV     R0,A
   \   0005A4   A3           INC     DPTR
   \   0005A5   E0           MOVX    A,@DPTR
   \   0005A6   C8           XCH     A,R0
   \   0005A7   2421         ADD     A,#0x21
   \   0005A9   F582         MOV     DPL,A
   \   0005AB   E8           MOV     A,R0
   \   0005AC   3400         ADDC    A,#0x0
   \   0005AE   F583         MOV     DPH,A
   \   0005B0   E0           MOVX    A,@DPTR
   \   0005B1   F8           MOV     R0,A
   \   0005B2   A3           INC     DPTR
   \   0005B3   E0           MOVX    A,@DPTR
   \   0005B4   F583         MOV     DPH,A
   \   0005B6   8882         MOV     DPL,R0
   \   0005B8   A3           INC     DPTR
   \   0005B9   A3           INC     DPTR
   \   0005BA   A3           INC     DPTR
   \   0005BB   E0           MOVX    A,@DPTR
   \   0005BC   F8           MOV     R0,A
   \   0005BD   7900         MOV     R1,#0x0
   \   0005BF   24D0         ADD     A,#-0x30
   \   0005C1   F5..         MOV     ?V0 + 4,A
   \   0005C3   E9           MOV     A,R1
   \   0005C4   34FF         ADDC    A,#-0x1
   \   0005C6   F5..         MOV     ?V0 + 5,A
   \   0005C8   E5..         MOV     A,?V0 + 5
   \   0005CA   33           RLC     A
   \   0005CB   95E0         SUBB    A,0xE0 /* A   */
   \   0005CD   F5..         MOV     ?V0 + 6,A
   \   0005CF   F5..         MOV     ?V0 + 7,A
   \   0005D1   78..         MOV     R0,#?V0 + 4
   \   0005D3   12....       LCALL   ?L_TO_FLT
   \   0005D6   90....       MOV     DPTR,#__Constant_41200000
   \   0005D9   78..         MOV     R0,#?V0 + 8
   \   0005DB   12....       LCALL   ?L_MOV_X
   \   0005DE   78..         MOV     R0,#?V0 + 4
   \   0005E0   79..         MOV     R1,#?V0 + 8
   \   0005E2   12....       LCALL   ?FLT_MUL
   \   0005E5   85..82       MOV     DPL,?XSP + 0
   \   0005E8   85..83       MOV     DPH,?XSP + 1
   \   0005EB   E0           MOVX    A,@DPTR
   \   0005EC   F8           MOV     R0,A
   \   0005ED   A3           INC     DPTR
   \   0005EE   E0           MOVX    A,@DPTR
   \   0005EF   C8           XCH     A,R0
   \   0005F0   2421         ADD     A,#0x21
   \   0005F2   F582         MOV     DPL,A
   \   0005F4   E8           MOV     A,R0
   \   0005F5   3400         ADDC    A,#0x0
   \   0005F7   F583         MOV     DPH,A
   \   0005F9   E0           MOVX    A,@DPTR
   \   0005FA   F8           MOV     R0,A
   \   0005FB   A3           INC     DPTR
   \   0005FC   E0           MOVX    A,@DPTR
   \   0005FD   F583         MOV     DPH,A
   \   0005FF   8882         MOV     DPL,R0
   \   000601   A3           INC     DPTR
   \   000602   A3           INC     DPTR
   \   000603   A3           INC     DPTR
   \   000604   A3           INC     DPTR
   \   000605   E0           MOVX    A,@DPTR
   \   000606   F8           MOV     R0,A
   \   000607   7900         MOV     R1,#0x0
   \   000609   24D0         ADD     A,#-0x30
   \   00060B   F5..         MOV     ?V0 + 8,A
   \   00060D   E9           MOV     A,R1
   \   00060E   34FF         ADDC    A,#-0x1
   \   000610   F5..         MOV     ?V0 + 9,A
   \   000612   E5..         MOV     A,?V0 + 9
   \   000614   33           RLC     A
   \   000615   95E0         SUBB    A,0xE0 /* A   */
   \   000617   F5..         MOV     ?V0 + 10,A
   \   000619   F5..         MOV     ?V0 + 11,A
   \   00061B   78..         MOV     R0,#?V0 + 8
   \   00061D   12....       LCALL   ?L_TO_FLT
   \   000620   78..         MOV     R0,#?V0 + 4
   \   000622   79..         MOV     R1,#?V0 + 8
   \   000624   12....       LCALL   ?FLT_ADD
   \   000627   85..82       MOV     DPL,?XSP + 0
   \   00062A   85..83       MOV     DPH,?XSP + 1
   \   00062D   E0           MOVX    A,@DPTR
   \   00062E   F8           MOV     R0,A
   \   00062F   A3           INC     DPTR
   \   000630   E0           MOVX    A,@DPTR
   \   000631   C8           XCH     A,R0
   \   000632   2421         ADD     A,#0x21
   \   000634   F582         MOV     DPL,A
   \   000636   E8           MOV     A,R0
   \   000637   3400         ADDC    A,#0x0
   \   000639   F583         MOV     DPH,A
   \   00063B   E0           MOVX    A,@DPTR
   \   00063C   F8           MOV     R0,A
   \   00063D   A3           INC     DPTR
   \   00063E   E0           MOVX    A,@DPTR
   \   00063F   C8           XCH     A,R0
   \   000640   2406         ADD     A,#0x6
   \   000642   F582         MOV     DPL,A
   \   000644   E8           MOV     A,R0
   \   000645   3400         ADDC    A,#0x0
   \   000647   F583         MOV     DPH,A
   \   000649   E0           MOVX    A,@DPTR
   \   00064A   F8           MOV     R0,A
   \   00064B   7900         MOV     R1,#0x0
   \   00064D   24D0         ADD     A,#-0x30
   \   00064F   F5..         MOV     ?V0 + 12,A
   \   000651   E9           MOV     A,R1
   \   000652   34FF         ADDC    A,#-0x1
   \   000654   F5..         MOV     ?V0 + 13,A
   \   000656   E5..         MOV     A,?V0 + 13
   \   000658   33           RLC     A
   \   000659   95E0         SUBB    A,0xE0 /* A   */
   \   00065B   F5..         MOV     ?V0 + 14,A
   \   00065D   F5..         MOV     ?V0 + 15,A
   \   00065F   78..         MOV     R0,#?V0 + 12
   \   000661   12....       LCALL   ?L_TO_FLT
   \   000664   90....       MOV     DPTR,#__Constant_3dcccccd
   \   000667   78..         MOV     R0,#?V0 + 8
   \   000669   12....       LCALL   ?L_MOV_X
   \   00066C   78..         MOV     R0,#?V0 + 12
   \   00066E   79..         MOV     R1,#?V0 + 8
   \   000670   12....       LCALL   ?FLT_MUL
   \   000673   78..         MOV     R0,#?V0 + 4
   \   000675   79..         MOV     R1,#?V0 + 12
   \   000677   12....       LCALL   ?FLT_ADD
   \   00067A   85....       MOV     ?V0 + 0,?V0 + 4
   \   00067D   85....       MOV     ?V0 + 1,?V0 + 5
   \   000680   85....       MOV     ?V0 + 2,?V0 + 6
   \   000683   85....       MOV     ?V0 + 3,?V0 + 7
   1142                        if(avalue>0)   
   \   000686   90....       MOV     DPTR,#__Constant_1
   \   000689   78..         MOV     R0,#?V0 + 4
   \   00068B   12....       LCALL   ?L_MOV_X
   \   00068E   78..         MOV     R0,#?V0 + 0
   \   000690   79..         MOV     R1,#?V0 + 4
   \   000692   12....       LCALL   ?FLT_GE
   \   000695   4003         JC      $+5
   \   000697   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1143                        {
   1144                            switch (index)
   \   00069A   7431         MOV     A,#0x31
   \   00069C   6C           XRL     A,R4
   \   00069D   7008         JNZ     ??SampleApp_AnchorMSGCB_2
   1145                                 case '1':
   1146                                    {
   1147                                            AValue[0]=avalue;
   \   00069F   90....       MOV     DPTR,#AValue
   \   0006A2   78..         MOV     R0,#?V0 + 0
   \   0006A4   12....       LCALL   ?L_MOV_TO_X
   1148                                            break;
   1149                                     }
   1150                                 case '2':
   1151                                    {
   1152                                            AValue[1]=avalue;
   \                     ??SampleApp_AnchorMSGCB_2:
   \   0006A7   90....       MOV     DPTR,#AValue + 4
   \   0006AA   78..         MOV     R0,#?V0 + 0
   \   0006AC   12....       LCALL   ?L_MOV_TO_X
   1153                                            break;
   \   0006AF   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1154                                     }
   1155                                 case '3':
   1156                                    {
   1157                                            AValue[2]=avalue;
   \                     ??SampleApp_AnchorMSGCB_3:
   \   0006B2   90....       MOV     DPTR,#AValue + 8
   \   0006B5   78..         MOV     R0,#?V0 + 0
   \   0006B7   12....       LCALL   ?L_MOV_TO_X
   1158                                            break;
   \   0006BA   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1159                                     }
   1160                                 case '4':
   1161                                    {
   1162                                            AValue[3]=avalue;
   \                     ??SampleApp_AnchorMSGCB_4:
   \   0006BD   90....       MOV     DPTR,#AValue + 12
   \   0006C0   78..         MOV     R0,#?V0 + 0
   \   0006C2   12....       LCALL   ?L_MOV_TO_X
   1163                                            break;
   \   0006C5   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1164                                     }
   1165                      
   1166                            break;
   1167                        }
   1168                   } 
   1169                         else if(alphaindex=='N')
   \                     ??SampleApp_AnchorMSGCB_14:
   \   0006C8   7402         MOV     A,#0x2
   \   0006CA   12....       LCALL   ?XSTACK_DISP0_8
   \   0006CD   E0           MOVX    A,@DPTR
   \   0006CE   644E         XRL     A,#0x4e
   \   0006D0   6003         JZ      $+5
   \   0006D2   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1170                       {
   1171                                byte index;
   1172                                index=*(pkt->cmd.Data+1);
   \   0006D5   85..82       MOV     DPL,?XSP + 0
   \   0006D8   85..83       MOV     DPH,?XSP + 1
   \   0006DB   E0           MOVX    A,@DPTR
   \   0006DC   F8           MOV     R0,A
   \   0006DD   A3           INC     DPTR
   \   0006DE   E0           MOVX    A,@DPTR
   \   0006DF   C8           XCH     A,R0
   \   0006E0   2421         ADD     A,#0x21
   \   0006E2   F582         MOV     DPL,A
   \   0006E4   E8           MOV     A,R0
   \   0006E5   3400         ADDC    A,#0x0
   \   0006E7   F583         MOV     DPH,A
   \   0006E9   E0           MOVX    A,@DPTR
   \   0006EA   F8           MOV     R0,A
   \   0006EB   A3           INC     DPTR
   \   0006EC   E0           MOVX    A,@DPTR
   \   0006ED   F583         MOV     DPH,A
   \   0006EF   8882         MOV     DPL,R0
   \   0006F1   A3           INC     DPTR
   \   0006F2   E0           MOVX    A,@DPTR
   \   0006F3   C0E0         PUSH    A
   \   0006F5   7403         MOV     A,#0x3
   \   0006F7   12....       LCALL   ?XSTACK_DISP0_8
   \   0006FA   D0E0         POP     A
   \   0006FC   F0           MOVX    @DPTR,A
   1173                                float nvalue;
   1174          //                      float tempn=0.0f;
   1175                                
   1176                                if(((int)(*(pkt->cmd.Data+3))-48)>=0&&((int)(*(pkt->cmd.Data+3))-48)<=9)
   \   0006FD   85..82       MOV     DPL,?XSP + 0
   \   000700   85..83       MOV     DPH,?XSP + 1
   \   000703   E0           MOVX    A,@DPTR
   \   000704   F8           MOV     R0,A
   \   000705   A3           INC     DPTR
   \   000706   E0           MOVX    A,@DPTR
   \   000707   C8           XCH     A,R0
   \   000708   2421         ADD     A,#0x21
   \   00070A   F582         MOV     DPL,A
   \   00070C   E8           MOV     A,R0
   \   00070D   3400         ADDC    A,#0x0
   \   00070F   F583         MOV     DPH,A
   \   000711   E0           MOVX    A,@DPTR
   \   000712   F8           MOV     R0,A
   \   000713   A3           INC     DPTR
   \   000714   E0           MOVX    A,@DPTR
   \   000715   F583         MOV     DPH,A
   \   000717   8882         MOV     DPL,R0
   \   000719   A3           INC     DPTR
   \   00071A   A3           INC     DPTR
   \   00071B   A3           INC     DPTR
   \   00071C   E0           MOVX    A,@DPTR
   \   00071D   F8           MOV     R0,A
   \   00071E   7900         MOV     R1,#0x0
   \   000720   24D0         ADD     A,#-0x30
   \   000722   F8           MOV     R0,A
   \   000723   E9           MOV     A,R1
   \   000724   34FF         ADDC    A,#-0x1
   \   000726   F9           MOV     R1,A
   \   000727   C3           CLR     C
   \   000728   E8           MOV     A,R0
   \   000729   9400         SUBB    A,#0x0
   \   00072B   E9           MOV     A,R1
   \   00072C   9400         SUBB    A,#0x0
   \   00072E   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000730   65D0         XRL     A,PSW
   \   000732   33           RLC     A
   \   000733   5003         JNC     $+5
   \   000735   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   \   000738   85..82       MOV     DPL,?XSP + 0
   \   00073B   85..83       MOV     DPH,?XSP + 1
   \   00073E   E0           MOVX    A,@DPTR
   \   00073F   F8           MOV     R0,A
   \   000740   A3           INC     DPTR
   \   000741   E0           MOVX    A,@DPTR
   \   000742   C8           XCH     A,R0
   \   000743   2421         ADD     A,#0x21
   \   000745   F582         MOV     DPL,A
   \   000747   E8           MOV     A,R0
   \   000748   3400         ADDC    A,#0x0
   \   00074A   F583         MOV     DPH,A
   \   00074C   E0           MOVX    A,@DPTR
   \   00074D   F8           MOV     R0,A
   \   00074E   A3           INC     DPTR
   \   00074F   E0           MOVX    A,@DPTR
   \   000750   F583         MOV     DPH,A
   \   000752   8882         MOV     DPL,R0
   \   000754   A3           INC     DPTR
   \   000755   A3           INC     DPTR
   \   000756   A3           INC     DPTR
   \   000757   E0           MOVX    A,@DPTR
   \   000758   F8           MOV     R0,A
   \   000759   7900         MOV     R1,#0x0
   \   00075B   24D0         ADD     A,#-0x30
   \   00075D   F8           MOV     R0,A
   \   00075E   E9           MOV     A,R1
   \   00075F   34FF         ADDC    A,#-0x1
   \   000761   F9           MOV     R1,A
   \   000762   C3           CLR     C
   \   000763   E8           MOV     A,R0
   \   000764   940A         SUBB    A,#0xa
   \   000766   E9           MOV     A,R1
   \   000767   9400         SUBB    A,#0x0
   \   000769   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00076B   65D0         XRL     A,PSW
   \   00076D   33           RLC     A
   \   00076E   4003         JC      $+5
   \   000770   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1177                                {  
   1178                                  
   1179                                  nvalue=(float)((int)(*(pkt->cmd.Data+3))-48)+0.1f*(float)((int)(*(pkt->cmd.Data+5))-48)+0.01f*(float)((int)(*(pkt->cmd.Data+6))-48);
   \   000773   85..82       MOV     DPL,?XSP + 0
   \   000776   85..83       MOV     DPH,?XSP + 1
   \   000779   E0           MOVX    A,@DPTR
   \   00077A   F8           MOV     R0,A
   \   00077B   A3           INC     DPTR
   \   00077C   E0           MOVX    A,@DPTR
   \   00077D   C8           XCH     A,R0
   \   00077E   2421         ADD     A,#0x21
   \   000780   F582         MOV     DPL,A
   \   000782   E8           MOV     A,R0
   \   000783   3400         ADDC    A,#0x0
   \   000785   F583         MOV     DPH,A
   \   000787   E0           MOVX    A,@DPTR
   \   000788   F8           MOV     R0,A
   \   000789   A3           INC     DPTR
   \   00078A   E0           MOVX    A,@DPTR
   \   00078B   F583         MOV     DPH,A
   \   00078D   8882         MOV     DPL,R0
   \   00078F   A3           INC     DPTR
   \   000790   A3           INC     DPTR
   \   000791   A3           INC     DPTR
   \   000792   E0           MOVX    A,@DPTR
   \   000793   F8           MOV     R0,A
   \   000794   7900         MOV     R1,#0x0
   \   000796   24D0         ADD     A,#-0x30
   \   000798   F5..         MOV     ?V0 + 8,A
   \   00079A   E9           MOV     A,R1
   \   00079B   34FF         ADDC    A,#-0x1
   \   00079D   F5..         MOV     ?V0 + 9,A
   \   00079F   E5..         MOV     A,?V0 + 9
   \   0007A1   33           RLC     A
   \   0007A2   95E0         SUBB    A,0xE0 /* A   */
   \   0007A4   F5..         MOV     ?V0 + 10,A
   \   0007A6   F5..         MOV     ?V0 + 11,A
   \   0007A8   78..         MOV     R0,#?V0 + 8
   \   0007AA   12....       LCALL   ?L_TO_FLT
   \   0007AD   C0..         PUSH    ?V0 + 8
   \   0007AF   C0..         PUSH    ?V0 + 9
   \   0007B1   C0..         PUSH    ?V0 + 10
   \   0007B3   C0..         PUSH    ?V0 + 11
   \   0007B5   85..82       MOV     DPL,?XSP + 0
   \   0007B8   85..83       MOV     DPH,?XSP + 1
   \   0007BB   E0           MOVX    A,@DPTR
   \   0007BC   F8           MOV     R0,A
   \   0007BD   A3           INC     DPTR
   \   0007BE   E0           MOVX    A,@DPTR
   \   0007BF   C8           XCH     A,R0
   \   0007C0   2421         ADD     A,#0x21
   \   0007C2   F582         MOV     DPL,A
   \   0007C4   E8           MOV     A,R0
   \   0007C5   3400         ADDC    A,#0x0
   \   0007C7   F583         MOV     DPH,A
   \   0007C9   E0           MOVX    A,@DPTR
   \   0007CA   F8           MOV     R0,A
   \   0007CB   A3           INC     DPTR
   \   0007CC   E0           MOVX    A,@DPTR
   \   0007CD   F583         MOV     DPH,A
   \   0007CF   8882         MOV     DPL,R0
   \   0007D1   A3           INC     DPTR
   \   0007D2   A3           INC     DPTR
   \   0007D3   A3           INC     DPTR
   \   0007D4   A3           INC     DPTR
   \   0007D5   A3           INC     DPTR
   \   0007D6   E0           MOVX    A,@DPTR
   \   0007D7   F8           MOV     R0,A
   \   0007D8   7900         MOV     R1,#0x0
   \   0007DA   24D0         ADD     A,#-0x30
   \   0007DC   F5..         MOV     ?V0 + 8,A
   \   0007DE   E9           MOV     A,R1
   \   0007DF   34FF         ADDC    A,#-0x1
   \   0007E1   F5..         MOV     ?V0 + 9,A
   \   0007E3   E5..         MOV     A,?V0 + 9
   \   0007E5   33           RLC     A
   \   0007E6   95E0         SUBB    A,0xE0 /* A   */
   \   0007E8   F5..         MOV     ?V0 + 10,A
   \   0007EA   F5..         MOV     ?V0 + 11,A
   \   0007EC   78..         MOV     R0,#?V0 + 8
   \   0007EE   12....       LCALL   ?L_TO_FLT
   \   0007F1   90....       MOV     DPTR,#__Constant_3dcccccd
   \   0007F4   78..         MOV     R0,#?V0 + 12
   \   0007F6   12....       LCALL   ?L_MOV_X
   \   0007F9   78..         MOV     R0,#?V0 + 8
   \   0007FB   79..         MOV     R1,#?V0 + 12
   \   0007FD   12....       LCALL   ?FLT_MUL
   \   000800   D0..         POP     ?V0 + 15
   \   000802   D0..         POP     ?V0 + 14
   \   000804   D0..         POP     ?V0 + 13
   \   000806   D0..         POP     ?V0 + 12
   \   000808   78..         MOV     R0,#?V0 + 12
   \   00080A   79..         MOV     R1,#?V0 + 8
   \   00080C   12....       LCALL   ?FLT_ADD
   \   00080F   C0..         PUSH    ?V0 + 12
   \   000811   C0..         PUSH    ?V0 + 13
   \   000813   C0..         PUSH    ?V0 + 14
   \   000815   C0..         PUSH    ?V0 + 15
   \   000817   85..82       MOV     DPL,?XSP + 0
   \   00081A   85..83       MOV     DPH,?XSP + 1
   \   00081D   E0           MOVX    A,@DPTR
   \   00081E   F8           MOV     R0,A
   \   00081F   A3           INC     DPTR
   \   000820   E0           MOVX    A,@DPTR
   \   000821   C8           XCH     A,R0
   \   000822   2421         ADD     A,#0x21
   \   000824   F582         MOV     DPL,A
   \   000826   E8           MOV     A,R0
   \   000827   3400         ADDC    A,#0x0
   \   000829   F583         MOV     DPH,A
   \   00082B   E0           MOVX    A,@DPTR
   \   00082C   F8           MOV     R0,A
   \   00082D   A3           INC     DPTR
   \   00082E   E0           MOVX    A,@DPTR
   \   00082F   C8           XCH     A,R0
   \   000830   2406         ADD     A,#0x6
   \   000832   F582         MOV     DPL,A
   \   000834   E8           MOV     A,R0
   \   000835   3400         ADDC    A,#0x0
   \   000837   F583         MOV     DPH,A
   \   000839   E0           MOVX    A,@DPTR
   \   00083A   F8           MOV     R0,A
   \   00083B   7900         MOV     R1,#0x0
   \   00083D   24D0         ADD     A,#-0x30
   \   00083F   F5..         MOV     ?V0 + 8,A
   \   000841   E9           MOV     A,R1
   \   000842   34FF         ADDC    A,#-0x1
   \   000844   F5..         MOV     ?V0 + 9,A
   \   000846   E5..         MOV     A,?V0 + 9
   \   000848   33           RLC     A
   \   000849   95E0         SUBB    A,0xE0 /* A   */
   \   00084B   F5..         MOV     ?V0 + 10,A
   \   00084D   F5..         MOV     ?V0 + 11,A
   \   00084F   78..         MOV     R0,#?V0 + 8
   \   000851   12....       LCALL   ?L_TO_FLT
   \   000854   90....       MOV     DPTR,#__Constant_3c23d70a
   \   000857   78..         MOV     R0,#?V0 + 12
   \   000859   12....       LCALL   ?L_MOV_X
   \   00085C   78..         MOV     R0,#?V0 + 8
   \   00085E   79..         MOV     R1,#?V0 + 12
   \   000860   12....       LCALL   ?FLT_MUL
   \   000863   D0..         POP     ?V0 + 15
   \   000865   D0..         POP     ?V0 + 14
   \   000867   D0..         POP     ?V0 + 13
   \   000869   D0..         POP     ?V0 + 12
   \   00086B   78..         MOV     R0,#?V0 + 12
   \   00086D   79..         MOV     R1,#?V0 + 8
   \   00086F   12....       LCALL   ?FLT_ADD
   \   000872   85....       MOV     ?V0 + 4,?V0 + 12
   \   000875   85....       MOV     ?V0 + 5,?V0 + 13
   \   000878   85....       MOV     ?V0 + 6,?V0 + 14
   \   00087B   85....       MOV     ?V0 + 7,?V0 + 15
   1180                                    
   1181                                     switch (index)
   \   00087E   7403         MOV     A,#0x3
   \   000880   12....       LCALL   ?XSTACK_DISP0_8
   \   000883   E0           MOVX    A,@DPTR
   \   000884   24CF         ADD     A,#-0x31
   \   000886   6012         JZ      ??SampleApp_AnchorMSGCB_15
   \   000888   14           DEC     A
   \   000889   604E         JZ      ??SampleApp_AnchorMSGCB_16
   \   00088B   14           DEC     A
   \   00088C   7003         JNZ     $+5
   \   00088E   02....       LJMP    ??SampleApp_AnchorMSGCB_17 & 0xFFFF
   \   000891   14           DEC     A
   \   000892   7003         JNZ     $+5
   \   000894   02....       LJMP    ??SampleApp_AnchorMSGCB_18 & 0xFFFF
   \   000897   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1182                                     {  
   1183                                          case '1':
   1184                                           {
   1185          //                                   pernBuf1[nindex1]=nvalue;
   1186          //                                   nindex1++;
   1187          //                                   if(nindex1==7)
   1188          //                                   {
   1189          //                                     nindex1=0;
   1190          //                                     for (int i=0; i<8; i++)
   1191          //                                     {
   1192          //                                        tempn+=pernBuf1[i];
   1193          //                                     }
   1194          //                                      nValue[0]=tempn;
   1195          //                                   }
   1196                                               moving_average_f(nvalue, pernBuf1, 7, nindex1, &nValue[0]);
   \                     ??SampleApp_AnchorMSGCB_15:
   \   00089A                ; Setup parameters for call to function moving_average_f
   \   00089A   75....       MOV     ?V0 + 8,#nValue & 0xff
   \   00089D   75....       MOV     ?V0 + 9,#(nValue >> 8) & 0xff
   \   0008A0   78..         MOV     R0,#?V0 + 8
   \   0008A2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008A5   75....       MOV     ?V0 + 8,#nindex1 & 0xff
   \   0008A8   75....       MOV     ?V0 + 9,#(nindex1 >> 8) & 0xff
   \   0008AB   78..         MOV     R0,#?V0 + 8
   \   0008AD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008B0   75..07       MOV     ?V0 + 8,#0x7
   \   0008B3   75..00       MOV     ?V0 + 9,#0x0
   \   0008B6   78..         MOV     R0,#?V0 + 8
   \   0008B8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008BB   75....       MOV     ?V0 + 8,#pernBuf1 & 0xff
   \   0008BE   75....       MOV     ?V0 + 9,#(pernBuf1 >> 8) & 0xff
   \   0008C1   78..         MOV     R0,#?V0 + 8
   \   0008C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008C6   AA..         MOV     R2,?V0 + 4
   \   0008C8   AB..         MOV     R3,?V0 + 5
   \   0008CA   AC..         MOV     R4,?V0 + 6
   \   0008CC   AD..         MOV     R5,?V0 + 7
   \   0008CE   12....       LCALL   ??moving_average_f?relay
   \   0008D1   7408         MOV     A,#0x8
   \   0008D3   12....       LCALL   ?DEALLOC_XSTACK8
   1197                                             
   1198                                            
   1199                                             break;
   \   0008D6   02....       LJMP    ??SampleApp_AnchorMSGCB_5 & 0xFFFF
   1200                                           }
   1201                                          case '2':
   1202                                           {
   1203          //                                   pernBuf2[nindex2]=nvalue;
   1204          //                                   nindex2++;
   1205          //                                   if(nindex2==7)
   1206          //                                   {
   1207          //                                     nindex1=0;
   1208          //                                     for (int i=0; i<8; i++)
   1209          //                                     {
   1210          //                                        tempn+=pernBuf2[i];
   1211          //                                     }
   1212          //                                      nValue[1]=tempn;
   1213          //                                   }
   1214                                                moving_average_f(nvalue, pernBuf2, 7, nindex2, &nValue[1]);
   \                     ??SampleApp_AnchorMSGCB_16:
   \   0008D9                ; Setup parameters for call to function moving_average_f
   \   0008D9   75....       MOV     ?V0 + 8,#(nValue + 4) & 0xff
   \   0008DC   75....       MOV     ?V0 + 9,#((nValue + 4) >> 8) & 0xff
   \   0008DF   78..         MOV     R0,#?V0 + 8
   \   0008E1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008E4   75....       MOV     ?V0 + 8,#nindex2 & 0xff
   \   0008E7   75....       MOV     ?V0 + 9,#(nindex2 >> 8) & 0xff
   \   0008EA   78..         MOV     R0,#?V0 + 8
   \   0008EC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008EF   75..07       MOV     ?V0 + 8,#0x7
   \   0008F2   75..00       MOV     ?V0 + 9,#0x0
   \   0008F5   78..         MOV     R0,#?V0 + 8
   \   0008F7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008FA   75....       MOV     ?V0 + 8,#pernBuf2 & 0xff
   \   0008FD   75....       MOV     ?V0 + 9,#(pernBuf2 >> 8) & 0xff
   \   000900   78..         MOV     R0,#?V0 + 8
   \   000902   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000905   AA..         MOV     R2,?V0 + 4
   \   000907   AB..         MOV     R3,?V0 + 5
   \   000909   AC..         MOV     R4,?V0 + 6
   \   00090B   AD..         MOV     R5,?V0 + 7
   \   00090D   12....       LCALL   ??moving_average_f?relay
   \   000910   7408         MOV     A,#0x8
   \   000912   12....       LCALL   ?DEALLOC_XSTACK8
   1215                                             break;
   \   000915   807A         SJMP    ??SampleApp_AnchorMSGCB_5
   1216                                           }
   1217                                           case '3':
   1218                                           {
   1219          //                                   pernBuf3[nindex3]=nvalue;
   1220          //                                   nindex3++;
   1221          //                                   if(nindex3==7)
   1222          //                                   {
   1223          //                                     nindex3=0;
   1224          //                                     for (int i=0; i<8; i++)
   1225          //                                     {
   1226          //                                        tempn+=pernBuf3[i];
   1227          //                                     }
   1228          //                                      nValue[2]=tempn;
   1229          //                                   }
   1230                                                moving_average_f(nvalue, pernBuf3, 7, nindex3, &nValue[2]);
   \                     ??SampleApp_AnchorMSGCB_17:
   \   000917                ; Setup parameters for call to function moving_average_f
   \   000917   75....       MOV     ?V0 + 8,#(nValue + 8) & 0xff
   \   00091A   75....       MOV     ?V0 + 9,#((nValue + 8) >> 8) & 0xff
   \   00091D   78..         MOV     R0,#?V0 + 8
   \   00091F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000922   75....       MOV     ?V0 + 8,#nindex3 & 0xff
   \   000925   75....       MOV     ?V0 + 9,#(nindex3 >> 8) & 0xff
   \   000928   78..         MOV     R0,#?V0 + 8
   \   00092A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00092D   75..07       MOV     ?V0 + 8,#0x7
   \   000930   75..00       MOV     ?V0 + 9,#0x0
   \   000933   78..         MOV     R0,#?V0 + 8
   \   000935   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000938   75....       MOV     ?V0 + 8,#pernBuf3 & 0xff
   \   00093B   75....       MOV     ?V0 + 9,#(pernBuf3 >> 8) & 0xff
   \   00093E   78..         MOV     R0,#?V0 + 8
   \   000940   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000943   AA..         MOV     R2,?V0 + 4
   \   000945   AB..         MOV     R3,?V0 + 5
   \   000947   AC..         MOV     R4,?V0 + 6
   \   000949   AD..         MOV     R5,?V0 + 7
   \   00094B   12....       LCALL   ??moving_average_f?relay
   \   00094E   7408         MOV     A,#0x8
   \   000950   12....       LCALL   ?DEALLOC_XSTACK8
   1231                                             break;
   \   000953   803C         SJMP    ??SampleApp_AnchorMSGCB_5
   1232                                           }
   1233                                           case '4':
   1234                                           {
   1235          //                                   pernBuf4[nindex4]=nvalue;
   1236          //                                   nindex4++;
   1237          //                                   if(nindex4==7)
   1238          //                                   {
   1239          //                                     nindex4=0;
   1240          //                                     for (int i=0; i<8; i++)
   1241          //                                     {
   1242          //                                        tempn+=pernBuf4[i];
   1243          //                                     }
   1244          //                                      nValue[3]=tempn;
   1245          //                                   }
   1246                                                moving_average_f(nvalue, pernBuf4, 7, nindex4, &nValue[3]);
   \                     ??SampleApp_AnchorMSGCB_18:
   \   000955                ; Setup parameters for call to function moving_average_f
   \   000955   75....       MOV     ?V0 + 8,#(nValue + 12) & 0xff
   \   000958   75....       MOV     ?V0 + 9,#((nValue + 12) >> 8) & 0xff
   \   00095B   78..         MOV     R0,#?V0 + 8
   \   00095D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000960   75....       MOV     ?V0 + 8,#nindex4 & 0xff
   \   000963   75....       MOV     ?V0 + 9,#(nindex4 >> 8) & 0xff
   \   000966   78..         MOV     R0,#?V0 + 8
   \   000968   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00096B   75..07       MOV     ?V0 + 8,#0x7
   \   00096E   75..00       MOV     ?V0 + 9,#0x0
   \   000971   78..         MOV     R0,#?V0 + 8
   \   000973   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000976   75....       MOV     ?V0 + 8,#pernBuf4 & 0xff
   \   000979   75....       MOV     ?V0 + 9,#(pernBuf4 >> 8) & 0xff
   \   00097C   78..         MOV     R0,#?V0 + 8
   \   00097E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000981   AA..         MOV     R2,?V0 + 4
   \   000983   AB..         MOV     R3,?V0 + 5
   \   000985   AC..         MOV     R4,?V0 + 6
   \   000987   AD..         MOV     R5,?V0 + 7
   \   000989   12....       LCALL   ??moving_average_f?relay
   \   00098C   7408         MOV     A,#0x8
   \   00098E   12....       LCALL   ?DEALLOC_XSTACK8
   1247                                             break;
   1248                                                   }
   1249                                          break;
   1250                                      }
   1251                                    }
   1252                         }
   1253                  break;
   1254                   }
   1255            }
   1256          
   1257          }
   \                     ??SampleApp_AnchorMSGCB_5:
   \   000991   7404         MOV     A,#0x4
   \   000993   12....       LCALL   ?DEALLOC_XSTACK8
   \   000996   7F10         MOV     R7,#0x10
   \   000998   02....       LJMP    ?BANKED_LEAVE_XDATA
   1258          /*********************************************************************
   1259           * @fn      SampleApp_SendPeriodicMessage
   1260           *
   1261           * @brief   Send the periodic message.
   1262           *
   1263           * @param   none
   1264           *
   1265           * @return  none
   1266           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1267          void SampleApp_Router_SendPeriodicMessage( int index )
   \                     SampleApp_Router_SendPeriodicMessage:
   1268          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   1269              
   1270            // Router broadcast to everyone
   1271            SampleApp_Router_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   00000E   90....       MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 8
   \   000011   740F         MOV     A,#0xf
   \   000013   F0           MOVX    @DPTR,A
   1272            SampleApp_Router_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000014   90....       MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 9
   \   000017   7414         MOV     A,#0x14
   \   000019   F0           MOVX    @DPTR,A
   1273            SampleApp_Router_Periodic_DstAddr.addr.shortAddr = 0xFFFF;
   \   00001A   90....       MOV     DPTR,#SampleApp_Router_Periodic_DstAddr
   \   00001D   74FF         MOV     A,#-0x1
   \   00001F   F0           MOVX    @DPTR,A
   \   000020   A3           INC     DPTR
   \   000021   74FF         MOV     A,#-0x1
   \   000023   F0           MOVX    @DPTR,A
   1274            
   1275            uint8 data[2]="A";
   \   000024   90....       MOV     DPTR,#`?<Constant "A">`
   \   000027   C082         PUSH    DPL
   \   000029   C083         PUSH    DPH
   \   00002B   85..82       MOV     DPL,?XSP + 0
   \   00002E   85..83       MOV     DPH,?XSP + 1
   \   000031   AC82         MOV     R4,DPL
   \   000033   AD83         MOV     R5,DPH
   \   000035   D083         POP     DPH
   \   000037   D082         POP     DPL
   \   000039   7402         MOV     A,#0x2
   \   00003B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1276            data[1]=0x30+index;
   \   00003E   EE           MOV     A,R6
   \   00003F   2430         ADD     A,#0x30
   \   000041   C0E0         PUSH    A
   \   000043   7401         MOV     A,#0x1
   \   000045   12....       LCALL   ?XSTACK_DISP0_8
   \   000048   D0E0         POP     A
   \   00004A   F0           MOVX    @DPTR,A
   1277            if ( AF_DataRequest( &SampleApp_Router_Periodic_DstAddr, &SampleApp_epDesc,
   1278                                 SAMPLEAPP_PERIODIC_CLUSTERID,
   1279                                 osal_strlen("A1"),
   1280                                 data,
   1281                                 &SampleApp_TransID,
   1282                                 AF_SKIP_ROUTING,//AF_DISCV_ROUTE,  
   1283                                 1//AF_DEFAULT_RADIUS 
   1284                                  ) == afStatus_SUCCESS )
   \   00004B                ; Setup parameters for call to function AF_DataRequest
   \   00004B   75..01       MOV     ?V0 + 0,#0x1
   \   00004E   78..         MOV     R0,#?V0 + 0
   \   000050   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000053   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000056   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000059   78..         MOV     R0,#?V0 + 0
   \   00005B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005E   7403         MOV     A,#0x3
   \   000060   12....       LCALL   ?XSTACK_DISP0_8
   \   000063   8582..       MOV     ?V0 + 0,DPL
   \   000066   8583..       MOV     ?V0 + 1,DPH
   \   000069   78..         MOV     R0,#?V0 + 0
   \   00006B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006E                ; Setup parameters for call to function osal_strlen
   \   00006E   7A..         MOV     R2,#`?<Constant "A1">` & 0xff
   \   000070   7B..         MOV     R3,#(`?<Constant "A1">` >> 8) & 0xff
   \   000072   12....       LCALL   ??osal_strlen?relay
   \   000075   8A..         MOV     ?V0 + 0,R2
   \   000077   8B..         MOV     ?V0 + 1,R3
   \   000079   78..         MOV     R0,#?V0 + 0
   \   00007B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007E   75..01       MOV     ?V0 + 0,#0x1
   \   000081   75..00       MOV     ?V0 + 1,#0x0
   \   000084   78..         MOV     R0,#?V0 + 0
   \   000086   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000089   7980         MOV     R1,#-0x80
   \   00008B   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00008D   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00008F   7A..         MOV     R2,#SampleApp_Router_Periodic_DstAddr & 0xff
   \   000091   7B..         MOV     R3,#(SampleApp_Router_Periodic_DstAddr >> 8) & 0xff
   \   000093   12....       LCALL   ??AF_DataRequest?relay
   \   000096   7409         MOV     A,#0x9
   \   000098   12....       LCALL   ?DEALLOC_XSTACK8
   \   00009B   E9           MOV     A,R1
   1285            {
   1286            }
   1287            else
   1288            {
   1289              // Error occurred in request to send.
   1290            }
   1291          }
   \   00009C   7402         MOV     A,#0x2
   \   00009E   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000A1   7F02         MOV     R7,#0x2
   \   0000A3   02....       LJMP    ?BANKED_LEAVE_XDATA
   1292          
   1293          /*********************************************************************
   1294           * @fn      SampleApp_Router_calibrationNMessage
   1295           *
   1296           * @brief   Send the periodic message.
   1297           *
   1298           * @param   none
   1299           *
   1300           * @return  none
   1301           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1302          void SampleApp_Router_calibrationNMessage( int index , float nvalue )
   \                     SampleApp_Router_calibrationNMessage:
   1303          {
   \   000000   74EA         MOV     A,#-0x16
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 22
   \   000005                ; Auto size: 7
   \   000005   74F9         MOV     A,#-0x7
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 12,R2
   \   00000C   8B..         MOV     ?V0 + 13,R3
   \   00000E   741D         MOV     A,#0x1d
   \   000010   12....       LCALL   ?XSTACK_DISP0_8
   \   000013   78..         MOV     R0,#?V0 + 4
   \   000015   12....       LCALL   ?L_MOV_X
   1304              
   1305            // Router broadcast to everyone
   1306          //  SampleApp_Router_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   1307          //  SampleApp_Router_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   1308          //  SampleApp_Router_Periodic_DstAddr.addr.shortAddr = 0xFFFF;
   1309            SampleApp_Router_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrGroup;  //AddrGroup
   \   000018   90....       MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 8
   \   00001B   7401         MOV     A,#0x1
   \   00001D   F0           MOVX    @DPTR,A
   1310            SampleApp_Router_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   00001E   90....       MOV     DPTR,#SampleApp_Router_Periodic_DstAddr + 9
   \   000021   7414         MOV     A,#0x14
   \   000023   F0           MOVX    @DPTR,A
   1311            SampleApp_Router_Periodic_DstAddr.addr.shortAddr =  SAMPLEAPP_CalN_GROUP;    //SAMPLEAPP_QUADROTOR_GROUP
   \   000024   90....       MOV     DPTR,#SampleApp_Router_Periodic_DstAddr
   \   000027   7401         MOV     A,#0x1
   \   000029   F0           MOVX    @DPTR,A
   \   00002A   A3           INC     DPTR
   \   00002B   7400         MOV     A,#0x0
   \   00002D   F0           MOVX    @DPTR,A
   1312           
   1313          
   1314           
   1315            float tempn=nvalue;  
   \   00002E   85....       MOV     ?V0 + 0,?V0 + 4
   \   000031   85....       MOV     ?V0 + 1,?V0 + 5
   \   000034   85....       MOV     ?V0 + 2,?V0 + 6
   \   000037   85....       MOV     ?V0 + 3,?V0 + 7
   1316            if(nvalue>0)
   \   00003A   90....       MOV     DPTR,#__Constant_1
   \   00003D   78..         MOV     R0,#?V0 + 8
   \   00003F   12....       LCALL   ?L_MOV_X
   \   000042   78..         MOV     R0,#?V0 + 4
   \   000044   79..         MOV     R1,#?V0 + 8
   \   000046   12....       LCALL   ?FLT_GE
   \   000049   4003         JC      $+5
   \   00004B   02....       LJMP    ??SampleApp_Router_calibrationNMessage_0 & 0xFFFF
   1317            {
   1318                    uint8 data[7]="N";
   \   00004E   90....       MOV     DPTR,#`?<Constant "N">`
   \   000051   C082         PUSH    DPL
   \   000053   C083         PUSH    DPH
   \   000055   85..82       MOV     DPL,?XSP + 0
   \   000058   85..83       MOV     DPH,?XSP + 1
   \   00005B   AC82         MOV     R4,DPL
   \   00005D   AD83         MOV     R5,DPH
   \   00005F   D083         POP     DPH
   \   000061   D082         POP     DPL
   \   000063   7407         MOV     A,#0x7
   \   000065   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1319                    data[1]=0x30+index;
   \   000068   E5..         MOV     A,?V0 + 12
   \   00006A   2430         ADD     A,#0x30
   \   00006C   C0E0         PUSH    A
   \   00006E   7401         MOV     A,#0x1
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   D0E0         POP     A
   \   000075   F0           MOVX    @DPTR,A
   1320          
   1321                    data[2]=':';
   \   000076   7402         MOV     A,#0x2
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   743A         MOV     A,#0x3a
   \   00007D   F0           MOVX    @DPTR,A
   1322                    
   1323                    uint8 number8;
   1324                    number8=(uint8)tempn;
   \   00007E   85....       MOV     ?V0 + 8,?V0 + 0
   \   000081   85....       MOV     ?V0 + 9,?V0 + 1
   \   000084   85....       MOV     ?V0 + 10,?V0 + 2
   \   000087   85....       MOV     ?V0 + 11,?V0 + 3
   \   00008A   78..         MOV     R0,#?V0 + 8
   \   00008C   12....       LCALL   ?FLT_TO_L
   \   00008F   E5..         MOV     A,?V0 + 8
   \   000091   AE..         MOV     R6,?V0 + 8
   1325                    data[3]=number8+'0';
   \   000093   7430         MOV     A,#0x30
   \   000095   2E           ADD     A,R6
   \   000096   C0E0         PUSH    A
   \   000098   7403         MOV     A,#0x3
   \   00009A   12....       LCALL   ?XSTACK_DISP0_8
   \   00009D   D0E0         POP     A
   \   00009F   F0           MOVX    @DPTR,A
   1326                    data[4]='.';
   \   0000A0   7404         MOV     A,#0x4
   \   0000A2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A5   742E         MOV     A,#0x2e
   \   0000A7   F0           MOVX    @DPTR,A
   1327                    tempn=10*(tempn-(float)number8);
   \   0000A8   8E..         MOV     ?V0 + 8,R6
   \   0000AA   E4           CLR     A
   \   0000AB   F5..         MOV     ?V0 + 9,A
   \   0000AD   F5..         MOV     ?V0 + 10,A
   \   0000AF   F5..         MOV     ?V0 + 11,A
   \   0000B1   78..         MOV     R0,#?V0 + 8
   \   0000B3   12....       LCALL   ?UL_TO_FLT
   \   0000B6   78..         MOV     R0,#?V0 + 0
   \   0000B8   79..         MOV     R1,#?V0 + 8
   \   0000BA   12....       LCALL   ?FLT_SUB
   \   0000BD   90....       MOV     DPTR,#__Constant_41200000
   \   0000C0   78..         MOV     R0,#?V0 + 8
   \   0000C2   12....       LCALL   ?L_MOV_X
   \   0000C5   78..         MOV     R0,#?V0 + 0
   \   0000C7   79..         MOV     R1,#?V0 + 8
   \   0000C9   12....       LCALL   ?FLT_MUL
   1328                    number8=(uint8)tempn;
   \   0000CC   85....       MOV     ?V0 + 8,?V0 + 0
   \   0000CF   85....       MOV     ?V0 + 9,?V0 + 1
   \   0000D2   85....       MOV     ?V0 + 10,?V0 + 2
   \   0000D5   85....       MOV     ?V0 + 11,?V0 + 3
   \   0000D8   78..         MOV     R0,#?V0 + 8
   \   0000DA   12....       LCALL   ?FLT_TO_L
   \   0000DD   E5..         MOV     A,?V0 + 8
   \   0000DF   AE..         MOV     R6,?V0 + 8
   1329                    data[5]=number8+'0';
   \   0000E1   7430         MOV     A,#0x30
   \   0000E3   2E           ADD     A,R6
   \   0000E4   C0E0         PUSH    A
   \   0000E6   7405         MOV     A,#0x5
   \   0000E8   12....       LCALL   ?XSTACK_DISP0_8
   \   0000EB   D0E0         POP     A
   \   0000ED   F0           MOVX    @DPTR,A
   1330                    tempn=10*(tempn-(float)number8);
   \   0000EE   8E..         MOV     ?V0 + 8,R6
   \   0000F0   E4           CLR     A
   \   0000F1   F5..         MOV     ?V0 + 9,A
   \   0000F3   F5..         MOV     ?V0 + 10,A
   \   0000F5   F5..         MOV     ?V0 + 11,A
   \   0000F7   78..         MOV     R0,#?V0 + 8
   \   0000F9   12....       LCALL   ?UL_TO_FLT
   \   0000FC   78..         MOV     R0,#?V0 + 0
   \   0000FE   79..         MOV     R1,#?V0 + 8
   \   000100   12....       LCALL   ?FLT_SUB
   \   000103   90....       MOV     DPTR,#__Constant_41200000
   \   000106   78..         MOV     R0,#?V0 + 8
   \   000108   12....       LCALL   ?L_MOV_X
   \   00010B   78..         MOV     R0,#?V0 + 0
   \   00010D   79..         MOV     R1,#?V0 + 8
   \   00010F   12....       LCALL   ?FLT_MUL
   1331                    number8=(uint8)tempn;
   \   000112   85....       MOV     ?V0 + 8,?V0 + 0
   \   000115   85....       MOV     ?V0 + 9,?V0 + 1
   \   000118   85....       MOV     ?V0 + 10,?V0 + 2
   \   00011B   85....       MOV     ?V0 + 11,?V0 + 3
   \   00011E   78..         MOV     R0,#?V0 + 8
   \   000120   12....       LCALL   ?FLT_TO_L
   \   000123   E5..         MOV     A,?V0 + 8
   \   000125   AE..         MOV     R6,?V0 + 8
   1332                    data[6]=number8+'0';
   \   000127   7430         MOV     A,#0x30
   \   000129   2E           ADD     A,R6
   \   00012A   C0E0         PUSH    A
   \   00012C   7406         MOV     A,#0x6
   \   00012E   12....       LCALL   ?XSTACK_DISP0_8
   \   000131   D0E0         POP     A
   \   000133   F0           MOVX    @DPTR,A
   1333                                
   1334                    
   1335                    if ( AF_DataRequest( &SampleApp_Router_Periodic_DstAddr, &SampleApp_epDesc,
   1336                                         CALBRATION_N_CLUSTERID,
   1337                                         7,//osal_strlen("A1")+1,
   1338                                         data,
   1339                                         &SampleApp_TransID,
   1340                                         AF_DISCV_ROUTE,//AF_DISCV_ROUTE,  
   1341                                         1//AF_DEFAULT_RADIUS 
   1342                                          ) == afStatus_SUCCESS )
   \   000134                ; Setup parameters for call to function AF_DataRequest
   \   000134   75..01       MOV     ?V0 + 8,#0x1
   \   000137   78..         MOV     R0,#?V0 + 8
   \   000139   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00013C   75....       MOV     ?V0 + 8,#SampleApp_TransID & 0xff
   \   00013F   75....       MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
   \   000142   78..         MOV     R0,#?V0 + 8
   \   000144   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000147   7403         MOV     A,#0x3
   \   000149   12....       LCALL   ?XSTACK_DISP0_8
   \   00014C   8582..       MOV     ?V0 + 8,DPL
   \   00014F   8583..       MOV     ?V0 + 9,DPH
   \   000152   78..         MOV     R0,#?V0 + 8
   \   000154   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000157   75..07       MOV     ?V0 + 8,#0x7
   \   00015A   75..00       MOV     ?V0 + 9,#0x0
   \   00015D   78..         MOV     R0,#?V0 + 8
   \   00015F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000162   75..02       MOV     ?V0 + 8,#0x2
   \   000165   75..00       MOV     ?V0 + 9,#0x0
   \   000168   78..         MOV     R0,#?V0 + 8
   \   00016A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00016D   7920         MOV     R1,#0x20
   \   00016F   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000171   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000173   7A..         MOV     R2,#SampleApp_Router_Periodic_DstAddr & 0xff
   \   000175   7B..         MOV     R3,#(SampleApp_Router_Periodic_DstAddr >> 8) & 0xff
   \   000177   12....       LCALL   ??AF_DataRequest?relay
   \   00017A   7409         MOV     A,#0x9
   \   00017C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00017F   E9           MOV     A,R1
   1343                    {
   1344                    }
   1345                    else
   1346                    {
   1347                      // Error occurred in request to send.
   1348                    }
   1349            }
   1350          }
   \                     ??SampleApp_Router_calibrationNMessage_0:
   \   000180   7407         MOV     A,#0x7
   \   000182   12....       LCALL   ?DEALLOC_XSTACK8
   \   000185   7F0E         MOV     R7,#0xe
   \   000187   02....       LJMP    ?BANKED_LEAVE_XDATA
   1351          
   1352          /*********************************************************************
   1353           * @fn      SampleApp_Tester_calibrationAMessage
   1354           *
   1355           * @brief   Send the periodic message.
   1356           *
   1357           * @param   none
   1358           *
   1359           * @return  none
   1360           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1361          void SampleApp_Tester_calibrationAMessage( int index , float A )
   \                     SampleApp_Tester_calibrationAMessage:
   1362          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   7421         MOV     A,#0x21
   \   000010   12....       LCALL   ?XSTACK_DISP0_8
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?L_MOV_X
   1363          //    SampleApp_Tester_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   1364          //  SampleApp_Tester_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   1365          //  SampleApp_Tester_DstAddr.addr.shortAddr = 0xFFFF;
   1366              
   1367            SampleApp_Tester_DstAddr.addrMode = (afAddrMode_t)AddrGroup;  //AddrGroup
   \   000018   90....       MOV     DPTR,#SampleApp_Tester_DstAddr + 8
   \   00001B   7401         MOV     A,#0x1
   \   00001D   F0           MOVX    @DPTR,A
   1368            SampleApp_Tester_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   00001E   90....       MOV     DPTR,#SampleApp_Tester_DstAddr + 9
   \   000021   7414         MOV     A,#0x14
   \   000023   F0           MOVX    @DPTR,A
   1369            SampleApp_Tester_DstAddr.addr.shortAddr =  SAMPLEAPP_CalN_GROUP;    //SAMPLEAPP_QUADROTOR_GROUP
   \   000024   90....       MOV     DPTR,#SampleApp_Tester_DstAddr
   \   000027   7401         MOV     A,#0x1
   \   000029   F0           MOVX    @DPTR,A
   \   00002A   A3           INC     DPTR
   \   00002B   7400         MOV     A,#0x0
   \   00002D   F0           MOVX    @DPTR,A
   1370           
   1371          
   1372          
   1373            float tempn=A;  
   \   00002E   85....       MOV     ?V0 + 4,?V0 + 0
   \   000031   85....       MOV     ?V0 + 5,?V0 + 1
   \   000034   85....       MOV     ?V0 + 6,?V0 + 2
   \   000037   85....       MOV     ?V0 + 7,?V0 + 3
   1374            if(A>=0)
   \   00003A   90....       MOV     DPTR,#__Constant_0
   \   00003D   78..         MOV     R0,#?V0 + 8
   \   00003F   12....       LCALL   ?L_MOV_X
   \   000042   78..         MOV     R0,#?V0 + 0
   \   000044   79..         MOV     R1,#?V0 + 8
   \   000046   12....       LCALL   ?FLT_GE
   \   000049   4003         JC      $+5
   \   00004B   02....       LJMP    ??SampleApp_Tester_calibrationAMessage_0 & 0xFFFF
   1375            {
   1376                    uint8 data[7]="A";
   \   00004E   90....       MOV     DPTR,#`?<Constant "A">_1`
   \   000051   C082         PUSH    DPL
   \   000053   C083         PUSH    DPH
   \   000055   7401         MOV     A,#0x1
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   AC82         MOV     R4,DPL
   \   00005C   AD83         MOV     R5,DPH
   \   00005E   D083         POP     DPH
   \   000060   D082         POP     DPL
   \   000062   7407         MOV     A,#0x7
   \   000064   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1377                    data[1]=0x30+index;
   \   000067   EE           MOV     A,R6
   \   000068   2430         ADD     A,#0x30
   \   00006A   C0E0         PUSH    A
   \   00006C   7402         MOV     A,#0x2
   \   00006E   12....       LCALL   ?XSTACK_DISP0_8
   \   000071   D0E0         POP     A
   \   000073   F0           MOVX    @DPTR,A
   1378          
   1379                    data[2]=':';
   \   000074   7403         MOV     A,#0x3
   \   000076   12....       LCALL   ?XSTACK_DISP0_8
   \   000079   743A         MOV     A,#0x3a
   \   00007B   F0           MOVX    @DPTR,A
   1380                    
   1381                    uint8 number8;
   1382                    number8=(uint8)(tempn/10);
   \   00007C   85....       MOV     ?V0 + 12,?V0 + 4
   \   00007F   85....       MOV     ?V0 + 13,?V0 + 5
   \   000082   85....       MOV     ?V0 + 14,?V0 + 6
   \   000085   85....       MOV     ?V0 + 15,?V0 + 7
   \   000088   90....       MOV     DPTR,#__Constant_41200000
   \   00008B   78..         MOV     R0,#?V0 + 8
   \   00008D   12....       LCALL   ?L_MOV_X
   \   000090   78..         MOV     R0,#?V0 + 12
   \   000092   79..         MOV     R1,#?V0 + 8
   \   000094   12....       LCALL   ?FLT_DIV
   \   000097   78..         MOV     R0,#?V0 + 12
   \   000099   12....       LCALL   ?FLT_TO_L
   \   00009C   E5..         MOV     A,?V0 + 12
   \   00009E   85..82       MOV     DPL,?XSP + 0
   \   0000A1   85..83       MOV     DPH,?XSP + 1
   \   0000A4   E5..         MOV     A,?V0 + 12
   \   0000A6   F0           MOVX    @DPTR,A
   1383                    data[3]=number8+'0';
   \   0000A7   85..82       MOV     DPL,?XSP + 0
   \   0000AA   85..83       MOV     DPH,?XSP + 1
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   2430         ADD     A,#0x30
   \   0000B0   C0E0         PUSH    A
   \   0000B2   7404         MOV     A,#0x4
   \   0000B4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B7   D0E0         POP     A
   \   0000B9   F0           MOVX    @DPTR,A
   1384                    number8=(uint8)(((int)tempn)%10);
   \   0000BA   85....       MOV     ?V0 + 8,?V0 + 4
   \   0000BD   85....       MOV     ?V0 + 9,?V0 + 5
   \   0000C0   85....       MOV     ?V0 + 10,?V0 + 6
   \   0000C3   85....       MOV     ?V0 + 11,?V0 + 7
   \   0000C6   78..         MOV     R0,#?V0 + 8
   \   0000C8   12....       LCALL   ?FLT_TO_L
   \   0000CB   A8..         MOV     R0,?V0 + 8
   \   0000CD   A9..         MOV     R1,?V0 + 9
   \   0000CF   7A0A         MOV     R2,#0xa
   \   0000D1   7B00         MOV     R3,#0x0
   \   0000D3   12....       LCALL   ?S_DIV_MOD
   \   0000D6   EA           MOV     A,R2
   \   0000D7   85..82       MOV     DPL,?XSP + 0
   \   0000DA   85..83       MOV     DPH,?XSP + 1
   \   0000DD   F0           MOVX    @DPTR,A
   1385                    data[4]=number8+'0';
   \   0000DE   85..82       MOV     DPL,?XSP + 0
   \   0000E1   85..83       MOV     DPH,?XSP + 1
   \   0000E4   E0           MOVX    A,@DPTR
   \   0000E5   2430         ADD     A,#0x30
   \   0000E7   C0E0         PUSH    A
   \   0000E9   7405         MOV     A,#0x5
   \   0000EB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000EE   D0E0         POP     A
   \   0000F0   F0           MOVX    @DPTR,A
   1386                    data[5]='.';
   \   0000F1   7406         MOV     A,#0x6
   \   0000F3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F6   742E         MOV     A,#0x2e
   \   0000F8   F0           MOVX    @DPTR,A
   1387                    tempn=10*(tempn-(int)tempn);
   \   0000F9   85....       MOV     ?V0 + 8,?V0 + 4
   \   0000FC   85....       MOV     ?V0 + 9,?V0 + 5
   \   0000FF   85....       MOV     ?V0 + 10,?V0 + 6
   \   000102   85....       MOV     ?V0 + 11,?V0 + 7
   \   000105   78..         MOV     R0,#?V0 + 8
   \   000107   12....       LCALL   ?FLT_TO_L
   \   00010A   E5..         MOV     A,?V0 + 9
   \   00010C   33           RLC     A
   \   00010D   95E0         SUBB    A,0xE0 /* A   */
   \   00010F   F5..         MOV     ?V0 + 10,A
   \   000111   F5..         MOV     ?V0 + 11,A
   \   000113   78..         MOV     R0,#?V0 + 8
   \   000115   12....       LCALL   ?L_TO_FLT
   \   000118   78..         MOV     R0,#?V0 + 4
   \   00011A   79..         MOV     R1,#?V0 + 8
   \   00011C   12....       LCALL   ?FLT_SUB
   \   00011F   90....       MOV     DPTR,#__Constant_41200000
   \   000122   78..         MOV     R0,#?V0 + 8
   \   000124   12....       LCALL   ?L_MOV_X
   \   000127   78..         MOV     R0,#?V0 + 4
   \   000129   79..         MOV     R1,#?V0 + 8
   \   00012B   12....       LCALL   ?FLT_MUL
   1388                    number8=(uint8)tempn;
   \   00012E   85....       MOV     ?V0 + 8,?V0 + 4
   \   000131   85....       MOV     ?V0 + 9,?V0 + 5
   \   000134   85....       MOV     ?V0 + 10,?V0 + 6
   \   000137   85....       MOV     ?V0 + 11,?V0 + 7
   \   00013A   78..         MOV     R0,#?V0 + 8
   \   00013C   12....       LCALL   ?FLT_TO_L
   \   00013F   E5..         MOV     A,?V0 + 8
   \   000141   85..82       MOV     DPL,?XSP + 0
   \   000144   85..83       MOV     DPH,?XSP + 1
   \   000147   E5..         MOV     A,?V0 + 8
   \   000149   F0           MOVX    @DPTR,A
   1389                    data[6]=number8+'0';
   \   00014A   85..82       MOV     DPL,?XSP + 0
   \   00014D   85..83       MOV     DPH,?XSP + 1
   \   000150   E0           MOVX    A,@DPTR
   \   000151   2430         ADD     A,#0x30
   \   000153   C0E0         PUSH    A
   \   000155   7407         MOV     A,#0x7
   \   000157   12....       LCALL   ?XSTACK_DISP0_8
   \   00015A   D0E0         POP     A
   \   00015C   F0           MOVX    @DPTR,A
   1390                         
   1391                    
   1392                    if ( AF_DataRequest( &SampleApp_Tester_DstAddr, &SampleApp_epDesc,
   1393                                         CALBRATION_N_CLUSTERID,
   1394                                         7,//osal_strlen("A1")+1,
   1395                                         data,
   1396                                         &SampleApp_TransID,
   1397                                         AF_DISCV_ROUTE,//AF_DISCV_ROUTE,  
   1398                                         1//AF_DEFAULT_RADIUS 
   1399                                          ) == afStatus_SUCCESS )
   \   00015D                ; Setup parameters for call to function AF_DataRequest
   \   00015D   75..01       MOV     ?V0 + 8,#0x1
   \   000160   78..         MOV     R0,#?V0 + 8
   \   000162   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000165   75....       MOV     ?V0 + 8,#SampleApp_TransID & 0xff
   \   000168   75....       MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
   \   00016B   78..         MOV     R0,#?V0 + 8
   \   00016D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000170   7404         MOV     A,#0x4
   \   000172   12....       LCALL   ?XSTACK_DISP0_8
   \   000175   8582..       MOV     ?V0 + 8,DPL
   \   000178   8583..       MOV     ?V0 + 9,DPH
   \   00017B   78..         MOV     R0,#?V0 + 8
   \   00017D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000180   75..07       MOV     ?V0 + 8,#0x7
   \   000183   75..00       MOV     ?V0 + 9,#0x0
   \   000186   78..         MOV     R0,#?V0 + 8
   \   000188   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00018B   75..02       MOV     ?V0 + 8,#0x2
   \   00018E   75..00       MOV     ?V0 + 9,#0x0
   \   000191   78..         MOV     R0,#?V0 + 8
   \   000193   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000196   7920         MOV     R1,#0x20
   \   000198   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00019A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00019C   7A..         MOV     R2,#SampleApp_Tester_DstAddr & 0xff
   \   00019E   7B..         MOV     R3,#(SampleApp_Tester_DstAddr >> 8) & 0xff
   \   0001A0   12....       LCALL   ??AF_DataRequest?relay
   \   0001A3   7409         MOV     A,#0x9
   \   0001A5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001A8   E9           MOV     A,R1
   \   0001A9   C0E0         PUSH    A
   \   0001AB   7408         MOV     A,#0x8
   \   0001AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0001B0   D0E0         POP     A
   \   0001B2   F0           MOVX    @DPTR,A
   1400                    {
   1401                    }
   1402                    else
   1403                    {
   1404                      // Error occurred in request to send.
   1405                    }
   1406            }
   1407          }
   \                     ??SampleApp_Tester_calibrationAMessage_0:
   \   0001B3   7409         MOV     A,#0x9
   \   0001B5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001B8   7F10         MOV     R7,#0x10
   \   0001BA   02....       LJMP    ?BANKED_LEAVE_XDATA
   1408          
   1409          
   1410          /*********************************************************************
   1411           * @fn      SampleApp_Quadrotor_SendLocation
   1412           *
   1413           * @brief   Send the flash message to group 1.
   1414           *
   1415           * @param   flashTime - in milliseconds
   1416           *
   1417           * @return  none
   1418           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1419          void SampleApp_Quadrotor_SendLocation( int index )
   \                     SampleApp_Quadrotor_SendLocation:
   1420          {
   \   000000   74EA         MOV     A,#-0x16
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 22
   \   000005                ; Auto size: 26
   \   000005   74E6         MOV     A,#-0x1a
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 12,R2
   \   00000C   8B..         MOV     ?V0 + 13,R3
   1421            
   1422            SampleApp_Quadrotor_Location_DstAddr.addrMode = (afAddrMode_t)AddrGroup;  //AddrGroup
   \   00000E   90....       MOV     DPTR,#SampleApp_Quadrotor_Location_DstAddr + 8
   \   000011   7401         MOV     A,#0x1
   \   000013   F0           MOVX    @DPTR,A
   1423            SampleApp_Quadrotor_Location_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000014   90....       MOV     DPTR,#SampleApp_Quadrotor_Location_DstAddr + 9
   \   000017   7414         MOV     A,#0x14
   \   000019   F0           MOVX    @DPTR,A
   1424            SampleApp_Quadrotor_Location_DstAddr.addr.shortAddr = SAMPLEAPP_QUADROTOR_GROUP;    //SAMPLEAPP_QUADROTOR_GROUP
   \   00001A   90....       MOV     DPTR,#SampleApp_Quadrotor_Location_DstAddr
   \   00001D   7402         MOV     A,#0x2
   \   00001F   F0           MOVX    @DPTR,A
   \   000020   A3           INC     DPTR
   \   000021   7400         MOV     A,#0x0
   \   000023   F0           MOVX    @DPTR,A
   1425            
   1426            float xposition;
   1427            float yposition;
   1428            float zposition;
   1429            
   1430            zposition=locationZ[index-1];
   \   000024   A8..         MOV     R0,?V0 + 12
   \   000026   A9..         MOV     R1,?V0 + 13
   \   000028   E8           MOV     A,R0
   \   000029   75F004       MOV     B,#0x4
   \   00002C   A4           MUL     AB
   \   00002D   C8           XCH     A,R0
   \   00002E   AAF0         MOV     R2,B
   \   000030   75F000       MOV     B,#0x0
   \   000033   A4           MUL     AB
   \   000034   2A           ADD     A,R2
   \   000035   FA           MOV     R2,A
   \   000036   75F004       MOV     B,#0x4
   \   000039   E5..         MOV     A,?V0 + 13
   \   00003B   A4           MUL     AB
   \   00003C   2A           ADD     A,R2
   \   00003D   F9           MOV     R1,A
   \   00003E   74..         MOV     A,#(locationZ + 252) & 0xff
   \   000040   28           ADD     A,R0
   \   000041   F582         MOV     DPL,A
   \   000043   74..         MOV     A,#((locationZ - 4) >> 8) & 0xff
   \   000045   39           ADDC    A,R1
   \   000046   F583         MOV     DPH,A
   \   000048   78..         MOV     R0,#?V0 + 0
   \   00004A   12....       LCALL   ?L_MOV_X
   \   00004D   85....       MOV     ?V0 + 4,?V0 + 0
   \   000050   85....       MOV     ?V0 + 5,?V0 + 1
   \   000053   85....       MOV     ?V0 + 6,?V0 + 2
   \   000056   85....       MOV     ?V0 + 7,?V0 + 3
   1431            // using min-max algorithm
   1432            SampleApp_MinMax_localization(&xposition, &yposition, zposition, nValue,
   1433                                          RssiValue, AValue, AnchorX, AnchorY);
   \   000059                ; Setup parameters for call to function SampleApp_MinMax_localization
   \   000059   75....       MOV     ?V0 + 0,#AnchorY & 0xff
   \   00005C   75....       MOV     ?V0 + 1,#(AnchorY >> 8) & 0xff
   \   00005F   78..         MOV     R0,#?V0 + 0
   \   000061   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000064   75....       MOV     ?V0 + 0,#AnchorX & 0xff
   \   000067   75....       MOV     ?V0 + 1,#(AnchorX >> 8) & 0xff
   \   00006A   78..         MOV     R0,#?V0 + 0
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   75....       MOV     ?V0 + 0,#AValue & 0xff
   \   000072   75....       MOV     ?V0 + 1,#(AValue >> 8) & 0xff
   \   000075   78..         MOV     R0,#?V0 + 0
   \   000077   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007A   75....       MOV     ?V0 + 0,#RssiValue & 0xff
   \   00007D   75....       MOV     ?V0 + 1,#(RssiValue >> 8) & 0xff
   \   000080   78..         MOV     R0,#?V0 + 0
   \   000082   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000085   75....       MOV     ?V0 + 0,#nValue & 0xff
   \   000088   75....       MOV     ?V0 + 1,#(nValue >> 8) & 0xff
   \   00008B   78..         MOV     R0,#?V0 + 0
   \   00008D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000090   78..         MOV     R0,#?V0 + 4
   \   000092   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   000095   740E         MOV     A,#0xe
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   AC82         MOV     R4,DPL
   \   00009C   AD83         MOV     R5,DPH
   \   00009E   7412         MOV     A,#0x12
   \   0000A0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A3   AA82         MOV     R2,DPL
   \   0000A5   AB83         MOV     R3,DPH
   \   0000A7   12....       LCALL   ??SampleApp_MinMax_localization?relay
   \   0000AA   740E         MOV     A,#0xe
   \   0000AC   12....       LCALL   ?DEALLOC_XSTACK8
   1434            
   1435            // using weighted centroid localization algorithm
   1436            //SampleApp_WCL_localization(&xposition, &yposition, nValue,RssiValue,AValue,AnchorX,AnchorY);
   1437            locationX[index-1]=xposition;
   \   0000AF   7404         MOV     A,#0x4
   \   0000B1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B4   12....       LCALL   ?XLOAD_R2345
   \   0000B7   A8..         MOV     R0,?V0 + 12
   \   0000B9   A9..         MOV     R1,?V0 + 13
   \   0000BB   E8           MOV     A,R0
   \   0000BC   75F004       MOV     B,#0x4
   \   0000BF   A4           MUL     AB
   \   0000C0   C8           XCH     A,R0
   \   0000C1   AEF0         MOV     R6,B
   \   0000C3   75F000       MOV     B,#0x0
   \   0000C6   A4           MUL     AB
   \   0000C7   2E           ADD     A,R6
   \   0000C8   FE           MOV     R6,A
   \   0000C9   75F004       MOV     B,#0x4
   \   0000CC   E5..         MOV     A,?V0 + 13
   \   0000CE   A4           MUL     AB
   \   0000CF   2E           ADD     A,R6
   \   0000D0   F9           MOV     R1,A
   \   0000D1   74..         MOV     A,#(locationX + 252) & 0xff
   \   0000D3   28           ADD     A,R0
   \   0000D4   F582         MOV     DPL,A
   \   0000D6   74..         MOV     A,#((locationX - 4) >> 8) & 0xff
   \   0000D8   39           ADDC    A,R1
   \   0000D9   F583         MOV     DPH,A
   \   0000DB   12....       LCALL   ?XSTORE_R2345
   1438            locationY[index-1]=yposition;
   \   0000DE   85..82       MOV     DPL,?XSP + 0
   \   0000E1   85..83       MOV     DPH,?XSP + 1
   \   0000E4   12....       LCALL   ?XLOAD_R2345
   \   0000E7   A8..         MOV     R0,?V0 + 12
   \   0000E9   A9..         MOV     R1,?V0 + 13
   \   0000EB   E8           MOV     A,R0
   \   0000EC   75F004       MOV     B,#0x4
   \   0000EF   A4           MUL     AB
   \   0000F0   C8           XCH     A,R0
   \   0000F1   AEF0         MOV     R6,B
   \   0000F3   75F000       MOV     B,#0x0
   \   0000F6   A4           MUL     AB
   \   0000F7   2E           ADD     A,R6
   \   0000F8   FE           MOV     R6,A
   \   0000F9   75F004       MOV     B,#0x4
   \   0000FC   E5..         MOV     A,?V0 + 13
   \   0000FE   A4           MUL     AB
   \   0000FF   2E           ADD     A,R6
   \   000100   F9           MOV     R1,A
   \   000101   74..         MOV     A,#(locationY + 252) & 0xff
   \   000103   28           ADD     A,R0
   \   000104   F582         MOV     DPL,A
   \   000106   74..         MOV     A,#((locationY - 4) >> 8) & 0xff
   \   000108   39           ADDC    A,R1
   \   000109   F583         MOV     DPH,A
   \   00010B   12....       LCALL   ?XSTORE_R2345
   1439            
   1440            
   1441          
   1442            uint8 data[18]="Q";
   \   00010E   90....       MOV     DPTR,#`?<Constant "Q">`
   \   000111   C082         PUSH    DPL
   \   000113   C083         PUSH    DPH
   \   000115   7408         MOV     A,#0x8
   \   000117   12....       LCALL   ?XSTACK_DISP0_8
   \   00011A   AC82         MOV     R4,DPL
   \   00011C   AD83         MOV     R5,DPH
   \   00011E   D083         POP     DPH
   \   000120   D082         POP     DPL
   \   000122   7412         MOV     A,#0x12
   \   000124   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1443            data[1]=0x30+index;
   \   000127   E5..         MOV     A,?V0 + 12
   \   000129   2430         ADD     A,#0x30
   \   00012B   C0E0         PUSH    A
   \   00012D   7409         MOV     A,#0x9
   \   00012F   12....       LCALL   ?XSTACK_DISP0_8
   \   000132   D0E0         POP     A
   \   000134   F0           MOVX    @DPTR,A
   1444            data[2]='[';
   \   000135   740A         MOV     A,#0xa
   \   000137   12....       LCALL   ?XSTACK_DISP0_8
   \   00013A   745B         MOV     A,#0x5b
   \   00013C   F0           MOVX    @DPTR,A
   1445            data[17]=']';
   \   00013D   7419         MOV     A,#0x19
   \   00013F   12....       LCALL   ?XSTACK_DISP0_8
   \   000142   745D         MOV     A,#0x5d
   \   000144   F0           MOVX    @DPTR,A
   1446            uint8 number8;
   1447            number8=(uint8)xposition;
   \   000145   7404         MOV     A,#0x4
   \   000147   12....       LCALL   ?XSTACK_DISP0_8
   \   00014A   78..         MOV     R0,#?V0 + 0
   \   00014C   12....       LCALL   ?L_MOV_X
   \   00014F   78..         MOV     R0,#?V0 + 0
   \   000151   12....       LCALL   ?FLT_TO_L
   \   000154   E5..         MOV     A,?V0 + 0
   \   000156   AE..         MOV     R6,?V0 + 0
   1448            data[3]=number8+'0';
   \   000158   7430         MOV     A,#0x30
   \   00015A   2E           ADD     A,R6
   \   00015B   C0E0         PUSH    A
   \   00015D   740B         MOV     A,#0xb
   \   00015F   12....       LCALL   ?XSTACK_DISP0_8
   \   000162   D0E0         POP     A
   \   000164   F0           MOVX    @DPTR,A
   1449            data[4]='.';
   \   000165   740C         MOV     A,#0xc
   \   000167   12....       LCALL   ?XSTACK_DISP0_8
   \   00016A   742E         MOV     A,#0x2e
   \   00016C   F0           MOVX    @DPTR,A
   1450            xposition=10*(xposition-(float)number8);
   \   00016D   7404         MOV     A,#0x4
   \   00016F   12....       LCALL   ?XSTACK_DISP0_8
   \   000172   78..         MOV     R0,#?V0 + 0
   \   000174   12....       LCALL   ?L_MOV_X
   \   000177   8E..         MOV     ?V0 + 8,R6
   \   000179   E4           CLR     A
   \   00017A   F5..         MOV     ?V0 + 9,A
   \   00017C   F5..         MOV     ?V0 + 10,A
   \   00017E   F5..         MOV     ?V0 + 11,A
   \   000180   78..         MOV     R0,#?V0 + 8
   \   000182   12....       LCALL   ?UL_TO_FLT
   \   000185   78..         MOV     R0,#?V0 + 0
   \   000187   79..         MOV     R1,#?V0 + 8
   \   000189   12....       LCALL   ?FLT_SUB
   \   00018C   90....       MOV     DPTR,#__Constant_41200000
   \   00018F   78..         MOV     R0,#?V0 + 8
   \   000191   12....       LCALL   ?L_MOV_X
   \   000194   78..         MOV     R0,#?V0 + 0
   \   000196   79..         MOV     R1,#?V0 + 8
   \   000198   12....       LCALL   ?FLT_MUL
   \   00019B   7404         MOV     A,#0x4
   \   00019D   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A0   78..         MOV     R0,#?V0 + 0
   \   0001A2   12....       LCALL   ?L_MOV_TO_X
   1451            number8=(uint8)xposition;
   \   0001A5   7404         MOV     A,#0x4
   \   0001A7   12....       LCALL   ?XSTACK_DISP0_8
   \   0001AA   78..         MOV     R0,#?V0 + 0
   \   0001AC   12....       LCALL   ?L_MOV_X
   \   0001AF   78..         MOV     R0,#?V0 + 0
   \   0001B1   12....       LCALL   ?FLT_TO_L
   \   0001B4   E5..         MOV     A,?V0 + 0
   \   0001B6   AE..         MOV     R6,?V0 + 0
   1452            data[5]=number8+'0';
   \   0001B8   7430         MOV     A,#0x30
   \   0001BA   2E           ADD     A,R6
   \   0001BB   C0E0         PUSH    A
   \   0001BD   740D         MOV     A,#0xd
   \   0001BF   12....       LCALL   ?XSTACK_DISP0_8
   \   0001C2   D0E0         POP     A
   \   0001C4   F0           MOVX    @DPTR,A
   1453            xposition=10*(xposition-(float)number8);
   \   0001C5   7404         MOV     A,#0x4
   \   0001C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0001CA   78..         MOV     R0,#?V0 + 0
   \   0001CC   12....       LCALL   ?L_MOV_X
   \   0001CF   8E..         MOV     ?V0 + 8,R6
   \   0001D1   E4           CLR     A
   \   0001D2   F5..         MOV     ?V0 + 9,A
   \   0001D4   F5..         MOV     ?V0 + 10,A
   \   0001D6   F5..         MOV     ?V0 + 11,A
   \   0001D8   78..         MOV     R0,#?V0 + 8
   \   0001DA   12....       LCALL   ?UL_TO_FLT
   \   0001DD   78..         MOV     R0,#?V0 + 0
   \   0001DF   79..         MOV     R1,#?V0 + 8
   \   0001E1   12....       LCALL   ?FLT_SUB
   \   0001E4   90....       MOV     DPTR,#__Constant_41200000
   \   0001E7   78..         MOV     R0,#?V0 + 8
   \   0001E9   12....       LCALL   ?L_MOV_X
   \   0001EC   78..         MOV     R0,#?V0 + 0
   \   0001EE   79..         MOV     R1,#?V0 + 8
   \   0001F0   12....       LCALL   ?FLT_MUL
   \   0001F3   7404         MOV     A,#0x4
   \   0001F5   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F8   78..         MOV     R0,#?V0 + 0
   \   0001FA   12....       LCALL   ?L_MOV_TO_X
   1454            number8=(uint8)xposition+'0';
   \   0001FD   7404         MOV     A,#0x4
   \   0001FF   12....       LCALL   ?XSTACK_DISP0_8
   \   000202   78..         MOV     R0,#?V0 + 0
   \   000204   12....       LCALL   ?L_MOV_X
   \   000207   78..         MOV     R0,#?V0 + 0
   \   000209   12....       LCALL   ?FLT_TO_L
   \   00020C   E5..         MOV     A,?V0 + 0
   \   00020E   2430         ADD     A,#0x30
   \   000210   FE           MOV     R6,A
   1455            data[6]=number8;
   \   000211   C0E0         PUSH    A
   \   000213   740E         MOV     A,#0xe
   \   000215   12....       LCALL   ?XSTACK_DISP0_8
   \   000218   D0E0         POP     A
   \   00021A   F0           MOVX    @DPTR,A
   1456            data[7]=',';
   \   00021B   740F         MOV     A,#0xf
   \   00021D   12....       LCALL   ?XSTACK_DISP0_8
   \   000220   742C         MOV     A,#0x2c
   \   000222   F0           MOVX    @DPTR,A
   1457            number8=(uint8)yposition;
   \   000223   85..82       MOV     DPL,?XSP + 0
   \   000226   85..83       MOV     DPH,?XSP + 1
   \   000229   78..         MOV     R0,#?V0 + 0
   \   00022B   12....       LCALL   ?L_MOV_X
   \   00022E   78..         MOV     R0,#?V0 + 0
   \   000230   12....       LCALL   ?FLT_TO_L
   \   000233   E5..         MOV     A,?V0 + 0
   \   000235   AE..         MOV     R6,?V0 + 0
   1458            data[8]=number8+'0';
   \   000237   7430         MOV     A,#0x30
   \   000239   2E           ADD     A,R6
   \   00023A   C0E0         PUSH    A
   \   00023C   7410         MOV     A,#0x10
   \   00023E   12....       LCALL   ?XSTACK_DISP0_8
   \   000241   D0E0         POP     A
   \   000243   F0           MOVX    @DPTR,A
   1459            data[9]='.';
   \   000244   7411         MOV     A,#0x11
   \   000246   12....       LCALL   ?XSTACK_DISP0_8
   \   000249   742E         MOV     A,#0x2e
   \   00024B   F0           MOVX    @DPTR,A
   1460            yposition=10*(yposition-(float)number8);
   \   00024C   85..82       MOV     DPL,?XSP + 0
   \   00024F   85..83       MOV     DPH,?XSP + 1
   \   000252   78..         MOV     R0,#?V0 + 0
   \   000254   12....       LCALL   ?L_MOV_X
   \   000257   8E..         MOV     ?V0 + 8,R6
   \   000259   E4           CLR     A
   \   00025A   F5..         MOV     ?V0 + 9,A
   \   00025C   F5..         MOV     ?V0 + 10,A
   \   00025E   F5..         MOV     ?V0 + 11,A
   \   000260   78..         MOV     R0,#?V0 + 8
   \   000262   12....       LCALL   ?UL_TO_FLT
   \   000265   78..         MOV     R0,#?V0 + 0
   \   000267   79..         MOV     R1,#?V0 + 8
   \   000269   12....       LCALL   ?FLT_SUB
   \   00026C   90....       MOV     DPTR,#__Constant_41200000
   \   00026F   78..         MOV     R0,#?V0 + 8
   \   000271   12....       LCALL   ?L_MOV_X
   \   000274   78..         MOV     R0,#?V0 + 0
   \   000276   79..         MOV     R1,#?V0 + 8
   \   000278   12....       LCALL   ?FLT_MUL
   \   00027B   85..82       MOV     DPL,?XSP + 0
   \   00027E   85..83       MOV     DPH,?XSP + 1
   \   000281   78..         MOV     R0,#?V0 + 0
   \   000283   12....       LCALL   ?L_MOV_TO_X
   1461            number8=(uint8)yposition;
   \   000286   85..82       MOV     DPL,?XSP + 0
   \   000289   85..83       MOV     DPH,?XSP + 1
   \   00028C   78..         MOV     R0,#?V0 + 0
   \   00028E   12....       LCALL   ?L_MOV_X
   \   000291   78..         MOV     R0,#?V0 + 0
   \   000293   12....       LCALL   ?FLT_TO_L
   \   000296   E5..         MOV     A,?V0 + 0
   \   000298   AE..         MOV     R6,?V0 + 0
   1462            data[10]=number8+'0';
   \   00029A   7430         MOV     A,#0x30
   \   00029C   2E           ADD     A,R6
   \   00029D   C0E0         PUSH    A
   \   00029F   7412         MOV     A,#0x12
   \   0002A1   12....       LCALL   ?XSTACK_DISP0_8
   \   0002A4   D0E0         POP     A
   \   0002A6   F0           MOVX    @DPTR,A
   1463            yposition=10*(yposition-(float)number8);
   \   0002A7   85..82       MOV     DPL,?XSP + 0
   \   0002AA   85..83       MOV     DPH,?XSP + 1
   \   0002AD   78..         MOV     R0,#?V0 + 0
   \   0002AF   12....       LCALL   ?L_MOV_X
   \   0002B2   8E..         MOV     ?V0 + 8,R6
   \   0002B4   E4           CLR     A
   \   0002B5   F5..         MOV     ?V0 + 9,A
   \   0002B7   F5..         MOV     ?V0 + 10,A
   \   0002B9   F5..         MOV     ?V0 + 11,A
   \   0002BB   78..         MOV     R0,#?V0 + 8
   \   0002BD   12....       LCALL   ?UL_TO_FLT
   \   0002C0   78..         MOV     R0,#?V0 + 0
   \   0002C2   79..         MOV     R1,#?V0 + 8
   \   0002C4   12....       LCALL   ?FLT_SUB
   \   0002C7   90....       MOV     DPTR,#__Constant_41200000
   \   0002CA   78..         MOV     R0,#?V0 + 8
   \   0002CC   12....       LCALL   ?L_MOV_X
   \   0002CF   78..         MOV     R0,#?V0 + 0
   \   0002D1   79..         MOV     R1,#?V0 + 8
   \   0002D3   12....       LCALL   ?FLT_MUL
   \   0002D6   85..82       MOV     DPL,?XSP + 0
   \   0002D9   85..83       MOV     DPH,?XSP + 1
   \   0002DC   78..         MOV     R0,#?V0 + 0
   \   0002DE   12....       LCALL   ?L_MOV_TO_X
   1464            number8=(uint8)yposition+'0';
   \   0002E1   85..82       MOV     DPL,?XSP + 0
   \   0002E4   85..83       MOV     DPH,?XSP + 1
   \   0002E7   78..         MOV     R0,#?V0 + 0
   \   0002E9   12....       LCALL   ?L_MOV_X
   \   0002EC   78..         MOV     R0,#?V0 + 0
   \   0002EE   12....       LCALL   ?FLT_TO_L
   \   0002F1   E5..         MOV     A,?V0 + 0
   \   0002F3   2430         ADD     A,#0x30
   \   0002F5   FE           MOV     R6,A
   1465            data[11]=number8;
   \   0002F6   C0E0         PUSH    A
   \   0002F8   7413         MOV     A,#0x13
   \   0002FA   12....       LCALL   ?XSTACK_DISP0_8
   \   0002FD   D0E0         POP     A
   \   0002FF   F0           MOVX    @DPTR,A
   1466            data[12]=',';
   \   000300   7414         MOV     A,#0x14
   \   000302   12....       LCALL   ?XSTACK_DISP0_8
   \   000305   742C         MOV     A,#0x2c
   \   000307   F0           MOVX    @DPTR,A
   1467            number8=(uint8)zposition;
   \   000308   85....       MOV     ?V0 + 0,?V0 + 4
   \   00030B   85....       MOV     ?V0 + 1,?V0 + 5
   \   00030E   85....       MOV     ?V0 + 2,?V0 + 6
   \   000311   85....       MOV     ?V0 + 3,?V0 + 7
   \   000314   78..         MOV     R0,#?V0 + 0
   \   000316   12....       LCALL   ?FLT_TO_L
   \   000319   E5..         MOV     A,?V0 + 0
   \   00031B   AE..         MOV     R6,?V0 + 0
   1468            data[13]=number8+'0';
   \   00031D   7430         MOV     A,#0x30
   \   00031F   2E           ADD     A,R6
   \   000320   C0E0         PUSH    A
   \   000322   7415         MOV     A,#0x15
   \   000324   12....       LCALL   ?XSTACK_DISP0_8
   \   000327   D0E0         POP     A
   \   000329   F0           MOVX    @DPTR,A
   1469            data[14]='.';
   \   00032A   7416         MOV     A,#0x16
   \   00032C   12....       LCALL   ?XSTACK_DISP0_8
   \   00032F   742E         MOV     A,#0x2e
   \   000331   F0           MOVX    @DPTR,A
   1470            zposition=10*(zposition-(float)number8);
   \   000332   8E..         MOV     ?V0 + 0,R6
   \   000334   E4           CLR     A
   \   000335   F5..         MOV     ?V0 + 1,A
   \   000337   F5..         MOV     ?V0 + 2,A
   \   000339   F5..         MOV     ?V0 + 3,A
   \   00033B   78..         MOV     R0,#?V0 + 0
   \   00033D   12....       LCALL   ?UL_TO_FLT
   \   000340   78..         MOV     R0,#?V0 + 4
   \   000342   79..         MOV     R1,#?V0 + 0
   \   000344   12....       LCALL   ?FLT_SUB
   \   000347   90....       MOV     DPTR,#__Constant_41200000
   \   00034A   78..         MOV     R0,#?V0 + 0
   \   00034C   12....       LCALL   ?L_MOV_X
   \   00034F   78..         MOV     R0,#?V0 + 4
   \   000351   79..         MOV     R1,#?V0 + 0
   \   000353   12....       LCALL   ?FLT_MUL
   1471            number8=(uint8)zposition;
   \   000356   85....       MOV     ?V0 + 0,?V0 + 4
   \   000359   85....       MOV     ?V0 + 1,?V0 + 5
   \   00035C   85....       MOV     ?V0 + 2,?V0 + 6
   \   00035F   85....       MOV     ?V0 + 3,?V0 + 7
   \   000362   78..         MOV     R0,#?V0 + 0
   \   000364   12....       LCALL   ?FLT_TO_L
   \   000367   E5..         MOV     A,?V0 + 0
   \   000369   AE..         MOV     R6,?V0 + 0
   1472            data[15]=number8+'0';
   \   00036B   7430         MOV     A,#0x30
   \   00036D   2E           ADD     A,R6
   \   00036E   C0E0         PUSH    A
   \   000370   7417         MOV     A,#0x17
   \   000372   12....       LCALL   ?XSTACK_DISP0_8
   \   000375   D0E0         POP     A
   \   000377   F0           MOVX    @DPTR,A
   1473            zposition=10*(zposition-(float)number8);
   \   000378   8E..         MOV     ?V0 + 0,R6
   \   00037A   E4           CLR     A
   \   00037B   F5..         MOV     ?V0 + 1,A
   \   00037D   F5..         MOV     ?V0 + 2,A
   \   00037F   F5..         MOV     ?V0 + 3,A
   \   000381   78..         MOV     R0,#?V0 + 0
   \   000383   12....       LCALL   ?UL_TO_FLT
   \   000386   78..         MOV     R0,#?V0 + 4
   \   000388   79..         MOV     R1,#?V0 + 0
   \   00038A   12....       LCALL   ?FLT_SUB
   \   00038D   90....       MOV     DPTR,#__Constant_41200000
   \   000390   78..         MOV     R0,#?V0 + 0
   \   000392   12....       LCALL   ?L_MOV_X
   \   000395   78..         MOV     R0,#?V0 + 4
   \   000397   79..         MOV     R1,#?V0 + 0
   \   000399   12....       LCALL   ?FLT_MUL
   1474            number8=(uint8)zposition+'0';
   \   00039C   85....       MOV     ?V0 + 0,?V0 + 4
   \   00039F   85....       MOV     ?V0 + 1,?V0 + 5
   \   0003A2   85....       MOV     ?V0 + 2,?V0 + 6
   \   0003A5   85....       MOV     ?V0 + 3,?V0 + 7
   \   0003A8   78..         MOV     R0,#?V0 + 0
   \   0003AA   12....       LCALL   ?FLT_TO_L
   \   0003AD   E5..         MOV     A,?V0 + 0
   \   0003AF   2430         ADD     A,#0x30
   \   0003B1   FE           MOV     R6,A
   1475            data[16]=number8;
   \   0003B2   C0E0         PUSH    A
   \   0003B4   7418         MOV     A,#0x18
   \   0003B6   12....       LCALL   ?XSTACK_DISP0_8
   \   0003B9   D0E0         POP     A
   \   0003BB   F0           MOVX    @DPTR,A
   1476           
   1477            if ( AF_DataRequest( &SampleApp_Quadrotor_Location_DstAddr, &SampleApp_epDesc,
   1478                                   LZQR_GROUP_CLUSTERID,
   1479                                   18,//osal_strlen("Q1")+1,
   1480                                   data,
   1481                                   &SampleApp_TransID,
   1482                                   AF_DISCV_ROUTE,//AF_SKIP_ROUTING,  
   1483                                   AF_DEFAULT_RADIUS// 1
   1484                                     ) == afStatus_SUCCESS )
   \   0003BC                ; Setup parameters for call to function AF_DataRequest
   \   0003BC   75..1E       MOV     ?V0 + 0,#0x1e
   \   0003BF   78..         MOV     R0,#?V0 + 0
   \   0003C1   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0003C4   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0003C7   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0003CA   78..         MOV     R0,#?V0 + 0
   \   0003CC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003CF   740B         MOV     A,#0xb
   \   0003D1   12....       LCALL   ?XSTACK_DISP0_8
   \   0003D4   8582..       MOV     ?V0 + 0,DPL
   \   0003D7   8583..       MOV     ?V0 + 1,DPH
   \   0003DA   78..         MOV     R0,#?V0 + 0
   \   0003DC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003DF   75..12       MOV     ?V0 + 0,#0x12
   \   0003E2   75..00       MOV     ?V0 + 1,#0x0
   \   0003E5   78..         MOV     R0,#?V0 + 0
   \   0003E7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003EA   75..03       MOV     ?V0 + 0,#0x3
   \   0003ED   75..00       MOV     ?V0 + 1,#0x0
   \   0003F0   78..         MOV     R0,#?V0 + 0
   \   0003F2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003F5   7920         MOV     R1,#0x20
   \   0003F7   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   0003F9   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   0003FB   7A..         MOV     R2,#SampleApp_Quadrotor_Location_DstAddr & 0xff
   \   0003FD   7B..         MOV     R3,#(SampleApp_Quadrotor_Location_DstAddr >> 8) & 0xff
   \   0003FF   12....       LCALL   ??AF_DataRequest?relay
   \   000402   7409         MOV     A,#0x9
   \   000404   12....       LCALL   ?DEALLOC_XSTACK8
   \   000407   E9           MOV     A,R1
   1485              {
   1486              }
   1487              else
   1488              {
   1489                // Error occurred in request to send.
   1490              }
   1491          
   1492          
   1493          }
   \   000408   741A         MOV     A,#0x1a
   \   00040A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00040D   7F0E         MOV     R7,#0xe
   \   00040F   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for imof1>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for imof2>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for imof3>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for imof4>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for nindex1>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for nindex2>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for nindex3>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for nindex4>`:
   \   000000   0000         DW 0
   \   000002   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for nValue>`:
   \   000000   00004040     DD 40400000H
   \   000004   00004040     DD 40400000H
   \   000008   00004040     DD 40400000H
   \   00000C   00004040     DD 40400000H

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for AValue>`:
   \   000000   00003042     DD 42300000H
   \   000004   00003042     DD 42300000H
   \   000008   00003042     DD 42300000H
   \   00000C   00003042     DD 42300000H

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for AnchorX>`:
   \   000000   9A991940     DD 4019999AH
   \   000004   00000000     DD 0H
   \   000008   00000000     DD 0H
   \   00000C   9A991940     DD 4019999AH

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for AnchorY>`:
   \   000000   66668640     DD 40866666H
   \   000004   66668640     DD 40866666H
   \   000008   00000000     DD 0H
   \   00000C   00000000     DD 0H

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for DeviceID>`:
   \   000000   0100         DW 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_QuadrotorMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_QuadrotorMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Tester_calibrationMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Tester_calibrationMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_AnchorMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_AnchorMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Router_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Router_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Router_calibrationNMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Router_calibrationNMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Tester_calibrationAMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Tester_calibrationAMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Quadrotor_SendLocation?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Quadrotor_SendLocation

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "UartInit OK\\n">`:
   \   000000   55617274     DB "UartInit OK\012"
   \            496E6974
   \            204F4B0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 2">`:
   \   000000   47726F75     DB "Group 2"
   \            70203200

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "SampleApp">`:
   \   000000   53616D70     DB "SampleApp"
   \            6C654170
   \            7000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "A">`:
   \   000000   4100         DB "A"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "A1">`:
   \   000000   413100       DB "A1"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "N">`:
   \   000000   4E00         DB "N"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "A">_1`:
   \   000000   4100         DB "A"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Q">`:
   \   000000   5100         DB "Q"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_41200000:
   \   000000   00002041     DD 41200000H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3dcccccd:
   \   000000   CDCCCC3D     DD 3DCCCCCDH

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1:
   \   000000   01000000     DD 1H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3c23d70a:
   \   000000   0AD7233C     DD 3C23D70AH

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0H
   1494          
   1495          
   1496          ///*********************************************************************
   1497          // * @fn      SampleApp_MinMax_localization
   1498          // *
   1499          // * @brief   calculate the position of a quadrotor
   1500          // *
   1501          // * @param   rssi_i readings from different anchors, the result will be stored in xposition and yposition
   1502          // *
   1503          // * @return  none
   1504          // */
   1505          //void SampleApp_MinMax_localization(float* xposition, float* yposition, float zposition)
   1506          //{
   1507          //    //initial the parameter 
   1508          //    float x_left=-10;
   1509          //    float x_right=10;
   1510          //    float y_bottom=-10;
   1511          //    float y_top=10;
   1512          //    float gainconst=1.16f;
   1513          //    float naverage=0.0f;
   1514          //    for(int i=0;i<4;i++)
   1515          //    {
   1516          //      naverage+=nValue[i];
   1517          //    }
   1518          //    //calculate the distances based on the calibrated parameter n and A
   1519          //    for (int i=0; i<4; i++)
   1520          //    {
   1521          //      distance[i]=pow(10,((RssiValue[i]/gainconst-AValue[i])/(10*naverage)));
   1522          //      distance[i]=pow((distance[i]*distance[i]-zposition*zposition),0.5);
   1523          //    }
   1524          //    
   1525          //    
   1526          //    for(int i=0; i<4; i++)
   1527          //    {
   1528          //        //max of  
   1529          //       if((AnchorX[i]-distance[i])>x_left)
   1530          //       {x_left=(AnchorX[i]+distance[i]);}
   1531          //       
   1532          //       if((AnchorX[i]+distance[i])<x_right)
   1533          //       {x_right=(AnchorX[i]+distance[i]);}
   1534          //       
   1535          //       if((AnchorY[i]-distance[i])>y_bottom)
   1536          //       {y_bottom=(AnchorY[i]+distance[i]);}
   1537          //       
   1538          //       if((AnchorY[i]+distance[i])<y_top)
   1539          //       {y_top=(AnchorY[i]+distance[i]);}
   1540          //    }
   1541          //    *xposition=(x_left+x_right)/2;
   1542          //    *yposition=(y_bottom+y_top)/2;
   1543          //    
   1544          //}
   1545          //
   1546          //
   1547          ///*********************************************************************
   1548          // * @fn      SampleApp_WCL_localization
   1549          // *
   1550          // * @brief   calculate the position of a quadrotor
   1551          // *
   1552          // * @param   rssi_i readings from different anchors, the result will be stored in xposition and yposition
   1553          // *
   1554          // * @return  none
   1555          // */
   1556          //void SampleApp_WCL_localization(float* xposition, float* yposition)
   1557          //{
   1558          //    //initial the parameter 
   1559          //    int g=4;   // const. parameter for WCL
   1560          //    float w[4]; //weight
   1561          //    double sumw=0.0; // sum of weights
   1562          //    float naverage=0.0f;
   1563          //    for(int i=0;i<4;i++)
   1564          //    {
   1565          //      naverage+=nValue[i];
   1566          //    }
   1567          //    
   1568          //    //calculate the distances based on the calibrated parameter n and A
   1569          //    for (int i=0; i<4; i++)
   1570          //    {
   1571          //      distance[i]=pow(10,((RssiValue[i]/1.16f-AValue[i])/(10*naverage)));
   1572          //      w[i]=pow(distance[i],g);
   1573          //      sumw+=w[i];
   1574          //    }
   1575          //
   1576          //    
   1577          //     
   1578          //    *xposition=AnchorX[0]*w[0]/sumw+AnchorX[1]*w[1]/sumw+AnchorX[2]*w[2]/sumw+AnchorX[3]*w[3]/sumw;
   1579          //    *yposition=AnchorY[0]*w[0]/sumw+AnchorY[1]*w[1]/sumw+AnchorY[2]*w[2]/sumw+AnchorY[3]*w[3]/sumw;
   1580          //    
   1581          //}
   1582          //
   1583          ///*********************************************************************
   1584          // * @fn      gaussianfilter
   1585          // *
   1586          // * @brief   filter for received rssi data
   1587          // *
   1588          // * @param   rssi rssi array, the result will be stored in xposition and yposition
   1589          // *
   1590          // * @return  none
   1591          // */
   1592          //float gaussianfilter(int8* rssi, int length)
   1593          //{
   1594          //  float mu=0.0;
   1595          //  float variance=0.0;
   1596          //  float newmean=0.0;
   1597          //  
   1598          //  for (int i=0; i<length; i++)
   1599          //  {
   1600          //    mu+=*(rssi+i);
   1601          //  }
   1602          //  mu=mu/length;
   1603          //  
   1604          //  for (int i=0; i<length; i++)
   1605          //  {
   1606          //    float temp=*(rssi+i);
   1607          //    variance+=(float)pow((mu-temp),2);
   1608          //  }
   1609          //  variance=(float)(variance/length);
   1610          //  
   1611          //  float intervalmin=mu-variance;
   1612          //  float intervalmax=mu+variance;
   1613          //  
   1614          //  int index=0;
   1615          //  for (int i=0; i<length; i++)
   1616          //  {
   1617          //    float temp=*(rssi+i);
   1618          //    if(temp<=intervalmax&&temp>=intervalmin)
   1619          //       {
   1620          //         index++;
   1621          //         newmean+=temp;
   1622          //       }
   1623          //  }
   1624          //  
   1625          //       if(index!=0)
   1626          //       {
   1627          //         newmean=newmean/index;
   1628          //       }
   1629          //       
   1630          //  return newmean;
   1631          //}
   1632          //
   1633          ///*********************************************************************
   1634          // * @fn      averagefilter
   1635          // *
   1636          // * @brief   filter for received rssi data
   1637          // *
   1638          // * @param   rssi rssi array
   1639          // *
   1640          // * @return  none
   1641          // */
   1642          //float averagefilter(int8* rssi, int length)
   1643          //{
   1644          //  int32 mu=0;
   1645          // 
   1646          //  float newmean=0.0;
   1647          //  
   1648          //  for(int i=0; i<length; i++)
   1649          //   {
   1650          //                  mu+=(int32)*(rssi+i);
   1651          //   }
   1652          //                 newmean=((float)mu)/((float)length);
   1653          //             
   1654          //       
   1655          //  return newmean;
   1656          //}
   1657          //
   1658          ///*********************************************************************
   1659          // * @fn      calibrationN
   1660          // *
   1661          // * @brief   calibration of n
   1662          // *
   1663          // * @param   rssi rssi array
   1664          // *
   1665          // * @return  none
   1666          // */
   1667          //float calibrationN(int localID, int index, float rssivalue_f, float AnchorX[4], float AnchorY[4], float AnchorZ[4], float A[4])
   1668          //{
   1669          //  float n;
   1670          //  if(localID!=index)
   1671          //  {
   1672          //      
   1673          //      float d=0.0;
   1674          //      d=(AnchorX[localID-1]-AnchorX[index-1])*(AnchorX[localID-1]-AnchorX[index-1])+
   1675          //        (AnchorY[localID-1]-AnchorY[index-1])*(AnchorY[localID-1]-AnchorY[index-1])+
   1676          //          (AnchorZ[localID-1]-AnchorZ[index-1])*(AnchorZ[localID-1]-AnchorZ[index-1]);
   1677          //     // d+=pow((AnchorY[localID-1]-AnchorY[index-1]),2);
   1678          //     // d+=pow((AnchorZ[localID-1]-AnchorZ[index-1]),2);
   1679          //      d=pow(d,0.5);
   1680          //      if(d!=1)
   1681          //        n=(rssivalue_f-A[index-1])/10/(log10(d));
   1682          //      else
   1683          //        n=nValue[localID-1];
   1684          //  }
   1685          //  else
   1686          //  {
   1687          //    n=nValue[localID-1];
   1688          //  }
   1689          //  return n;
   1690          //}
   1691          /*********************************************************************
   1692          *********************************************************************/

   Maximum stack usage in bytes:

   ISTACK PSTACK XSTACK Function
   ------ ------ ------ --------
       4      0     54  SampleApp_AnchorMSGCB
                          0 0 28 -> HalUARTWrite
                          0 0 32 -> SampleApp_Router_calibrationNMessage
                          0 0 40 -> calibrationN
                          0 0 32 -> moving_average
                          0 0 36 -> moving_average_f
       0      0     27  SampleApp_HandleKeys
                          0 0 13 -> SampleApp_Tester_calibrationAMessage
       0      0     14  SampleApp_Init
                          0 0 11 -> HalLcdWriteString
                          0 0 11 -> HalUARTWrite
                          0 0 11 -> MT_UartInit
                          0 0 11 -> MT_UartRegisterTaskID
                          0 0 11 -> RegisterForKeys
                          0 0 11 -> afRegister
                          0 0 11 -> aps_AddGroup
                          0 0 14 -> osal_memcpy
       0      0     38  SampleApp_MessageMSGCB
                          0 0 24 -> HalUARTWrite
       0      0     14  SampleApp_ProcessEvent
                          0 0 14 -> SampleApp_AnchorMSGCB
                          0 0 14 -> SampleApp_HandleKeys
                          0 0 14 -> SampleApp_MessageMSGCB
                          0 0 14 -> SampleApp_QuadrotorMSGCB
                          0 0 14 -> SampleApp_Quadrotor_SendLocation
                          0 0 14 -> SampleApp_Router_SendPeriodicMessage
                          0 0 14 -> SampleApp_Tester_calibrationMSGCB
                          0 0 14 -> osal_msg_deallocate
                          0 0 14 -> osal_msg_receive
                          0 0 14 -> osal_rand
                          0 0 14 -> osal_start_timerEx
       4      0     48  SampleApp_QuadrotorMSGCB
                          0 0 26 -> HalUARTWrite
                          0 0 30 -> moving_average
                          0 0 34 -> moving_average_f
       2      0     76  SampleApp_Quadrotor_SendLocation
                          0 0 57 -> AF_DataRequest
                          0 0 62 -> SampleApp_MinMax_localization
       2      0     35  SampleApp_Router_SendPeriodicMessage
                          0 0 21 -> AF_DataRequest
                          0 0 17 -> osal_strlen
       2      0     70  SampleApp_Router_calibrationNMessage
                          0 0 38 -> AF_DataRequest
       2      0     55  SampleApp_Tester_calibrationAMessage
                          0 0 42 -> AF_DataRequest
       0      0     30  SampleApp_Tester_calibrationMSGCB
                          0 0 12 -> HalUARTWrite
                          0 0 16 -> moving_average


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       2  ?<Constant "A">
       2  ?<Constant "A">_1
       3  ?<Constant "A1">
       8  ?<Constant "Group 1">
       8  ?<Constant "Group 2">
       2  ?<Constant "N">
       2  ?<Constant "Q">
      10  ?<Constant "SampleApp">
      13  ?<Constant "UartInit OK\n">
      16  ?<Initializer for AValue>
      16  ?<Initializer for AnchorX>
      16  ?<Initializer for AnchorY>
       2  ?<Initializer for DeviceID>
       4  ?<Initializer for imof1>
       4  ?<Initializer for imof2>
       4  ?<Initializer for imof3>
       4  ?<Initializer for imof4>
      16  ?<Initializer for nValue>
       4  ?<Initializer for nindex1>
       4  ?<Initializer for nindex2>
       4  ?<Initializer for nindex3>
       4  ?<Initializer for nindex4>
       6  ??SampleApp_AnchorMSGCB?relay
       6  ??SampleApp_HandleKeys?relay
       6  ??SampleApp_Init?relay
       6  ??SampleApp_MessageMSGCB?relay
       6  ??SampleApp_ProcessEvent?relay
       6  ??SampleApp_QuadrotorMSGCB?relay
       6  ??SampleApp_Quadrotor_SendLocation?relay
       6  ??SampleApp_Router_SendPeriodicMessage?relay
       6  ??SampleApp_Router_calibrationNMessage?relay
       6  ??SampleApp_Tester_calibrationAMessage?relay
       6  ??SampleApp_Tester_calibrationMSGCB?relay
      16  AValue
      16  AnchorX
      16  AnchorY
      16  AnchorZ
       2  DeviceID
      16  RssiValue
       1  SampleAppFlashCounter
       1  SampleAppPeriodicCounter
    2459  SampleApp_AnchorMSGCB
       6  SampleApp_ClusterList
      18  SampleApp_Group_1
      18  SampleApp_Group_2
     132  SampleApp_HandleKeys
     208  SampleApp_Init
     497  SampleApp_MessageMSGCB
       1  SampleApp_NwkState
     481  SampleApp_ProcessEvent
    1348  SampleApp_QuadrotorMSGCB
      12  SampleApp_Quadrotor_Location_DstAddr
    1042  SampleApp_Quadrotor_SendLocation
      12  SampleApp_Router_Periodic_DstAddr
     166  SampleApp_Router_SendPeriodicMessage
     394  SampleApp_Router_calibrationNMessage
      12  SampleApp_SimpleDesc
       1  SampleApp_TaskID
      12  SampleApp_Tester_DstAddr
     445  SampleApp_Tester_calibrationAMessage
     313  SampleApp_Tester_calibrationMSGCB
       1  SampleApp_TransID
       6  SampleApp_epDesc
       4  __Constant_0
       4  __Constant_1
       4  __Constant_3c23d70a
       4  __Constant_3dcccccd
       4  __Constant_41200000
       2  aindex
       1  i1
       1  i2
       1  i3
       1  i4
       4  imof1
       4  imof2
       4  imof3
       4  imof4
      16  locationX
      16  locationY
      16  locationZ
      16  nValue
       4  nindex1
       4  nindex2
       4  nindex3
       4  nindex4
      32  perRssiBuf1
      32  perRssiBuf2
      32  perRssiBuf3
      32  perRssiBuf4
      32  pernBuf1
      32  pernBuf2
      32  pernBuf3
      32  pernBuf4
       1  rssivalue
       4  sumRssi1
       4  sumRssi2
       4  sumRssi3
       4  sumRssi4
      36  tempParameter

 
 7 485 bytes in segment BANKED_CODE
    66 bytes in segment BANK_RELAYS
    98 bytes in segment XDATA_I
    98 bytes in segment XDATA_ID
    88 bytes in segment XDATA_ROM_C
   478 bytes in segment XDATA_Z
 
 7 649 bytes of CODE  memory
    68 bytes of CONST memory (+ 20 bytes shared)
   576 bytes of XDATA memory

Errors: none
Warnings: none
